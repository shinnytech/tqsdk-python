(function(t){function e(e){for(var a,o,r=e[0],d=e[1],c=e[2],h=0,l=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(t[a]=d[a]);u&&u(e);while(l.length)l.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var d=n[r];0!==i[d]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="web/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=d;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0614":function(t,e,n){},"1db5":function(t,e,n){},"1f34":function(t,e,n){"use strict";n("d59a")},"304a":function(t,e,n){},3838:function(t,e,n){},4678:function(t,e,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=s(t);return n(e)}function s(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=s,t.exports=i,i.id="4678"},"4f2e":function(t,e,n){"use strict";n("bd4b")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("c1df"),s=n.n(i),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tq-app"},[e("div",{staticClass:"layout-area header-container"},[e("tq-header-view",{attrs:{height:t.headerHeight,width:t.$root.windowWidth}})],1),e("router-view")],1)},r=[],d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tq-header-view"},[e("tq-layout-area",{attrs:{height:t.height,otherStyle:{backgroundColor:"#FEFEFE"}}},[e("a",{attrs:{href:"https://www.shinnytech.com/tianqin/",target:"_blank"}},[e("img",{staticClass:"logo",style:{padding:"4px",width:t.height+"px",height:t.height+"px"},attrs:{alt:"Tianqin",src:n("cf05")}})])]),e("tq-layout-area",{attrs:{height:t.height,left:t.height,width:240,otherStyle:{paddingTop:"8px"}}},[t._v(" "+t._s(t.$store.state.file_name)+" ")]),e("tq-layout-area",{attrs:{height:t.height,left:t.height+240,width:380,otherStyle:{paddingTop:"8px",backgroundColor:"backtest"===t.$store.state.mode?"#FAF5EA":"replay"===t.$store.state.mode?"#F0E2FA":"#FFF"}}},["run"===t.$store.state.mode?e("div",[t._v("信易账户："+t._s(t.$store.state.user_name))]):t._e(),"backtest"===t.$store.state.mode?e("div",[t._v("回测区间： "+t._s(t.formatDt(t.$store.state.start_dt))+" -- "+t._s(t.formatDt(t.$store.state.end_dt))+" ")]):t._e(),"replay"===t.$store.state.mode?e("div",[e("tq-replay-ctrl")],1):t._e()]),e("tq-layout-area",{attrs:{height:t.height,width:160,horizontalAlign:"right",otherStyle:{paddingTop:"8px"}}},[e("Badge",{attrs:{color:t.$store.state.py_file_status?"green":"red",text:"py文件"}}),e("Badge",{attrs:{color:t.$store.state.md_url_status?"green":"red",text:"行情"}})],1)],1)},c=[],u=(n("a9e3"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"tq-layout-absolute",style:t.computedStyle},[t._t("default")],2)}),h=[],l={name:"tq-layout-absolute",data:function(){return{}},props:{horizontalAlign:{type:String,default:"left"},verticalAlign:{type:String,default:"top"},top:{type:Number,default:0},left:{type:Number,default:0},bottom:{type:Number,default:0},right:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},otherStyle:{type:Object,default:function(){}}},computed:{computedStyle:function(){var t={width:this.width+"px",height:this.height+"px"};return t[this.horizontalAlign]=this[this.horizontalAlign]+"px",t[this.verticalAlign]=this[this.verticalAlign]+"px",Object.assign(t,this.otherStyle)}}},p=l,f=(n("1f34"),n("2877")),m=Object(f["a"])(p,u,h,!1,null,null,null),_=m.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"replay-control"},[t._v(" 复盘日期： "+t._s(t.currentDateTime?t.currentDateTime:t.formatDt(t.$store.state.replay_dt))+" ("+t._s(this.currentSpeed)+") "),e("ButtonGroup",{attrs:{size:"small"}},[e("Button",{on:{click:function(e){return t.ctrl("play")}}},[e("Icon",{attrs:{type:"ios-play"}})],1),e("Button",{on:{click:function(e){return t.ctrl("pause")}}},[e("Icon",{attrs:{type:"ios-pause"}})],1),e("Button",{on:{click:function(e){return t.ctrl("rewind")}}},[e("Icon",{attrs:{type:"ios-rewind"}})],1),e("Button",{on:{click:function(e){return t.ctrl("fastforward")}}},[e("Icon",{attrs:{type:"ios-fastforward"}})],1)],1)],1)},g=[],y=(n("fb6a"),n("e9c4"),n("d3b7"),{name:"tq-replay-control",data:function(){return{currentSpeed:"-",currentDateTime:""}},props:{width:Number},computed:{replayUrl:function(){return this.$store.state.ctrl_url}},methods:{setSpeed:function(t){fetch(this.replayUrl,{method:"POST",body:JSON.stringify({aid:"ratio",speed:t})}).then((function(t){}))},ctrl:function(t){"play"===t?("-"===this.currentSpeed&&(this.currentSpeed=1),this.setSpeed(this.currentSpeed)):"pause"===t?this.setSpeed(0):"rewind"===t?("-"===this.currentSpeed?this.currentSpeed=1:this.currentSpeed<=5?this.currentSpeed=Math.max(1,this.currentSpeed-1):this.currentSpeed<=40?this.currentSpeed-=5:this.currentSpeed<=100&&(this.currentSpeed-=10),this.setSpeed(this.currentSpeed)):"fastforward"===t&&("-"===this.currentSpeed?this.currentSpeed=2:this.currentSpeed<5?this.currentSpeed+=1:this.currentSpeed<40?this.currentSpeed+=5:this.currentSpeed<100?this.currentSpeed+=10:this.currentSpeed=100,this.setSpeed(this.currentSpeed))},formatDt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return s()(t/1e6).format(e)}},mounted:function(){var t=this,e=["KQ.m@SHFE.au","KQ.m@SHFE.ag","KQ.m@CFFEX.T","KQ.m@CFFEX.TF"];this.$tqsdk.subscribe_quote(e),this.$tqsdk.on("rtn_data",(function(){for(var n=0,a=e;n<a.length;n++){var i=a[n],s=t.$tqsdk.get_by_path(["quotes",i,"datetime"]);t.currentDateTime=s&&s>t.currentDateTime?s.slice(0,19):t.currentDateTime}}))}}),v=y,w=(n("8833"),Object(f["a"])(v,b,g,!1,null,null,null)),k=w.exports,x={name:"tq-header-view",components:{TqLayoutArea:_,TqReplayCtrl:k},props:{height:Number},methods:{formatDt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return s()(t/1e6).format(e)}}},j=x,C=(n("a854"),Object(f["a"])(j,d,c,!1,null,null,null)),S=C.exports,q=38,A={name:"tq-app",components:{TqHeaderView:S},data:function(){return{headerHeight:q}},methods:{},created:function(){}},T=A,M=(n("9379"),Object(f["a"])(T,o,r,!1,null,null,null)),N=M.exports,$=n("0977"),z=n("8c4f"),I=(n("14d9"),n("2f62"));a["a"].use(I["a"]);var O=new I["a"].Store({state:{mode:"",broker_id:"",user_name:"",py_file_status:"",md_url_status:"",file_path:"",file_name:"",start_dt:"",end_dt:"",current_dt:"",accounts:{},account_keys:[]},mutations:{set_action:function(t,e){for(var n in e.accounts)t.account_keys.push(n);Object.assign(t,e)},set_py_file_status:function(t,e){t.py_file_status=e}},actions:{}}),D=O,F=n("8629"),E=n("f843"),H=n("8144"),B=n("efc9"),Y=n("2d48"),R=n("6def"),P=n("e79d"),L=n("90b2"),G=n("c5c1"),W=n("dcbf"),Q=n("e3f5"),Z=n("5250"),U=n("76ea"),J=n("b3e6"),V=n("8679"),X=n("fe66"),K=n("6252"),tt=n("9259"),et=n("aa30"),nt=n("e0b9");a["a"].prototype.$Loading=nt["a"],a["a"].prototype.$Message=et["a"],a["a"].prototype.$Modal=tt["a"],a["a"].prototype.$Notice=K["a"],a["a"].prototype.$Spin=X["a"],a["a"].component("Layout",V["a"]),a["a"].component("Row",J["a"]),a["a"].component("Col",U["a"]),a["a"].component("Icon",Z["a"]),a["a"].component("Button",Q["a"]),a["a"].component("ButtonGroup",W["a"]),a["a"].component("Dropdown",G["a"]),a["a"].component("DropdownMenu",L["a"]),a["a"].component("DropdownItem",P["a"]),a["a"].component("Badge",R["a"]),a["a"].component("Radio",Y["a"]),a["a"].component("Checkbox",B["a"]),a["a"].component("RadioGroup",H["a"]),a["a"].component("Tabs",E["a"]),a["a"].component("TabPane",F["a"]),a["a"].component("Spin",X["a"]);n("4de4"),n("f00c"),n("8ba4"),n("b680");a["a"].filter("toFixed",(function(t,e){var n=Number(t);return e=Number.isInteger(e)?e:2,Number.isFinite(n)?n.toFixed(e):t||"-"}));var at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tq-home"},[e("div",{staticClass:"layout-area top-container",style:{height:t.topHeight+"px"}},[e("tq-top-view",{attrs:{height:t.topHeight,width:t.$root.windowWidth},on:{onChangeOnlyMainBoard:t.onChangeOnlyMainBoard}})],1),e("div",{staticClass:"layout-area bottom-container",style:{height:t.bottomHeight+"px",top:t.bottomYOffset+4+"px",backgroundColor:"#FEFEFE",boxShadow:t.showBottomShadow?"0px -3px 4px -1px #AFAFAF":""}},[e("div",{staticClass:"bottom-area-handle",on:{mousedown:t.handleMousedown}}),e("tq-bottom-view",{attrs:{height:t.bottomHeight,width:t.$root.windowWidth}})],1)])},it=[],st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tq-top-view"},[e("tq-layout-area",{staticClass:"left-view",attrs:{height:t.height,width:t.chartWidth}},[e("tq-layout-area",{attrs:{height:26,width:600}},[e("span",{staticClass:"title"},[t._v(t._s(t.title))]),e("button-group-durations",{attrs:{duration:t.duration},on:{onChangeDuration:t.onChangeDuration}}),t._v("   "),e("Checkbox",{attrs:{size:"small",border:""},model:{value:t.onlyMainBoard,callback:function(e){t.onlyMainBoard=e},expression:"onlyMainBoard"}},[t._v("全屏/还原")])],1),e("tq-layout-area",{attrs:{top:26}},[e("tq-chart-components",{ref:"tqChart",attrs:{instrumentId:t.instrumentId,duration:t.duration,height:t.height-26,width:t.chartWidth,theme:t.theme,mainType:t.mainType}})],1)],1),e("tq-layout-area",{staticClass:"right-view",attrs:{height:t.height,width:t.rightWidth,horizontalAlign:"right"}},["backtest"!==t.$store.state.mode?e("tq-layout-area",{attrs:{height:t.rightClosed?t.height:160,width:t.rightWidth}},["backtest"!==t.$store.state.mode?e("quote-info",{attrs:{symbol:t.instrumentId,height:t.rightClosed?t.height:160,width:t.rightWidth}}):t._e()],1):t._e(),e("tq-layout-area",{attrs:{top:"backtest"!==t.$store.state.mode?160:0,height:t.rightClosed?0:18,width:t.rightWidth,otherStyle:{backgroundColor:"lightgrey",color:"#333333",fontSize:"12px",fontWeight:"700",overflow:"hidden"}}},[t._v(" 订阅合约列表 ")]),e("tq-layout-area",{attrs:{verticalAlign:"bottom",height:t.rightClosed?0:t.height-("backtest"!==t.$store.state.mode?160:0)-18,width:t.rightWidth,otherStyle:{overflowY:"scroll"}}},[e("subscribed-list",{on:{onChange:t.onChangeSelectedSubscribed}})],1),"backtest"!==t.$store.state.mode?e("div",{staticClass:"right-resize-tool",on:{click:t.toggleRightClosed}},[t.rightClosed?e("Icon",{attrs:{type:"ios-arrow-back"}}):e("Icon",{attrs:{type:"ios-arrow-forward"}})],1):t._e()],1)],1)},ot=[],rt=(n("99af"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"tq-button-group-durations"},[e("RadioGroup",{attrs:{type:"button",size:"small"},model:{value:t.selectedPeriod,callback:function(e){t.selectedPeriod=e},expression:"selectedPeriod"}},t._l(t.periods,(function(t){return e("Radio",{key:t,attrs:{label:t}})})),1)],1)}),dt=[],ct=(n("b64b"),n("07ac"),n("159b"),{"分时":6e10,"1m":6e10,"5m":3e11,"15m":9e11,"30m":18e11,"1h":36e11,"1d":864e11}),ut={data:function(){return{periods:Object.keys(ct),selectedPeriod:"",selectedDuration:null}},props:{duration:Number},watch:{duration:function(){if(this.duration!==this.selectedDuration){var t=Object.values(ct).indexOf(this.duration);t>-1?(this.selectedPeriod=ct[t],this.selectedDuration=this.duration):(this.selectedPeriod="",this.selectedDuration=null)}},selectedPeriod:function(){document.querySelectorAll(".tq-button-group-durations input[type=radio]").forEach((function(t){return t.blur()})),this.selectedDuration=ct[this.selectedPeriod],this.selectedPeriod&&this.selectedDuration&&this.$emit("onChangeDuration",this.selectedDuration,this.selectedPeriod)}}},ht=ut,lt=(n("d9ec"),Object(f["a"])(ht,rt,dt,!1,null,null,null)),pt=lt.exports,ft=n("6029"),mt=(n("22fe"),"web_chart"),_t="web_chart_focus",bt=null,gt=null,yt={name:"tq-chart-components",data:function(){return{id:"TQ-CHART",action:"run"}},props:{instrumentId:{type:String,default:"TQ.m@SHFE.au"},duration:{type:Number,default:6e10},width:Number,height:Number,theme:{type:String,default:"light"},mainType:{type:String,default:"candle"}},render:function(t){var e={class:{"theme-light":"light"===this.theme,"theme-dark":"dark"===this.theme},attrs:{id:this.id}};return t("div",e)},watch:{instrumentId:function(t,e){gt.removeMarkAll(),this.$nextTick(this.updateTqChart)},duration:function(t,e){gt.removeMarkAll(),this.$nextTick(this.updateTqChart)},width:function(t,e){gt&&gt.resize({width:t,height:this.height})},height:function(t,e){gt&&gt.resize({width:this.width,height:t})},mainType:function(t,e){gt.removeMarkAll(),this.$nextTick(this.updateTqChart)}},mounted:function(){var t=this;bt=this.$tqsdk.get({name:"klines",symbol:this.instrumentId,duration:this.duration}),gt=new ft["a"](this.id),gt.on("showRangeChanged",(function(e){if(-1!==e.rightId&&-1!==e.leftId)if("close"===t.mainType){var n=864e11,a=1;t.$tqsdk.set_chart({chart_id:mt,symbol:t.instrumentId,duration:6e10,trading_day_start:n*(1-a),trading_day_count:n*a})}else"candle"===t.mainType&&t.$tqsdk.set_chart({chart_id:mt,symbol:t.instrumentId,duration:t.duration,left_kline_id:Math.max(e.leftId-3e3,0),view_width:8964})})),gt.init({symbol:this.instrumentId,duration:this.duration,height:this.height,width:this.width,mainType:this.mainType,mainSeries:bt}),this.$tqsdk.on("ready",(function(){var e=t.$tqsdk.getQuote(t.instrumentId);gt.setPriceDecs(e.price_decs)})),this.$tqsdk.on("rtn_data",(function(){if(t.updatePositionLine(),t.updateTrades(),t.updateTqSdkChartData(),t.updatePositionRect(),"run"===t.action&&"backtest"===t.$tqsdk.get_by_path(["action","mode"])){var e=a["a"].$tqsdk.get_by_path(["_tqsdk_backtest","current_dt"]);e&&(t.$tqsdk.set_chart({chart_id:_t,symbol:t.instrumentId,duration:t.duration,view_width:gt.bar.barNumbers,focus_datetime:e,focus_position:Math.floor(gt.bar.barNumbers/2)}),t.action="backtest")}var n=t.$tqsdk.get_by_path(["charts",_t]);if(n&&!n.more_data&&n.left_id&&n.right_id){var i=[n.left_id,n.right_id],s=i[0],o=i[1];gt.setRange(s,o),gt.addHighlightBar("movetoid",s+Math.floor(gt.bar.barNumbers/2)),t.$tqsdk.set_chart({chart_id:_t,symbol:"",duration:gt.duration,view_width:0})}else{var r=t.$tqsdk.get_by_path(["charts",mt]);if("close"===t.mainType&&r&&!r.more_data&&(bt=t.$tqsdk.get({name:"klines",symbol:t.instrumentId,duration:6e10}),bt&&bt.trading_day_end_id>-1&&bt.trading_day_start_id>-1&&gt.setRange(bt.trading_day_start_id,bt.trading_day_end_id)),r&&!r.more_data&&t.$tqsdk.is_changed(bt)&&gt.draw(),"backtest"==t.action){var d=t.$tqsdk.get_by_path(["_tqsdk_backtest","current_dt"]);d&&(d>t.$store.state.end_dt&&(d=t.$store.state.end_dt),gt.setMaxDatetime(d),gt.draw())}}})),this.$eventHub.$on("moveChartToDt",(function(t){t=6311232e11+Math.floor((t-6311232e11)/gt.duration)*gt.duration,this.$tqsdk.set_chart({chart_id:_t,symbol:gt.symbol,duration:gt.duration,view_width:gt.bar.barNumbers,focus_datetime:t,focus_position:Math.floor(gt.bar.barNumbers/2)})}))},methods:{updateTqChart:function(){if(this.$tqsdk.set_chart({chart_id:mt,symbol:this.instrumentId,duration:this.duration,view_width:8964}),"backtest"==this.action){var t=this.$tqsdk.get_by_path(["_tqsdk_backtest","current_dt"]);t&&(t>this.$store.state.end_dt&&(t=this.$store.state.end_dt),this.$tqsdk.set_chart({chart_id:_t,symbol:this.instrumentId,duration:this.duration,view_width:gt.bar.barNumbers,focus_datetime:t,focus_position:Math.floor(gt.bar.barNumbers/2)}))}if(bt=this.$tqsdk.get({name:"klines",symbol:this.instrumentId,duration:this.duration}),gt){var e=this.$tqsdk.getQuote(this.instrumentId);gt.setMainSeries(this.instrumentId,this.duration,bt,this.mainType,{price_decs:e.price_decs,price_ticks:e.price_ticks}),this.$nextTick((function(){this.updateTqSdkChartData(!0),this.updateTrades(!0),this.updatePositionRect(!0)}))}},updateTqSdkChartData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.$tqsdk.get_by_path(["draw_chart_datas",gt.symbol,gt.duration]);if(t||e&&e._epoch===this.$tqsdk.dm._epoch)for(var n in e)gt.addSeries(n,e[n])},updatePositionLine:function(t){var e=this.$store.state.account_keys&&this.$store.state.account_keys[0];if(e){var n=this.$tqsdk.getByPath(["trade",e,"positions",gt.symbol]);n&&n.volume_long>0?gt.addMark({id:"pos_long",type:"h-line",boardId:"main",yAlign:"right",y1:n.open_price_long,stroke:"red",text:"多仓".concat(n.volume_long,"手@").concat(n.open_price_long)}):gt.removeMark("pos_long"),n&&n.volume_short>0?gt.addMark({id:"pos_short",type:"h-line",boardId:"main",yAlign:"right",y1:n.open_price_short,stroke:"green",text:"空仓".concat(n.volume_short,"手@").concat(n.open_price_short)}):gt.removeMark("pos_short")}},updateTrades:function(t){var e=this.$store.state.account_keys&&this.$store.state.account_keys[0];if(e){var n=this.$tqsdk.getByPath(["trade",e,"trades"]);for(var a in n){var i=n[a];i.volume>0&&i.exchange_id+"."+i.instrument_id===gt.symbol&&gt.addTradeArrow(a,i)}}},updatePositionRect:function(t){var e=this.$tqsdk.get_by_path(["snapshots"]);for(var n in e){var a=e[n];t?a.positions&&a.positions.hasOwnProperty(gt.symbol)&&gt.addPositionRecord(n,a.positions[gt.symbol]):a._epoch===this.$tqsdk.dm._epoch&&a.positions&&a.positions.hasOwnProperty(gt.symbol)&&gt.addPositionRecord(n,a.positions[gt.symbol])}},setOnlyMainBoard:function(t){gt.setOnlyMainBoard(t)}}},vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"subscribed-list"},[t._l(t.subscribedSymbols,(function(n){return[t._l(t.subscribed[n],(function(a){return[e("Button",{attrs:{size:"small",long:""},on:{click:function(e){return t.onClick(n,a)}}},[t._v(" "+t._s(n)+" "+t._s(t.ParseDurationToString(a))+" ")])]}))]}))],2)},wt=[];n("caad"),n("2532"),n("53ca"),n("a434");function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"===typeof t?t.toFixed(e):t}function xt(t){switch(t){case"BUY":return"买";case"SELL":return"卖";default:return t}}function jt(t){switch(t){case"OPEN":return"开";case"CLOSE":return"平";case"CLOSETODAY":return"平今";default:return t}}function Ct(t){var e="";if(t&&t>=1e9){var n=s.a.duration(t/1e9,"seconds");n.years()>0&&(e+=n.years()+"Y"),n.months()>0&&(e+=n.months()+"M"),n.days()>0&&(e+=n.days()+"D"),n.hours()>0&&(e+=n.hours()+"h"),n.minutes()>0&&(e+=n.minutes()+"m"),n.seconds()>0&&(e+=n.seconds()+"s")}return e}var St=[],qt={},At={data:function(){return{subscribedSymbols:St,subscribed:qt}},props:{},watch:{subscribedSymbols:function(t,e){}},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.getByPath(["subscribed"]);if(e&&e._epoch===t.$tqsdk.dm._epoch){for(var n in e){var a=e[n];if(Array.isArray(a.symbol))for(var i in a.symbol)t.addSubscribed(a.symbol[i],a.dur_nano);else t.addSubscribed(a.symbol,a.dur_nano)}t.updateSubscribedSymbols()}}))},methods:{addSubscribed:function(t,e){qt[t]||(qt[t]=[]),e||(e=""),qt[t].includes(e)||qt[t].push(e)},updateSubscribedSymbols:function(){for(var t in qt)-1===St.indexOf(t)&&St.push(t)},onClick:function(t,e){this.$emit("onChange",t,e)},ParseDurationToString:Ct}},Tt=At,Mt=Object(f["a"])(Tt,vt,wt,!1,null,null,null),Nt=Mt.exports,$t=(n("9129"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"quote-info-container"},[e("Row",{attrs:{"class-name":"quote-items-title"}},[e("Col",{attrs:{span:t.largeSize?12:24}},[e("div",[t._v(t._s(t.quote.ins_name))])]),e("Col",{attrs:{span:t.largeSize?12:24}},[e("div",[t._v(t._s(t.quote.ins_id))])])],1),e("Row",[e("Col",{attrs:{span:t.largeSize?6:12}},[e("div",[t._v("卖一")])]),e("Col",{attrs:{span:t.largeSize?9:12}},[e("div",[t._v(t._s(t.formatter(t.quote.ask_price1)))])]),e("Col",{attrs:{span:t.largeSize?9:"0"}},[t._v(" "+t._s(t.quote.ask_volume1)+" ")])],1),e("div",{staticClass:"outer"},[e("div",{staticClass:"inner",style:{width:100*t.innerWidth+"%"}})]),e("Row",[e("Col",{attrs:{span:t.largeSize?6:12}},[t._v(" 买一 ")]),e("Col",{attrs:{span:t.largeSize?9:12}},[t._v(" "+t._s(t.formatter(t.quote.bid_price1)))]),e("Col",{attrs:{span:t.largeSize?9:"0"}},[t._v(" "+t._s(t.quote.bid_volume1)+" ")])],1),e("Row",{attrs:{"class-name":"quote-items "+(t.largeSize?"large-size":"")}},[e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最新价 ")]),e("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.last_price))+" ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 昨结算 ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.pre_settlement))+" ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 涨跌 ")]),e("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.change))+" ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 今开 ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.quote.open)+" ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 涨跌幅 ")]),e("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t._f("toFixed")(t.quote.change_percent))+"% ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最高 ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.highest))+" ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 总手 ")]),e("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatterVolume(t.quote.volume))+" ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最低 ")]),e("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.lowest))+" ")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 涨停 ")]),e("Col",{staticClass:"R",attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.upper_limit))+" ")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 收盘 ")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.close))+" ")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 跌停 ")]),e("Col",{staticClass:"G",attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.lower_limit))+" ")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 结算 ")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.settlement))+" ")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 持仓量 ")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.quote.open_interest))]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 日增")]),e("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(Number.isNaN(t.quote.open_interest-t.quote.pre_open_interest)?"-":t.quote.open_interest-t.quote.pre_open_interest))])],1)],1)}),zt=[],It={ins_name:"-",ins_id:"-",price_decs:2,last_price:"-",ask_price1:"-",ask_volume1:"-",bid_price1:"-",bid_volume1:"-",pre_settlement:"-",change:"-",change_percent:"-",open:"-",close:"-",highest:"-",volume:"-",lowest:"-",upper_limit:"-",lower_limit:"-",settlement:"-",open_interest:"-",pre_open_interest:"-"},Ot={data:function(){return{quote:Object.assign({},It)}},props:{symbol:String,height:Number,width:Number},watch:{symbol:function(t,e){this.$tqsdk.subscribeQuote(this.symbol);var n=this.$tqsdk.getQuote(this.symbol);Dt(this.quote,n)}},computed:{classOfColor:function(){return this.quote["change"]>0?"R":this.quote["change"]<0?"G":""},innerWidth:function(){return this.quote.bid_volume1/(this.quote.bid_volume1+this.quote.ask_volume1)},largeSize:function(){return this.width>100}},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.getQuote(t.symbol);Dt(t.quote,e)}))},methods:{formatter:function(t){return kt(t,this.quote.price_decs)},formatterVolume:function(t){return"number"!==typeof t?t:t>1e8?(t/1e8).toFixed(1)+"亿":t>1e4?(t/1e4).toFixed(1)+"万":t}}};function Dt(t,e){Object.keys(It).forEach((function(n,a,i){t[n]!==e[n]&&(t[n]=e[n])}))}var Ft=Ot,Et=(n("586c"),Object(f["a"])(Ft,$t,zt,!1,null,null,null)),Ht=Et.exports,Bt=function(){return document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)}}(),Yt=function(){return document.removeEventListener?function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}:function(t,e,n){t&&e&&t.detachEvent("on"+e,n)}}(),Rt={name:"tq-top-view",components:{TqLayoutArea:_,TqChartComponents:yt,ButtonGroupDurations:pt,QuoteInfo:Ht,SubscribedList:Nt},props:{width:Number,height:Number},data:function(){var t=240,e=80;return{onlyMainBoard:!1,rightClosed:!1,rightOpenedWidth:t,rightClosedWidth:e,instrumentId:"",duration:6e10,theme:"light",mainType:"candle"}},computed:{title:function(){return"".concat(this.instrumentId,"  -  ").concat(Ct(this.duration))},chartWidth:function(){var t=this.$root.windowWidth-(this.rightClosed?this.rightClosedWidth:this.rightOpenedWidth);return Math.max(t,400)},rightWidth:function(){return(this.rightClosed?this.rightClosedWidth:this.rightOpenedWidth)-4}},watch:{onlyMainBoard:function(){this.rightClosed=this.onlyMainBoard,this.$emit("onChangeOnlyMainBoard",this.onlyMainBoard),this.$refs.tqChart.setOnlyMainBoard(this.onlyMainBoard)}},methods:{toggleRightClosed:function(){this.rightClosed=!this.rightClosed},onChangeDuration:function(t,e){this.duration=t,this.mainType="分时"===e?"close":"candle"},onChangeSelectedSubscribed:function(t,e){this.instrumentId=t,this.duration=e||6e10,this.mainType="candle"}},created:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){t.subscribed=t.$tqsdk.get_by_path(["subscribed"]),t.subscribed&&t.subscribed[0]&&""===t.instrumentId&&(t.subscribedIndex=0,t.instrumentId=Array.isArray(t.subscribed[0].symbol)?t.subscribed[0].symbol[0]:t.subscribed[0].symbol,t.duration=t.subscribed[0].dur_nano||6e10)}))}},Pt=Rt,Lt=(n("4f2e"),Object(f["a"])(Pt,st,ot,!1,null,null,null)),Gt=Lt.exports,Wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tq-bottom-view"},["backtest"===t.$store.state.mode?[e("tq-layout-area",{attrs:{width:t.width/2,height:t.height}},[e("Tabs",{attrs:{animated:!1}},[e("TabPane",{attrs:{label:"回测指标"}},[e("backtest-info",{attrs:{width:t.width,height:t.height-27}})],1),e("TabPane",{attrs:{label:"成交记录"}},[e("trades-table",{attrs:{width:t.width,height:t.height-27}})],1)],1)],1),e("tq-layout-area",{attrs:{horizontalAlign:"right",width:t.width/2,height:t.height,otherStyle:{borderLeft:"2px solid #E0E0E0"}}},[e("backtest-chart")],1)]:"run"===t.$store.state.mode||"replay"===t.$store.state.mode?[e("tq-layout-area",{attrs:{height:26,width:t.width}},[e("account-info",{attrs:{height:26}})],1),e("tq-layout-area",{attrs:{height:t.height-26,top:26,width:t.width}},[e("Tabs",[e("TabPane",{attrs:{label:"持仓"}},[e("positions-table",{attrs:{width:t.width,height:t.height-53}})],1),e("TabPane",{attrs:{label:"成交记录"}},[e("trades-table",{attrs:{width:t.width,height:t.height-53}})],1),e("TabPane",{attrs:{label:"委托单记录"}},[e("orders-table",{attrs:{width:t.width,height:t.height-53}})],1),e("TabPane",{attrs:{label:"账户详情"}},[e("accounts-table",{attrs:{width:t.width,height:t.height-53}})],1)],1)],1)]:t._e()],2)},Qt=[],Zt=(n("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"reports trades-table",style:{height:t.height+"px"}},[e("table",[e("thead",[e("tr",t._l(t.columns,(function(n){return e("th",{attrs:{width:n.width?n.width+"px":""}},[t._v(t._s(n.name))])})),0)]),e("tbody")])])}),Ut=[],Jt=n("b85c"),Vt=(n("4e82"),{data:function(){var t=this;function e(e,n){var a=t.$tqsdk.getByPath(["quotes",n,"price_decs"]);return kt(e,a||4)}return{tbodyRoot:null,columns:[{name:"投资者",width:"100",key:"account_name"},{name:"成交合约",key:"instrument_id",width:"100",cb:function(t){return t.exchange_id+"."+t.instrument_id}},{name:"方向",key:"direction",width:"60",cb:function(t){return xt(t.direction)}},{name:"开平",key:"offset",width:"60",cb:function(t){return jt(t.offset)}},{name:"成交价格",width:"60",key:"price",cb:function(t){return e(t.price,t.exchange_id+"."+t.instrument_id)}},{name:"手数",width:"60",key:"volume"},{name:"成交时间",key:"trade_date_time",width:"140",cb:function(t){return s()(t.trade_date_time/1e6).format("YYYY-MM-DD HH:mm:ss")}},{name:"报单编号",key:"trade_id",width:"260"}]}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".trades-table table tbody");var t=this,e=function(){var e,n=Object(Jt["a"])(t.$store.state.account_keys);try{var a,i=function(){a=e.value;var n=t.$tqsdk.getByPath(["trade",a,"trades"]);if(!n)return 1;var i=t.$store.state.accounts[a],s=[];for(var o in n)n[o]._epoch===t.$tqsdk.dm._epoch&&(n[o].account_name=i.account_name,s.push(n[o]));s.sort((function(t,e){return t.trade_date_time-e.trade_date_time}));for(var r=function(e){var n=t.append_trade(s[e]);n.onclick=function(a){var i=t.tbodyNode.querySelectorAll("tr");i.forEach((function(t){return t.className=""})),n.className="selected",t.$eventHub.$emit("moveChartToDt",s[e].trade_date_time)}},d=0;d<s.length;d++)r(d)};for(n.s();!(e=n.n()).done;)i()}catch(s){n.e(s)}finally{n.f()}};e(),this.$tqsdk.on("rtn_data",e)},methods:{append_trade:function(t){var e=document.createElement("tr");for(var n in this.columns){var a=this.columns[n],i=this.get_td_text(a.cb?a.cb(t):t[a.key],a.key);e.appendChild(i)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},get_td_text:function(t){var e=document.createElement("td");return e.textContent=t,e}}}),Xt=Vt,Kt=Object(f["a"])(Xt,Zt,Ut,!1,null,null,null),te=Kt.exports,ee=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reports orders-table",style:{height:t.height+"px"}},[e("table",[e("thead",[e("tr",[t._l(t.columns,(function(n){return e("th",{attrs:{width:n.width?n.width+"px":""}},[t._v(t._s(n.name))])})),t._l(t.columnsAppend,(function(n){return e("th",{attrs:{width:n.width?n.width+"px":""}},[t._v(t._s(n.name))])}))],2)]),e("tbody")])])},ne=[],ae={data:function(){return{tbodyRoot:null,columns:[{name:"投资者",width:"100",key:"account_name"},{name:"成交合约",width:"100",key:"instrument_id",cb:function(t){return t.exchange_id+"."+t.instrument_id}},{name:"方向",width:"60",key:"direction",cb:function(t){return xt(t.direction)}},{name:"开平",width:"60",key:"offset",cb:function(t){return jt(t.offset)}},{name:"报单价格",width:"60",key:"limit_price"},{name:"总手数",width:"60",key:"volume_orign"},{name:"报单时间",width:"140",key:"insert_date_time",cb:function(t){return s()(t.insert_date_time/1e6).format("YYYY-MM-DD HH:mm:ss")}}],columnsAppend:[{name:"未成交手数",key:"volume_left",width:"80",cb:function(t){return t.volume_left}},{name:"冻结保证金",width:"80",key:"frozen_margin"},{name:"状态",width:"60",key:"status",cb:function(t){return"FINISHED"===t.status?"已完成":"未完成"}},{name:"提示信息",key:"last_msg",width:"160"}],ordersTr:{}}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".orders-table table tbody");var t=this;this.$tqsdk.on("rtn_data",(function(){var e,n=Object(Jt["a"])(t.$store.state.account_keys);try{var a,i=function(){a=e.value;var n=t.$tqsdk.getByPath(["trade",a,"orders"]);if(!n)return 1;var i=t.$store.state.accounts[a],s=function(e){if(n[e].account_name=i.account_name,t.ordersTr[a+e])t.update_order(n[e],t.ordersTr[a+e]);else{var s=t.append_order(n[e]);s.onclick=function(a){var i=t.tbodyNode.querySelectorAll("tr");i.forEach((function(t){return t.className=""})),s.className="selected",t.$eventHub.$emit("moveChartToDt",n[e].insert_date_time)},t.ordersTr[a+e]=s}};for(var o in n)s(o)};for(n.s();!(e=n.n()).done;)i()}catch(s){n.e(s)}finally{n.f()}}))},methods:{append_order:function(t){var e=document.createElement("tr");for(var n in this.columns){var a=this.columns[n],i=this.get_td_text(a.cb?a.cb(t):t[a.key],a.key);e.appendChild(i)}for(var s in this.columnsAppend){var o=this.columnsAppend[s],r=this.get_td_text(o.cb?o.cb(t):t[o.key],o.key);e.appendChild(r)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},update_order:function(t,e){for(var n in this.columnsAppend){var a=this.columns[n],i=e.querySelector("."+a.key),s=a.cb?a.cb(t):t[a.key];s!==i.textContent&&this.update_td_text(s,i)}},get_td_text:function(t,e){var n=document.createElement("td");return n.className=e,n.textContent=t,n},update_td_text:function(t,e){e.textContent=t}}},ie=ae,se=Object(f["a"])(ie,ee,ne,!1,null,null,null),oe=se.exports,re=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reports positions-table",style:{height:t.height+"px"}},[e("table",[e("thead",[e("tr",[t._l(t.columns,(function(n){return e("th",{attrs:{width:n.width?n.width+"px":""}},[t._v(t._s(n.name))])})),t._l(t.columnsAppend,(function(n){return e("th",{attrs:{width:n.width?n.width+"px":""}},[t._v(t._s(n.name))])}))],2)]),e("tbody")])])},de=[],ce={data:function(){return{tbodyRoot:null,columns:[{name:"投资者",width:"100",key:"account_name"},{name:"持仓合约",width:"100",key:"instrument_id",cb:function(t){return t.exchange_id+"."+t.instrument_id}}],columnsAppend:[{name:"多仓",key:"volume_long",width:"60"},{name:"多头开仓均价",width:"80",key:"open_price_long",cb:function(t){return kt(t.open_price_long)}},{name:"多头浮动盈亏",width:"80",key:"position_profit_long",cb:function(t){return kt(t.position_profit_long)}},{name:"多头占用保证金",width:"80",key:"margin_long",cb:function(t){return kt(t.margin_long)}},{name:"空仓",key:"volume_short",width:"60"},{name:"空头开仓均价",width:"80",key:"open_price_short",cb:function(t){return kt(t.open_price_short)}},{name:"空头浮动盈亏",width:"80",key:"position_profit_short",cb:function(t){return kt(t.position_profit_short)}},{name:"空头占用保证金",width:"80",key:"margin_short",cb:function(t){return kt(t.margin_short)}}],ordersTr:{}}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".positions-table table tbody");var t=this;this.$tqsdk.on("rtn_data",(function(){var e,n=Object(Jt["a"])(t.$store.state.account_keys);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=t.$tqsdk.getByPath(["trade",a,"positions"]);if(i){var s=t.$store.state.accounts[a];for(var o in i)i[o].account_name=s.account_name,"FUTURE"!==s.account_type&&(i[o].volume_long=i[o].volume,i[o].open_price_long=i[o].cost/i[o].volume,i[o].position_profit_long=i[o].float_profit_today),t.ordersTr[a+o]?t.update_position(i[o],t.ordersTr[a+o]):t.ordersTr[a+o]=t.append_position(i[o])}}}catch(r){n.e(r)}finally{n.f()}}))},methods:{append_position:function(t){var e=document.createElement("tr");for(var n in this.columns){var a=this.columns[n],i=this.get_td_text(a.cb?a.cb(t):t[a.key],a.key);e.appendChild(i)}for(var s in this.columnsAppend){var o=this.columnsAppend[s],r=this.get_td_text(o.cb?o.cb(t):t[o.key],o.key);e.appendChild(r)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},update_position:function(t,e){for(var n in this.columnsAppend){var a=this.columnsAppend[n],i=e.querySelector("."+a.key),s=a.cb?a.cb(t):t[a.key];s!==i.textContent&&this.update_td_text(s,i)}},get_td_text:function(t,e){var n=document.createElement("td");return n.className=e,n.textContent=t,n},update_td_text:function(t,e){e.textContent=t}}},ue=ce,he=Object(f["a"])(ue,re,de,!1,null,null,null),le=he.exports,pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reports accounts-table",style:{height:t.height+"px"}},[e("table",[e("thead",[e("tr",[t._l(t.columns,(function(n){return e("th",{attrs:{width:n.width?n.width+"px":""}},[t._v(t._s(n.name))])})),t._l(t.columnsAppend,(function(n){return e("th",{attrs:{width:n.width?n.width+"px":""}},[t._v(t._s(n.name))])}))],2)]),e("tbody")])])},fe=[],me={data:function(){return{tbodyRoot:null,columns:[{name:"投资者",width:"100",key:"account_name"},{name:"动态权益",width:"100",key:"balance",cb:function(t){return void 0==t.balance?kt(t.asset):kt(t.balance)}}],columnsAppend:[{name:"浮动盈亏",key:"float_profit",width:"100",cb:function(t){return void 0==t.float_profit?kt(t.hold_profit):kt(t.float_profit)}},{name:"手续费",width:"80",key:"commission",cb:function(t){return void 0==t.commission?kt(t.buy_fee_today+t.sell_fee_today):kt(t.commission)}},{name:"保证金占用",width:"80",key:"margin",cb:function(t){return kt(t.margin)}}],ordersTr:{}}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".accounts-table table tbody");var t=this;this.$tqsdk.on("rtn_data",(function(){var e,n=Object(Jt["a"])(t.$store.state.account_keys);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=t.$store.state.accounts[a],s=t.$tqsdk.getByPath(["trade",a,"accounts","CNY"]);s&&(s.account_name=i.account_name,t.ordersTr[a]?t.update_position(s,t.ordersTr[a]):t.ordersTr[a]=t.append_position(s))}}catch(o){n.e(o)}finally{n.f()}}))},methods:{append_position:function(t){var e=document.createElement("tr");for(var n in this.columns){var a=this.columns[n],i=this.get_td_text(a.cb?a.cb(t):t[a.key],a.key);e.appendChild(i)}for(var s in this.columnsAppend){var o=this.columnsAppend[s],r=this.get_td_text(o.cb?o.cb(t):t[o.key],o.key);e.appendChild(r)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},update_position:function(t,e){for(var n in this.columnsAppend){var a=this.columnsAppend[n],i=e.querySelector("."+a.key),s=a.cb?a.cb(t):t[a.key];s!==i.textContent&&this.update_td_text(s,i)}},get_td_text:function(t,e){var n=document.createElement("td");return n.className=e,n.textContent=t,n},update_td_text:function(t,e){e.textContent=t}}},_e=me,be=Object(f["a"])(_e,pe,fe,!1,null,null,null),ge=be.exports,ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"account-info",style:{height:t.height+"px"}},[e("div",[t._v(" 账户权益: "+t._s(t._f("toFixed")(t.balance))+" ")]),e("div",[t._v(" 浮动盈亏: "+t._s(t._f("toFixed")(t.float_profit))+" ")]),e("div",[t._v(" 保证金占用: "+t._s(t._f("toFixed")(t.margin))+" ")]),e("div",[t._v(" 日内手续费: "+t._s(t._f("toFixed")(t.commission))+" ")]),e("div",[t._v(" 可用资金: "+t._s(t._f("toFixed")(t.available))+" ")])])},ve=[],we=(n("130f"),{data:function(){return{available:"-",balance:"-",commission:"-",float_profit:"-",margin:"-"}},props:{height:Number},mounted:function(){setImmediate(this.update.bind(this)),this.$tqsdk.on("rtn_data",this.update)},methods:{update:function(){var t,e={available:0,balance:0,commission:0,float_profit:0,margin:0},n=Object(Jt["a"])(this.$store.state.account_keys);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=this.$tqsdk.getByPath(["trade",a,"accounts","CNY"]);e.available+=i.available,e.balance+=void 0==i.balance?i.asset:i.balance,e.commission+=void 0==i.commission?i.buy_fee_today+i.sell_fee_today:i.commission,e.float_profit+=void 0==i.float_profit?i.hold_profit:i.float_profit,e.margin+=void 0==i.margin?0:i.margin}}catch(s){n.e(s)}finally{n.f()}Object.assign(this,e)}}}),ke=we,xe=(n("8c24"),Object(f["a"])(ke,ye,ve,!1,null,null,null)),je=xe.exports,Ce=function(){var t=this,e=t._self._c;return e("div",{staticClass:"backtest-info",style:{height:t.height+"px"}},[e("Row",["-"===t.init_balance?e("Col",{attrs:{span:24,"class-name":"spin-container"}},[e("Spin",{attrs:{fix:""}},[e("div",{staticClass:"loader"},[e("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[e("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"6","stroke-miterlimit":"10"}})])]),t._v(" 回测进行中 ")])],1):t._e(),""!==t.report_id?e("Col",{attrs:{span:24}},[e("router-link",{attrs:{to:"/report/"+t.report_id,custom:""},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.href;n.route,n.navigate,n.isActive,n.isExactActive;return[e("a",{attrs:{href:a,target:"_blank"}},[t._v("查看完整回测报告 "+t._s(t.report_id))])]}}],null,!1,1592558734)})],1):t._e(),e("Col",{attrs:{span:6}},[t._v("起始资金")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.init_balance,2)))]),e("Col",{attrs:{span:6}},[t._v("总收益")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.balance-t.init_balance,2)))]),e("Col",{attrs:{span:6}},[t._v("结束资金")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.balance,2)))]),e("Col",{attrs:{span:6}},[t._v("总收益率")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.ror,2))+"%")]),e("Col",{attrs:{span:6}},[t._v("最大回撤")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.max_drawdown,2))+"%")]),e("Col",{attrs:{span:6}},[t._v("年化收益率")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.annual_yield,2))+"%")]),e("Col",{attrs:{span:6}},[t._v("总手续费")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.commission,2)))]),e("Col",{attrs:{span:6}},[t._v("年化夏普率")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.sharpe_ratio,2)))]),e("Col",{attrs:{span:6}},[t._v("胜率")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.winning_rate,2))+"%")]),e("Col",{attrs:{span:6}},[t._v("盈亏额比")]),e("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.profit_loss_ratio,2)))]),e("Col",{style:{color:"#bd0000"},attrs:{span:12}},[t._v("天勤量化："+t._s(t.tqsdk_punchline))])],1)],1)},Se=[],qe={data:function(){return{account_key:"",init_balance:"-",balance:"-",ror:"-",annual_yield:"-",max_drawdown:"-",sharpe_ratio:"-",commission:"-",winning_rate:"-",profit_loss_ratio:"-",report_id:"",tqsdk_punchline:""}},props:{height:Number,width:Number},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e,n=Object(Jt["a"])(t.$store.state.account_keys);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=t.$store.state.accounts[a];""===t.account_key&&"FUTURE"===i.account_type&&(t.account_key=a);var s=t.$tqsdk.getByPath(["draw_report_datas"]);s&&""==t.report_id&&(t.report_id=Object.keys(s)[0]);var o=t.$tqsdk.getByPath(["trade",t.account_key,"accounts","CNY"]);return void(o&&o._tqsdk_stat&&(t.init_balance=o._tqsdk_stat.init_balance,t.balance=o._tqsdk_stat.balance,t.max_drawdown=o._tqsdk_stat.max_drawdown,t.annual_yield=o._tqsdk_stat.annual_yield,t.ror=o._tqsdk_stat.ror,t.sharpe_ratio=o._tqsdk_stat.sharpe_ratio,t.winning_rate=o._tqsdk_stat.winning_rate,t.profit_loss_ratio=o._tqsdk_stat.profit_loss_ratio,t.commission=o._tqsdk_stat.commission,t.tqsdk_punchline=o._tqsdk_stat.tqsdk_punchline))}}catch(r){n.e(r)}finally{n.f()}}))}},Ae=qe,Te=(n("cce0"),Object(f["a"])(Ae,Ce,Se,!1,null,null,null)),Me=Te.exports,Ne=function(){var t=this,e=t._self._c;return e("div",{staticClass:"backtest-report"},[e("e-chart",{ref:"echart",attrs:{height:"200px",width:t.width+"px","path-option":t.defaultOption}})],1)},$e=[],ze=(n("25eb"),n("a6fb")),Ie=n.n(ze),Oe=n("313e");(function(){var t=function(t,e,n){n=n||window;var a=!1,i=function(){a||(a=!0,requestAnimationFrame((function(){n.dispatchEvent(new CustomEvent(e)),a=!1})))};n.addEventListener(t,i)};t("resize","optimizedResize")})();var De={name:"v-echart",render:function(t){var e={staticClass:"v-chart",style:this.canvasStyle,ref:"canvas",on:this.$listeners};return t("div",e)},props:{width:{type:String,default:"auto"},height:{type:String,default:"400px"},pathOption:[Object,Array],widthChangeDelay:{type:Number,default:450}},data:function(){return{chartInstance:null,_defaultOption:{animation:!1,tooltip:{show:!0},title:{show:!0,textStyle:{fontSize:"16px",color:"rgba(0, 0, 0 , .87)",fontFamily:"sans-serif"}},grid:{containLabel:!0},xAxis:{show:!0,type:"category",axisLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{show:!0,color:"rgba(0, 0, 0 , .24)"}},axisLabel:{show:!1},splitLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}}},yAxis:{show:!0,type:"value",axisLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisLabel:{show:!1,color:"rgba(0, 0, 0 , .24)"},splitLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisTick:{show:!0,lineStyle:{show:!0,color:"rgba(0, 0, 0 , .54)"}}},series:[{type:"line"}]}}},computed:{canvasStyle:function(){return{width:this.width,height:this.height}}},methods:{init:function(){var t=this;this.pathOption&&this.pathOption.forEach((function(e){Ie.a.set(t.$data._defaultOption,e[0],e[1])})),this.chartInstance=Oe["a"](this.$refs.canvas),this.chartInstance.setOption(this.$data._defaultOption),window.addEventListener("optimizedResize",(function(e){setTimeout((function(e){t.chartInstance.resize()}),t.widthChangeDelay)}))},showLoadPercent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&t<100?(t=Math.max(t,0),this.chartInstance.showLoading("default",{text:"数据已加载 "+t+"%",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0})):this.chartInstance.hideLoading()},update:function(t){this.chartInstance.setOption(t)},resize:function(){this.chartInstance.resize()},clean:function(){window.removeEventListener("resize",this.chartInstance.resize),this.chartInstance.clear()}},mounted:function(){this.init()},beforeDestroy:function(){this.clean()}},Fe={components:{EChart:De},data:function(){return{daily_yield:[],defaultOption:[["grid.top","16px"],["grid.left","10px"],["grid.bottom","0px"],["grid.right","16px"],["series[0]",{type:"line",encode:{x:"datetime",y:["balance"]},smooth:!1,showAllSymbol:!0,areaStyle:{}}],["yAxis.show",!0],["yAxis.type","value"],["yAxis.max","dataMax"],["yAxis.min","dataMin"],["yAxis.axisLabel",{show:!0,formatter:function(t,e){return t.toFixed(2)},color:"#333333"}],["yAxis.splitLine",{show:!0}],["xAxis.show",!0],["xAxis.type","time"],["xAxis.axisLabel",{show:!0,color:"#333333"}],["xAxis.splitLine",{show:!0}],["xAxis.boundaryGap",!1],["tooltip",{trigger:"axis",triggerOn:"mousemove|click"}]]}},props:{height:Number,width:Number},methods:{},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.get_by_path(["snapshots"]),n=[];for(var a in e)a>t.$store.state.end_dt||n.push([Number.parseInt(a/1e6),e[a].accounts.CNY.balance]);t.$refs.echart.update({dataset:{source:n}})}))}},Ee=Fe,He=(n("e1b0"),Object(f["a"])(Ee,Ne,$e,!1,null,null,null)),Be=He.exports,Ye={name:"tq-bottom-view",components:{TqLayoutArea:_,TradesTable:te,OrdersTable:oe,PositionsTable:le,AccountsTable:ge,AccountInfo:je,BacktestInfo:Me,BacktestChart:Be},props:{height:Number,width:Number},data:function(){return{}},methods:{},created:function(){}},Re=Ye,Pe=(n("fa2e"),Object(f["a"])(Re,Wt,Qt,!1,null,null,null)),Le=Pe.exports,Ge=38,We=4,Qe=38,Ze={name:"tq-home",components:{TqTopView:Gt,TqBottomView:Le},data:function(){var t=Math.max(260,Math.round(.68*this.$root.windowHeight)),e=Ge+t+1;return{isMoving:!1,headerHeight:Ge,topHeight:t,topHeightMin:260,bottomYOffset:e,bottomYOffsetMin:2*Ge,bottomYOffsetMax:this.$root.windowHeight-Qe,bottomHeight:this.$root.windowHeight-e,showBottomShadow:!1}},methods:{onResize:function(){this.bottomYOffsetMax=this.$root.windowHeight-Qe,this.computeLayouts()},handleMousedown:function(t){this.isMoving=!0,Bt(document,"mousemove",this.handleMove),Bt(document,"mouseup",this.handleUp)},handleMove:function(t){var e=t.pageY;e>=this.bottomYOffsetMax||e<=this.bottomYOffsetMin||(this.bottomYOffset=e,this.computeLayouts())},handleUp:function(){this.isMoving=!1,Yt(document,"mousemove",this.handleMove),Yt(document,"mouseup",this.handleUp)},computeLayouts:function(){var t=this.$root.windowHeight-this.bottomYOffset;t<=Qe&&(t=Qe,this.bottomYOffset=this.$root.windowHeight-t),this.showBottomShadow=this.bottomYOffset<this.topHeightMin+Ge,this.bottomHeight=t-We;var e=this.$root.windowHeight-Ge-t;this.topHeight=Math.max(e,this.topHeightMin)},onChangeOnlyMainBoard:function(t){var e=t?Qe:this.lastBottomHeight;this.lastBottomHeight=this.bottomHeight+We,this.bottomYOffset=this.$root.windowHeight-e,this.showBottomShadow=this.bottomYOffset<this.topHeightMin+Ge,this.bottomHeight=e-We;var n=this.$root.windowHeight-Ge-e;this.topHeight=Math.max(n,this.topHeightMin)}},created:function(){this.$eventHub.$on("window_resize",this.onResize),this.computeLayouts()}},Ue=Ze,Je=Object(f["a"])(Ue,at,it,!1,null,null,null),Ve=Je.exports,Xe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-area tq-report"},[e("div",{staticClass:"layout-area top-container",staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[e("div",{staticStyle:{"background-color":"#FFFFFF",width:"30%",display:"flex","justify-content":"center"}},[e("tq-report-metrics",{attrs:{metries:t.metrics_json}})],1),e("div",{staticStyle:{"background-color":"#FFFFFF",width:"70%",display:"flex","justify-content":"center","flex-flow":"column nowrap"}},[e("div",{staticClass:"charts-container",style:t.computedHeight},[e("e-chart",{ref:"daily_balance",attrs:{height:"300px",width:"600px","path-option":t.charts_options.daily_balance}}),e("e-chart",{ref:"daily_profit",attrs:{height:"300px",width:"600px","path-option":t.charts_options.daily_profit}}),e("e-chart",{ref:"drawdown",attrs:{height:"300px",width:"600px","path-option":t.charts_options.drawdown}}),e("e-chart",{ref:"sharp_rolling",attrs:{height:"300px",width:"600px","path-option":t.charts_options.sharp_rolling}}),e("e-chart",{ref:"sortino_rolling",attrs:{height:"300px",width:"600px","path-option":t.charts_options.sortino_rolling}})],1)])])])},Ke=[],tn=38,en={name:"tq-report",components:{EChart:De},data:function(){var t=[["grid.top","36px"],["grid.left","20px"],["grid.bottom","20px"],["grid.right","24px"],["xAxis.type","category"],["xAxis.show",!0],["xAxis.axisLabel",{show:!0,color:"#333333"}],["xAxis.boundaryGap",!0],["yAxis.type","value"],["yAxis.axisLabel",{show:!0,color:"#333333",showMinLabel:!1,showMaxLabel:!1}]];return{report_id:this.$route.params.report_id,metrics_json:"{}",charts_options:{daily_balance:t,daily_profit:t,drawdown:t,sharp_rolling:t,sortino_rolling:t,calmar_rolling:t}}},computed:{computedHeight:function(){return{height:this.$root.windowHeight-tn+"px"}}},methods:{},created:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.getByPath(["draw_report_datas"]);if(e[t.report_id]){var n=e[t.report_id];if(n&&n.metrics&&(t.metrics_json=JSON.stringify(n.metrics)),n&&n.charts)for(var a in n.charts)if(t.$refs[a]){var i=n.charts[a].series,s=[];for(var o in i)s[o]=i[o];n.charts[a].series=s,t.$refs[a].update(n.charts[a])}}}))}},nn=en,an=(n("f584"),Object(f["a"])(nn,Xe,Ke,!1,null,null,null)),sn=an.exports;n("432f");a["a"].use(z["a"]),a["a"].config.productionTip=!1,a["a"].$eventHub=new a["a"],a["a"].prototype.$eventHub=a["a"].$eventHub;var on={name:"tianqin-web",windowHeight:window.innerHeight,windowWidth:window.innerWidth};a["a"].$tqsdk=new $["a"]({autoInit:!1}),a["a"].prototype.$tqsdk=a["a"].$tqsdk;var rn=new z["a"]({routes:[{path:"/",component:Ve},{path:"/report/:report_id",component:sn}]}),dn=new a["a"]({data:on,router:rn,store:D,render:function(t){return t(N)},methods:{handlerResize:function(){on.windowHeight=window.innerHeight,on.windowWidth=window.innerWidth,this.$eventHub.$emit("window_resize",{width:on.windowWidth,height:on.windowHeight})}},created:function(){var t;function e(){t||(t=setTimeout((function(){t=null,dn.handlerResize()}),200))}window.addEventListener("resize",e,!1)},errorCaptured:function(t,e,n){return!1},destroyed:function(){}}).$mount("#app");GetTqsdkUrl().then((function(t){var e=t["ins_url"],n="wss://api.shinnytech.com/t/nfmd/front/mobile";if("https://openmd.shinnytech.com/t/md/symbols/latest.json"===e){var i=s()().format("YYYY-MM-DD HH:mm:ss.SSSSSS");e="https://openmd.shinnytech.com/t/md/symbols/".concat(i,".json")}if(t["replay_dt"]){var o=e.indexOf("/symbol");D.state.ctrl_url=e.substring(0,o);var r=s()(t["replay_dt"]/1e6).format("YYYY-MM-DD HH:mm:ss");r+=(Math.random()+"").substring(2,8),e="https://openmd.shinnytech.com/t/md/symbols/".concat(r,".json"),n=t["md_url"]}a["a"].$tqsdk._insUrl=e,a["a"].$tqsdk._mdUrl=n,a["a"].$tqsdk.initMdWebsocket();var d=a["a"].$tqsdk.addWebSocket("ws://".concat(TqsdkAddress,"/ws"));d.on("close",(function(){D.commit("set_py_file_status",!1)})),d.on("open",(function(){D.commit("set_py_file_status",!0)})),a["a"].$tqsdk.on("rtn_data",(function(){var t=a["a"].$tqsdk.get_by_path(["_tqsdk_backtest"]);t&&t.current_dt&&(D.state.start_dt=t.start_dt,D.state.end_dt=t.end_dt,D.state.current_dt=t.current_dt);var e=a["a"].$tqsdk.get_by_path(["_tqsdk_replay"]);e&&e.replay_dt&&(D.state.replay_dt=e.replay_dt);var n=a["a"].$tqsdk.get_by_path(["action"]);""===D.state.mode&&n&&D.commit("set_action",n)}))}))},"586c":function(t,e,n){"use strict";n("d0f1")},"61d6":function(t,e,n){},8833:function(t,e,n){"use strict";n("0614")},"8c24":function(t,e,n){"use strict";n("1db5")},9292:function(t,e,n){},9379:function(t,e,n){"use strict";n("cd72")},a854:function(t,e,n){"use strict";n("304a")},adb8:function(t,e,n){},bd4b:function(t,e,n){},cce0:function(t,e,n){"use strict";n("3838")},cd72:function(t,e,n){},cf05:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFIGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDEtMTVUMjE6NDM6NTYrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTAxLTE1VDIxOjQ3OjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTAxLTE1VDIxOjQ3OjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjkyMjI0MGQ4LTkw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"},d0f1:function(t,e,n){},d59a:function(t,e,n){},d9ec:function(t,e,n){"use strict";n("9292")},e1b0:function(t,e,n){"use strict";n("fc8a")},f584:function(t,e,n){"use strict";n("adb8")},fa2e:function(t,e,n){"use strict";n("61d6")},fc8a:function(t,e,n){}});