(function(t){function e(e){for(var r,s,o=e[0],h=e[1],c=e[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(t[r]=h[r]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],r=!0,o=1;o<i.length;o++){var h=i[o];0!==n[h]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},n={app:0},a=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=h;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0bf9":function(t,e,i){"use strict";var r=i("d4f6"),n=i.n(r);n.a},"0f78":function(t,e,i){},4678:function(t,e,i){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=a(t);return i(e)}function a(t){if(!i.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=a,t.exports=n,n.id="4678"},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},a=[],s=(i("5c0b"),i("2877")),o={},h=Object(s["a"])(o,n,a,!1,null,null,null),c=h.exports,l=i("01a2"),u=i.n(l),d=i("e79d"),f=i("90b2"),m=i("c5c1"),p=i("dcbf"),y=i("e3f5"),g=i("5250"),v=i("8679"),b=i("fe66"),_=i("6252"),w=i("9259"),k=i("aa30"),x=i("e0b9");i("f8ce");r["a"].prototype.$Loading=x["a"],r["a"].prototype.$Message=k["a"],r["a"].prototype.$Modal=w["a"],r["a"].prototype.$Notice=_["a"],r["a"].prototype.$Spin=b["a"],r["a"].component("Layout",v["a"]),r["a"].component("Icon",g["a"]),r["a"].component("Button",y["a"]),r["a"].component("ButtonGroup",p["a"]),r["a"].component("Dropdown",m["a"]),r["a"].component("DropdownMenu",f["a"]),r["a"].component("DropdownItem",d["a"]);var S=i("8c4f"),M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-home"},[i("div",{staticClass:"layout-area layout-area-center",style:{width:t.centerAreaWidth+"px",left:"0px"}},[i("tq-center-view",{attrs:{width:t.centerAreaWidth}})],1)])},O=[],j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tq-left-view"},[r("tq-layout-area",{attrs:{width:t.width,height:t.width,otherStyle:{backgroundColor:"#FEFEFE",borderBottom:"1px solid #E0E0E0"}}},[r("img",{staticClass:"logo",style:{padding:"4px",width:this.width+"px",height:this.width+"px"},attrs:{alt:"Tianqin",src:i("cf05")}})]),r("tq-layout-area",{attrs:{width:t.width,top:t.width,height:t.bottomHeight,otherStyle:{backgroundColor:"#FEFEFE"}}},[r("buttons-tool-bar",{ref:"toolsBar",attrs:{size:t.width,toolsList:t.toolsList},on:{"on-click-tool":t.onClickTool}})],1)],1)},D=[],P=(i("a9e3"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-layout-absolute",style:t.computedStyle},[t._t("default")],2)}),T=[],Y={name:"tq-layout-absolute",data:function(){return{}},props:{horizontalAlign:{type:String,default:"left"},verticalAlign:{type:String,default:"top"},top:{type:Number,default:0},left:{type:Number,default:0},bottom:{type:Number,default:0},right:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},otherStyle:{type:Object,default:function(){}}},computed:{computedStyle:function(){var t={width:this.width+"px",height:this.height+"px"};return t[this.horizontalAlign]=this[this.horizontalAlign]+"px",t[this.verticalAlign]=this[this.verticalAlign]+"px",Object.assign(t,this.otherStyle)}}},I=Y,A=(i("b9e2"),Object(s["a"])(I,P,T,!1,null,null,null)),C=A.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"toolBarContainer",staticClass:"tq-buttons-tool-bar-container",on:{mouseleave:t.onMouseleave,mouseenter:t.onMouseenter,scroll:t.onscroll}},[i("div",{staticClass:"tq-buttons-tool-bar"},[i("transition",{attrs:{name:"slide-top"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showTopScrollHelper,expression:"showTopScrollHelper"}],staticClass:"scroll-helper top-scroll-helper",style:{height:t.iconSize-4+"px",padding:"0px "+(t.innerIconPadding+t.outterIconPadding+2)+"px"},on:{click:function(e){return t.scrollTo("top")}}},[i("Icon",{attrs:{type:"ios-arrow-up",size:t.iconSize-4}})],1)]),i("transition",{attrs:{name:"slide-bottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showBottomScrollHelper,expression:"showBottomScrollHelper"}],staticClass:"scroll-helper bottom-scroll-helper",style:{height:t.iconSize-4+"px",padding:"0px "+(t.innerIconPadding+t.outterIconPadding+2)+"px"},on:{click:function(e){return t.scrollTo("bottom")}}},[i("Icon",{attrs:{type:"ios-arrow-down",size:t.iconSize-4}})],1)]),t._l(t.toolsListByGroup,(function(e){return[t._l(e,(function(e){return i("div",{key:e.id,staticClass:"button-tool",class:{selected:e.id===t.selectedId},style:{width:t.size+"px",height:t.size+"px",padding:t.outterIconPadding+"px"}},[i("div",{staticClass:"button-icon-container",style:{padding:t.innerIconPadding+"px"},on:{click:function(i){return t.clickHandler(e.id)}}},[i("Icon",{style:t.getIconStyle(e),attrs:{type:e.icon,size:t.iconSize}})],1)])})),i("div",{staticClass:"divider"})]}))],2)])},H=[],q=(i("caad"),i("c975"),{name:"tq-layout-absolute",data:function(){return{selectedId:"",outterIconPadding:6,innerIconPadding:3,showTopScrollHelper:!1,showBottomScrollHelper:!1}},props:{toolsList:{type:Array,default:[]},size:{type:Number,default:34},selectedColor:{type:String,default:"cornflowerblue"},selectedWeight:{type:String,default:"normal"}},computed:{iconSize:function(){return this.size-2*this.outterIconPadding-2*this.innerIconPadding},toolsListByGroup:function(){for(var t=[],e=[],i=0;i<this.toolsList.length;i++){var r=this.toolsList[i],n=t.indexOf(r.group);-1===n&&(t.push(r.group),e.push([]),n=t.length-1),e[n].push(r)}return e}},methods:{getIconStyle:function(t){if(t.id===this.selectedId)return{color:this.selectedColor,fontWeight:this.selectedWeight}},onscroll:function(t){0===t.target.scrollTop?this.showTopScrollHelper=!1:this.showTopScrollHelper=!0,t.target.clientHeight+t.target.scrollTop===t.target.scrollHeight?this.showBottomScrollHelper=!1:this.showBottomScrollHelper=!0},scrollAnimation:function(t,e,i,r){var n=16,a=Math.abs(i-e),s=(i-e)/a,o=6*s,h=setInterval((function(){e+=o,e=e*s>i?i:e,t.scroll(0,e),e===i&&clearInterval(h)}),n)},scrollTo:function(t){if(["top","bottom"].includes(t)){var e=this.$refs.toolBarContainer,i=e.scrollTop,r="top"===t?0:e.scrollHeight-e.clientHeight;this.scrollAnimation(e,i,r,500)}},onMouseleave:function(){this.showTopScrollHelper=!1,this.showBottomScrollHelper=!1},onMouseenter:function(){this.onscroll({target:this.$refs.toolBarContainer})},clickHandler:function(t){this.selectedId=t,this.$emit("on-click-tool",this.selectedId)},clear:function(){this.selectedId=""}}}),W=q,G=(i("c8b7"),Object(s["a"])(W,N,H,!1,null,null,null)),L=G.exports,E={name:"tq-left-view",components:{TqLayoutArea:C,ButtonsToolBar:L},props:{width:Number},data:function(){return{bottomHeight:this.$root.windowHeight-this.width,toolsList:[{id:"quotesList",type:"icon",group:"a",icon:"md-arrow-round-up"},{id:"quoteInfo",type:"icon",group:"a",icon:"md-add"},{id:"theme",type:"icon",group:"b",icon:"md-contrast"}]}},methods:{computeLayouts:function(){this.bottomHeight=this.$root.windowHeight-this.width},onClickTool:function(t){"theme"===t&&this.$eventHub.$emit("changeTheme")}},created:function(){this.$eventHub.$on("window_resize",this.computeLayouts)}},R=E,F=Object(s["a"])(R,j,D,!1,null,null,null),z=F.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tq-center-view"},[r("tq-layout-area",{attrs:{width:t.width,height:t.topHeight,otherStyle:{backgroundColor:"#FEFEFE"}}},[r("tq-layout-area",{attrs:{width:t.topHeight,height:t.topHeight}},[r("img",{staticClass:"logo",style:{padding:"4px",width:t.topHeight+"px",height:t.topHeight+"px"},attrs:{alt:"Tianqin",src:i("cf05")}})]),r("tq-layout-area",{style:{paddingTop:"6px"},attrs:{width:300,height:t.topHeight,left:t.topHeight}},[r("tq-chart-tool",{on:{"on-change-duration":t.onChangeDuration}})],1),r("tq-layout-area",{style:{paddingTop:"6px"},attrs:{width:120,height:t.topHeight,left:t.topHeight+300}},[r("ButtonGroup",{attrs:{size:"small",shape:"circle"}},[r("Button",{on:{click:function(e){return t.switchSymbol("pre")}}},[r("Icon",{attrs:{type:"ios-arrow-back"}}),t._v(" pre ")],1),r("Button",{on:{click:function(e){return t.switchSymbol("next")}}},[t._v(" next "),r("Icon",{attrs:{type:"ios-arrow-forward"}})],1)],1)],1)],1),r("tq-layout-area",{attrs:{top:t.topHeight,width:t.width,height:t.centerHeight,otherStyle:{backgroundColor:"#FEFEFE"}}},[r("tq-chart-components",{attrs:{instrumentId:t.instrumentId,duration:t.duration,height:t.centerHeight,width:t.width,theme:t.theme}})],1),r("tq-layout-area",{attrs:{verticalAlign:"bottom",width:t.width,height:t.bottomHeight,otherStyle:{backgroundColor:"#FEFEFE",boxShadow:t.showBottomShadow?"0px -3px 4px -1px #AFAFAF":""}}},[r("div",{staticClass:"bottom-area-handle",on:{mousedown:t.handleMousedown}}),r("logs")],1)],1)},U=[],V=(i("b64b"),i("ac1f"),i("466d"),i("e587")),B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-chart-tool"},[i("tq-radio-group",{attrs:{options:t.optionsDur},on:{changeSelectId:t.changeSelectId}})],1)},Z=[],K=(i("8a79"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-radio-group"},[t._l(t.baseRadioList,(function(e){return i("Button",{key:e.id,attrs:{size:"small",type:t.selectedId===e.id?"primary":"text"},on:{click:function(i){return t.clickBtn(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),t.moreRadioList.length>0?i("Dropdown",{on:{"on-click":t.clickMoreItem}},[i("a",{attrs:{href:"javascript:void(0)"}},[t._v(" "+t._s(t.moreRadioText)+" "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.moreRadioList,(function(e){return i("DropdownItem",{key:e.id,attrs:{name:e.id}},[t._v(t._s(e.name))])})),1)],1):t._e()],2)}),J=[],Q=(i("b0c0"),{name:"tq-radio-group",data:function(){return{baseRadioList:[],moreRadioList:[],moreRadioText:"更多",selectedId:""}},props:{options:Array},methods:{clickBtn:function(t){this.selectedId=t,this.$emit("changeSelectId",t)},clickMoreItem:function(t){this.moreRadioText=t,this.selectedId=t,this.$emit("changeSelectId",t)}},created:function(){for(var t=0;t<this.options.length;t++){var e=this.options[t];"more"===e.level?this.moreRadioList.push({id:e.id,name:e.name,selected:!1}):this.baseRadioList.push({id:e.id,name:e.name,selected:!1})}}}),X=Q,tt=(i("a1e2"),Object(s["a"])(X,K,J,!1,null,null,null)),et=tt.exports,it={name:"tq-chart-tool",components:{TqRadioGroup:et},data:function(){return{optionsDay:[{id:"1day",name:"日内"},{id:"3day",level:"more",name:"3日"},{id:"5day",level:"more",name:"5日"},{id:"8day",level:"more",name:"8日"}],optionsDur:[{id:"1m",name:"1m"},{id:"5m",name:"5m"},{id:"10m",name:"10m"},{id:"30m",name:"30m"},{id:"1h",name:"1h"},{id:"2h",name:"2h"},{id:"1d",name:"1d"}]}},props:{},methods:{changeSelectId:function(t){t.endsWith("day"),this.$emit("on-change-duration",t)}},created:function(){}},rt=it,nt=(i("7943"),Object(s["a"])(rt,B,Z,!1,null,null,null)),at=nt.exports,st=(i("99af"),i("beea")),ot="web_chart",ht="web_chart_focus",ct=null,lt=null,ut={name:"tq-chart-components",data:function(){return{id:"TQ-CHART",action:"run"}},props:{instrumentId:{type:String,default:"TQ.m@SHFE.au"},duration:{type:Number,default:6e10},width:Number,height:Number,theme:{type:String,default:"light"}},render:function(t){var e={class:{"theme-light":"light"===this.theme,"theme-dark":"dark"===this.theme},attrs:{id:this.id}};return t("div",e)},watch:{instrumentId:function(t,e){lt.removeMarkAll(),this.$nextTick(this.updateTqChart)},duration:function(t,e){lt.removeMarkAll(),this.$nextTick(this.updateTqChart)},width:function(t,e){lt&&lt.resize({width:t,height:this.height})},height:function(t,e){lt&&lt.resize({width:this.width,height:t})}},created:function(){ct=this.$tqsdk.get({name:"klines",symbol:this.instrumentId,duration:this.duration}),lt=new st["a"]({id:this.id,instrumentId:this.instrumentId,duration:this.duration,height:this.height,width:this.width,mainSeries:ct});var t="free",e=3,i=this;lt.on("showRangeChanged",(function(r){if(-1!==r.rightId&&-1!==r.leftId)if("fixed"===t){var n=864e11;i.$tqsdk.set_chart({chart_id:ot,symbol:i.instrumentId,duration:i.duration,trading_day_start:n*(1-e),trading_day_count:n*e})}else if("free"===t){var a=r.rightId-r.leftId;i.$tqsdk.set_chart({chart_id:ot,symbol:i.instrumentId,duration:i.duration,left_kline_id:Math.max(r.leftId-a,0),view_width:3*a})}}))},mounted:function(){lt.init();var t=this;this.$tqsdk.on("rtn_data",(function(){if(t.updatePositionLine(),t.updateTrades(),t.updateTqSdkChartData(),t.updatePositionRect(),"run"===t.action&&"backtest"===t.$tqsdk.get_by_path(["action"])){var e=t.$store.state.user_id;if(e){var i=t.$tqsdk.get({name:"trades",user_id:e});for(var r in i){var n=i[r];lt&&lt.symbol&&lt.duration&&(t.$tqsdk.set_chart({chart_id:ht,symbol:lt.symbol,duration:lt.duration,view_width:lt.bar.barNumbers,focus_datetime:n.trade_date_time,focus_position:Math.floor(lt.bar.barNumbers/2)}),t.action="backtest");break}}}var a=t.$tqsdk.get_by_path(["charts",ht]);if(a&&!a.more_data&&a.left_id&&a.right_id){var s=[a.left_id,a.right_id],o=s[0],h=s[1];lt.setRange(o,h),lt.addHighlightBar("movetoid",o+Math.round(lt.bar.barNumbers/2-2)),t.$tqsdk.set_chart({chart_id:ht,symbol:"",duration:lt.duration,view_width:0})}else{var c=t.$tqsdk.get_by_path(["charts",ot,"more_data"]);!c&&t.$tqsdk.is_changed(ct)&&lt.draw()}})),this.$eventHub.$on("selectReportId",(function(t){this.$tqsdk.set_chart({chart_id:ht,symbol:lt.symbol,duration:lt.duration,view_width:lt.bar.barNumbers,focus_datetime:t.trade_date_time,focus_position:Math.floor(lt.bar.barNumbers/2)})}))},methods:{updateTqChart:function(){if(this.$tqsdk.set_chart({chart_id:ot,symbol:this.instrumentId,duration:this.duration,view_width:1e3}),ct=this.$tqsdk.get({name:"klines",symbol:this.instrumentId,duration:this.duration}),lt){var t=this.$tqsdk.get_quote(this.instrumentId);lt.setMainSeries(this.instrumentId,this.duration,ct),lt.price_decs=t.price_decs,this.$nextTick((function(){this.updateTqSdkChartData(),this.updateTrades(!0),this.updatePositionRect(!0)}))}},updateTqSdkChartData:function(){var t=this.$tqsdk.get_by_path(["draw_chart_datas",lt.symbol,lt.duration]);if(t)for(var e in t)lt.addSeries(e,t[e])},updatePositionLine:function(t){var e=this.$store.state.user_id;if(e){var i=this.$tqsdk.get({name:"position",user_id:e,symbol:lt.symbol});i&&i.volume_long>0?lt.addMark({id:"pos_long",type:"line",boardId:"main",yAlign:"right",xPos1:0,xPos2:lt.innerWidth,y1:i.open_price_long,y2:i.open_price_long,stroke:"red",text:"多仓".concat(i.volume_long,"手@").concat(i.open_price_long)}):lt.removeMark("pos_long"),i&&i.volume_short>0?lt.addMark({id:"pos_short",type:"line",boardId:"main",yAlign:"right",xPos1:0,xPos2:lt.innerWidth,y1:i.open_price_short,y2:i.open_price_short,stroke:"green",text:"空仓".concat(i.volume_short,"手@").concat(i.open_price_short)}):lt.removeMark("pos_short")}},updateTrades:function(t){var e=this.$store.state.user_id;if(e){var i=this.$tqsdk.get({name:"trades",user_id:e});for(var r in i){var n=i[r];t?n.volume>0&&n.symbol===lt.symbol&&lt.addTradeArrow(r,n):n._epoch===this.$tqsdk.dm._epoch&&n.volume>0&&n.symbol===lt.symbol&&lt.addTradeArrow(r,n)}}},updatePositionRect:function(t){var e=this.$tqsdk.get_by_path(["snapshots"]);for(var i in e){var r=e[i];t?r.positions&&r.positions.hasOwnProperty(lt.symbol)&&lt.addPositionRecord(i,r.positions[lt.symbol]):r._epoch===this.$tqsdk.dm._epoch&&r.positions&&r.positions.hasOwnProperty(lt.symbol)&&lt.addPositionRecord(i,r.positions[lt.symbol])}}}},dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"strategy-log"},[i("div",{staticClass:"reports",style:{height:t.height+"px"}},[t._m(0)])])},ft=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("thead",[i("tr",[i("th",{attrs:{width:"140px"}},[t._v("Datetime")]),i("th",{attrs:{width:"20px"}}),i("th",[t._v("Symbol")]),i("th",[t._v("Direction")]),i("th",[t._v("Offset")]),i("th",[t._v("Volume")]),i("th",[t._v("Price")])])]),i("tbody")])}],mt=(i("4160"),i("4e82"),i("159b"),i("284c")),pt=i("c1df"),yt=i.n(pt);i("a434"),i("0d03"),i("b680"),i("4d90"),i("1276"),i("bf2d");function gt(t){switch(t){case"BUY":return"买";case"SELL":return"卖";default:return t}}function vt(t){switch(t){case"OPEN":return"开";case"CLOSE":return"平";case"CLOSETODAY":return"平今";default:return t}}var bt={data:function(){return{tbodyRoot:null}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".reports table tbody");var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$store.state.user_id;if(e){var i=[],r=t.$tqsdk.get({name:"trades",user_id:e});if(r){for(var n in r)r[n]._epoch===t.$tqsdk.dm._epoch&&i.push(r[n]);i.sort((function(t,e){return t.trade_date_time-e.trade_date_time}));for(var a=0;a<i.length;a++)t.append_trade(i[a])}}}))},methods:{append_trade:function(t){var e=yt()(t.trade_date_time/1e6).format("YYYY-MM-DD HH:mm:ss"),i=gt(t.direction),r=vt(t.offset),n=[];n="OPEN"===t.offset?["ivu-icon","ivu-icon-ios-star","type-"+("BUY"===t.direction?"error":"success")]:["ivu-icon","ivu-icon-ios-star-outline","type-"+("BUY"===t.direction?"success":"error")];var a=this.append_tr(e,t.symbol,i,r,t.volume,t.price,n),s=this;a.onclick=function(e){var i=s.tbodyNode.querySelectorAll("tr");i.forEach((function(t){return t.className=""})),a.className="selected",s.$eventHub.$emit("selectReportId",t)},this.tbodyNode.insertBefore(a,this.tbodyNode.firstChild)},append_tr:function(t,e,i,r,n,a,s){var o,h=document.createElement("tr");h.appendChild(this.get_td_text(t));var c=document.createElement("td"),l=document.createElement("i");return(o=l.classList).add.apply(o,Object(mt["a"])(s)),c.appendChild(l),h.appendChild(c),h.appendChild(this.get_td_text(e)),h.appendChild(this.get_td_text(i)),h.appendChild(this.get_td_text(r)),h.appendChild(this.get_td_text(n)),h.appendChild(this.get_td_text(a)),this.tbodyNode.insertBefore(h,this.tbodyNode.firstChild),h},get_td_text:function(t){var e=document.createElement("td");return e.textContent=t,e}}},_t=bt,wt=(i("0bf9"),Object(s["a"])(_t,dt,ft,!1,null,null,null)),kt=wt.exports,xt=function(){return document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)}}(),St=function(){return document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)}}(),Mt=4,Ot={name:"tq-center-view",components:{TqLayoutArea:C,TqChartComponents:ut,TqChartTool:at,Logs:kt},props:{width:Number},data:function(){var t=38,e=38;return{topHeight:t,centerHeight:400,centerHeightMin:200,bottomHeightMin:e+Mt,bottomYOffset:t+400,bottomYOffsetMin:t,bottomYOffsetMax:this.$root.windowHeight-e,bottomHeight:this.$root.windowHeight-t-400-Mt,isMoving:!1,showBottomShadow:!1,instrumentId:"",duration:6e10,subscribed:[],action:"run",theme:"light"}},methods:{onResize:function(){this.bottomYOffsetMax=this.$root.windowHeight-this.bottomTabsHeight,this.computeLayouts()},computeLayouts:function(){var t=this.$root.windowHeight-this.bottomYOffset;t<=this.bottomHeightMin&&(t=this.bottomHeightMin,this.bottomYOffset=this.$root.windowHeight-t),this.bottomHeight=t-Mt;var e=this.$root.windowHeight-this.topHeight-t;this.centerHeight=Math.max(e,this.centerHeightMin)},handleMousedown:function(t){this.isMoving=!0,xt(document,"mousemove",this.handleMove),xt(document,"mouseup",this.handleUp)},handleMove:function(t){var e=t.pageY;e>=this.bottomYOffsetMax||e<=this.bottomYOffsetMin||(this.showBottomShadow=e<this.centerHeightMin+this.topHeight,this.bottomYOffset=e,this.computeLayouts())},handleUp:function(){this.isMoving=!1,St(document,"mousemove",this.handleMove),St(document,"mouseup",this.handleUp)},onChangeDuration:function(t){var e=t.match(/^([0-9]+)([a-zA-Z]+)$/),i=Object(V["a"])(e,3),r=(i[0],i[1]),n=i[2];"day"===n?this.duration=6e10:"m"===n?this.duration=60*r*1e9:"h"===n?this.duration=3600*r*1e9:"d"===n&&(this.duration=24*r*3600*1e9)},switchSymbol:function(t){var e=this.subscribedIndex;"pre"===t?e=0===e?this.subscribed.length-1:e-1:"next"===t&&(e=e===this.subscribed.length-1?0:e+1),e!==this.subscribedIndex&&(this.subscribedIndex=e,this.instrumentId=Array.isArray(this.subscribed[e].symbol)?this.subscribed[e].symbol[0]:this.subscribed[e].symbol,this.duration=this.subscribed[e].dur_nano||6e10),console.log(t)}},created:function(){this.$eventHub.$on("window_resize",this.onResize);var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.get_by_path(["trade"]),i=Object.keys(e)[0];i&&t.$store.commit("set_user_id",{user_id:i}),t.subscribed=t.$tqsdk.get_by_path(["subscribed"]),t.subscribed&&t.subscribed[0]&&""===t.instrumentId&&(t.subscribedIndex=0,t.instrumentId=Array.isArray(t.subscribed[0].symbol)?t.subscribed[0].symbol[0]:t.subscribed[0].symbol,t.duration=t.subscribed[0].dur_nano||6e10)})),this.$eventHub.$on("changeTheme",(function(){t.theme="light"===t.theme?"dark":"light"}))}},jt=Ot,Dt=(i("733b"),Object(s["a"])(jt,$,U,!1,null,null,null)),Pt=Dt.exports,Tt=38,Yt=4,It={name:"tq-home",components:{TqLeftView:z,TqCenterView:Pt},data:function(){return{leftAreaWidth:Tt,centerAreaLeft:Tt+Yt}},computed:{centerAreaWidth:function(){return this.$root.windowWidth}}},At=It,Ct=(i("d227"),Object(s["a"])(At,M,O,!1,null,null,null)),Nt=Ct.exports;r["a"].use(S["a"]);var Ht=[{path:"/",name:"tianqin",component:Nt}],qt=new S["a"]({mode:"history",base:"/",routes:Ht}),Wt=qt,Gt=i("2f62");i("f00c"),i("8ba4");r["a"].use(Gt["a"]);var Lt=new Gt["a"].Store({state:{user_id:""},mutations:{set_user_id:function(t,e){t.user_id=e.user_id}},actions:{}}),Et=Lt;r["a"].config.productionTip=!1,r["a"].$eventHub=new r["a"],r["a"].prototype.$eventHub=r["a"].$eventHub;var Rt={name:"tianqin-web",windowHeight:window.innerHeight,windowWidth:window.innerWidth},Ft=new r["a"]({data:Rt,router:Wt,store:Et,render:function(t){return t(c)},methods:{handlerResize:function(){Rt.windowHeight=window.innerHeight,Rt.windowWidth=window.innerWidth,this.$eventHub.$emit("window_resize",{width:Rt.windowWidth,height:Rt.windowHeight})}},created:function(){var t;function e(){t||(t=setTimeout((function(){t=null,Ft.handlerResize()}),200))}window.addEventListener("resize",e,!1)},errorCaptured:function(t,e,i){return console.error("App.errorCaptured",t,e,i),!1},destroyed:function(){}});GetTqsdkUrl().then((function(t){var e=t["ins_url"],i=t["md_url"],n=t["ws_url"];r["a"].$tqsdk=new u.a({symbolsServerUrl:e,wsQuoteUrl:i,wsTradeUrl:n}),r["a"].prototype.$tqsdk=r["a"].$tqsdk,Ft.$mount("#app")}))},"5c0b":function(t,e,i){"use strict";var r=i("9c0c"),n=i.n(r);n.a},"6f4d":function(t,e,i){},"733b":function(t,e,i){"use strict";var r=i("6f4d"),n=i.n(r);n.a},7943:function(t,e,i){"use strict";var r=i("b582"),n=i.n(r);n.a},9571:function(t,e,i){},"9c0c":function(t,e,i){},a1e2:function(t,e,i){"use strict";var r=i("b7c4"),n=i.n(r);n.a},a829:function(t,e,i){},b582:function(t,e,i){},b7c4:function(t,e,i){},b9e2:function(t,e,i){"use strict";var r=i("a829"),n=i.n(r);n.a},beea:function(t,e,i){"use strict";(function(t){i("a4d3"),i("e01a"),i("d28b"),i("99af"),i("cb29"),i("4160"),i("a630"),i("c975"),i("a15b"),i("fb6a"),i("45fc"),i("4e82"),i("accc"),i("f4b3"),i("0d03"),i("b0c0"),i("a9e3"),i("f00c"),i("8ba4"),i("9129"),i("b680"),i("7039"),i("3410"),i("e21d"),i("b64b"),i("d3b7"),i("acd8"),i("e25e"),i("4d63"),i("ac1f"),i("5377"),i("25f0"),i("8a79"),i("3ca3"),i("466d"),i("4d90"),i("5319"),i("1276"),i("4c53"),i("159b"),i("ddb0"),i("bf19");var r=i("9aa6"),n=i("902f"),a=i("c3c5"),s=i("8b83"),o=i("c65a"),h=i("c03e"),c=i("9f12"),l=i("53fe"),u=i("bf2d"),d=i("19b8"),f="0.0.1";"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function m(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function p(t,e){return e={exports:{}},t(e,e.exports),e.exports}var y=p((function(t){var e=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=e)})),g=(y.version,p((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}))),v=p((function(t){var e="__core-js_shared__",i=g[e]||(g[e]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:y.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),b=0,_=Math.random(),w=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++b+_).toString(36))},k=p((function(t){var e=v("wks"),i=g.Symbol,r="function"==typeof i,n=t.exports=function(t){return e[t]||(e[t]=r&&i[t]||(r?i:w)("Symbol."+t))};n.store=e})),x=function(t){return"object"===Object(u["a"])(t)?null!==t:"function"===typeof t},S=function(t){if(!x(t))throw TypeError(t+" is not an object!");return t},M=function(t){try{return!!t()}catch(e){return!0}},O=!M((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),j=g.document,D=x(j)&&x(j.createElement),P=function(t){return D?j.createElement(t):{}},T=!O&&!M((function(){return 7!=Object.defineProperty(P("div"),"a",{get:function(){return 7}}).a})),Y=function(t,e){if(!x(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!x(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!x(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!x(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")},I=Object.defineProperty,A=O?Object.defineProperty:function(t,e,i){if(S(t),e=Y(e,!0),S(i),T)try{return I(t,e,i)}catch(r){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t},C={f:A},N=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},H=O?function(t,e,i){return C.f(t,e,N(1,i))}:function(t,e,i){return t[e]=i,t},q=k("unscopables"),W=Array.prototype;void 0==W[q]&&H(W,q,{});var G=function(t){W[q][t]=!0},L=function(t,e){return{value:e,done:!!t}},E={},R={}.toString,F=function(t){return R.call(t).slice(8,-1)},z=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==F(t)?t.split(""):Object(t)},$=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},U=function(t){return z($(t))},V={}.hasOwnProperty,B=function(t,e){return V.call(t,e)},Z=v("native-function-to-string",Function.toString),K=p((function(t){var e=w("src"),i="toString",r=(""+Z).split(i);y.inspectSource=function(t){return Z.call(t)},(t.exports=function(t,i,n,a){var s="function"==typeof n;s&&(B(n,"name")||H(n,"name",i)),t[i]!==n&&(s&&(B(n,e)||H(n,e,t[i]?""+t[i]:r.join(String(i)))),t===g?t[i]=n:a?t[i]?t[i]=n:H(t,i,n):(delete t[i],H(t,i,n)))})(Function.prototype,i,(function(){return"function"==typeof this&&this[e]||Z.call(this)}))})),J=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},Q=function(t,e,i){if(J(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)}}return function(){return t.apply(e,arguments)}},X="prototype",tt=function t(e,i,r){var n,a,s,o,h=e&t.F,c=e&t.G,l=e&t.S,u=e&t.P,d=e&t.B,f=c?g:l?g[i]||(g[i]={}):(g[i]||{})[X],m=c?y:y[i]||(y[i]={}),p=m[X]||(m[X]={});for(n in c&&(r=i),r)a=!h&&f&&void 0!==f[n],s=(a?f:r)[n],o=d&&a?Q(s,g):u&&"function"==typeof s?Q(Function.call,s):s,f&&K(f,n,s,e&t.U),m[n]!=s&&H(m,n,o),u&&p[n]!=s&&(p[n]=s)};g.core=y,tt.F=1,tt.G=2,tt.S=4,tt.P=8,tt.B=16,tt.W=32,tt.U=64,tt.R=128;var et=tt,it=Math.ceil,rt=Math.floor,nt=function(t){return isNaN(t=+t)?0:(t>0?rt:it)(t)},at=Math.min,st=function(t){return t>0?at(nt(t),9007199254740991):0},ot=Math.max,ht=Math.min,ct=function(t,e){return t=nt(t),t<0?ot(t+e,0):ht(t,e)},lt=function(t){return function(e,i,r){var n,a=U(e),s=st(a.length),o=ct(r,s);if(t&&i!=i){while(s>o)if(n=a[o++],n!=n)return!0}else for(;s>o;o++)if((t||o in a)&&a[o]===i)return t||o||0;return!t&&-1}},ut=v("keys"),dt=function(t){return ut[t]||(ut[t]=w(t))},ft=lt(!1),mt=dt("IE_PROTO"),pt=function(t,e){var i,r=U(t),n=0,a=[];for(i in r)i!=mt&&B(r,i)&&a.push(i);while(e.length>n)B(r,i=e[n++])&&(~ft(a,i)||a.push(i));return a},yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),gt=Object.keys||function(t){return pt(t,yt)},vt=O?Object.defineProperties:function(t,e){S(t);var i,r=gt(e),n=r.length,a=0;while(n>a)C.f(t,i=r[a++],e[i]);return t},bt=g.document,_t=bt&&bt.documentElement,wt=dt("IE_PROTO"),kt=function(){},xt="prototype",St=function(){var t,e=P("iframe"),i=yt.length,r="<",n=">";e.style.display="none",_t.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+n+"document.F=Object"+r+"/script"+n),t.close(),St=t.F;while(i--)delete St[xt][yt[i]];return St()},Mt=Object.create||function(t,e){var i;return null!==t?(kt[xt]=S(t),i=new kt,kt[xt]=null,i[wt]=t):i=St(),void 0===e?i:vt(i,e)},Ot=C.f,jt=k("toStringTag"),Dt=function(t,e,i){t&&!B(t=i?t:t.prototype,jt)&&Ot(t,jt,{configurable:!0,value:e})},Pt={};H(Pt,k("iterator"),(function(){return this}));var Tt=function(t,e,i){t.prototype=Mt(Pt,{next:N(1,i)}),Dt(t,e+" Iterator")},Yt=function(t){return Object($(t))},It=dt("IE_PROTO"),At=Object.prototype,Ct=Object.getPrototypeOf||function(t){return t=Yt(t),B(t,It)?t[It]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?At:null},Nt=k("iterator"),Ht=!([].keys&&"next"in[].keys()),qt="@@iterator",Wt="keys",Gt="values",Lt=function(){return this},Et=function(t,e,i,r,n,a,s){Tt(i,e,r);var o,h,c,l=function(t){if(!Ht&&t in m)return m[t];switch(t){case Wt:return function(){return new i(this,t)};case Gt:return function(){return new i(this,t)}}return function(){return new i(this,t)}},u=e+" Iterator",d=n==Gt,f=!1,m=t.prototype,p=m[Nt]||m[qt]||n&&m[n],y=p||l(n),g=n?d?l("entries"):y:void 0,v="Array"==e&&m.entries||p;if(v&&(c=Ct(v.call(new t)),c!==Object.prototype&&c.next&&(Dt(c,u,!0),"function"!=typeof c[Nt]&&H(c,Nt,Lt))),d&&p&&p.name!==Gt&&(f=!0,y=function(){return p.call(this)}),(Ht||f||!m[Nt])&&H(m,Nt,y),E[e]=y,E[u]=Lt,n)if(o={values:d?y:l(Gt),keys:a?y:l(Wt),entries:g},s)for(h in o)h in m||K(m,h,o[h]);else et(et.P+et.F*(Ht||f),e,o);return o},Rt=Et(Array,"Array",(function(t,e){this._t=U(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,L(1)):L(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values");E.Arguments=E.Array,G("keys"),G("values"),G("entries");for(var Ft=k("iterator"),zt=k("toStringTag"),$t=E.Array,Ut={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Vt=gt(Ut),Bt=0;Bt<Vt.length;Bt++){var Zt,Kt=Vt[Bt],Jt=Ut[Kt],Qt=g[Kt],Xt=Qt&&Qt.prototype;if(Xt&&(Xt[Ft]||H(Xt,Ft,$t),Xt[zt]||H(Xt,zt,Kt),E[Kt]=$t,Jt))for(Zt in Rt)Xt[Zt]||K(Xt,Zt,Rt[Zt],!0)}function te(t,e){return ee(t)||ie(t,e)||re()}function ee(t){if(Array.isArray(t))return t}function ie(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(i.push(s.value),e&&i.length===e)break}catch(h){n=!0,a=h}finally{try{r||null==o["return"]||o["return"]()}finally{if(n)throw a}}return i}function re(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var ne=p((function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,r,a,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new n(r,a||t,s),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,s=new Array(a);n<a;n++)s[n]=r[n].fn;return s},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,n,a,s){var o=i?i+t:t;if(!this._events[o])return!1;var h,c,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,a),!0;case 6:return l.fn.call(l.context,e,r,n,a,s),!0}for(c=1,h=new Array(u-1);c<u;c++)h[c-1]=arguments[c];l.fn.apply(l.context,h)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,n);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];l[c].fn.apply(l[c].context,h)}}return!0},o.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,n){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||s(this,a);else{for(var h=0,c=[],l=o.length;h<l;h++)(o[h].fn!==e||n&&!o[h].once||r&&o[h].context!==r)&&c.push(o[h]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})),ae=Object(d["l"])(".%L"),se=Object(d["l"])(":%S"),oe=Object(d["l"])("%H:%M"),he=Object(d["l"])("%H:%M"),ce=Object(d["l"])("%m%d"),le=Object(d["l"])("%m%d"),ue=Object(d["l"])("%y");function de(t){return(Object(d["p"])(t)<t?ae:Object(d["n"])(t)<t?se:Object(d["m"])(t)<t?oe:Object(d["k"])(t)<t?he:Object(d["o"])(t)<t?ce:Object(d["q"])(t)<t?le:ue)(t)}var fe=function(){function t(e){Object(c["a"])(this,t),this.chart=e,this.xScale=Object(d["i"])(),this.xAxis=Object(d["a"])().scale(this.xScale),this._init()}return Object(l["a"])(t,[{key:"_init",value:function(){this.rootG=this.chart.rootG.append("g").attr("class","x axis"),this.resetPosition()}},{key:"resetPosition",value:function(){this.rootG.attr("transform","translate("+Math.floor(this.chart.bar.barWidth/2)+","+(this.chart.innerHeight+1)+")"),this.xScale.rangeRound([0,this.chart.bar.barNumbers*this.chart.bar.barWidth-this.chart.bar.barWidth])}},{key:"draw",value:function(t,e,i){this.xScale.domain([t,e]),this.xAxis.tickFormat((function(t,e){return i[t]&&i[t].datetime?de(i[t].datetime/1e6):""})),this.rootG.call(this.xAxis)}}]),t}();function me(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=Number(t),r=Number.isInteger(e)?e:2;return Number.isFinite(i)?i.toFixed(r):t}var pe=function(){function t(e){Object(c["a"])(this,t),this.tqchart=e,this.svgG=this.tqchart.svg.append("g").attr("class","crosshair-container").attr("visibility","hidden"),this.rootG=this.svgG.append("g").attr("class","crosshair-content").attr("transform","translate("+this.tqchart.margin.left+","+this.tqchart.margin.top+")"),this.rectG=this.rootG.append("rect").attr("class","crosshair-cursor").attr("width",this.tqchart.innerWidth).attr("height",this.tqchart.innerHeight),this.klinePanel=this.svgG.append("g").attr("class","kline panel"),this.klinePanelWidth=100,this.klinePanelHeight=144,this.klinePanelDefaultColor="#333333",this.klinePanel.append("rect").attr("x",.5).attr("y",.5).attr("width",this.klinePanelWidth).attr("height",this.klinePanelHeight).attr("stroke","#DDDDDD"),this.klinePanel.append("text").attr("x",0).attr("y",0),this._initCrosshairline(),this._initAxisannotation()}return Object(l["a"])(t,[{key:"_initCrosshairline",value:function(){this.rootG.append("g").attr("class","crosshair horizontal").append("line").attr("x1",0).attr("y1",0).attr("x2",this.tqchart.innerWidth).attr("y2",0).attr("stroke","#aaaaaa").attr("stroke-dasharray","2"),this.rootG.append("g").attr("class","crosshair vertical").append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",this.tqchart.innerHeight).attr("stroke","#aaaaaa").attr("stroke-dasharray","2")}},{key:"_initAxisannotation",value:function(){this.rootG.append("g").attr("class","axisannotation x").attr("transform","translate(0,"+(this.tqchart.innerHeight+2)+")"),this.rootG.append("g").attr("class","axisannotation y left").attr("transform","translate(-"+(this.tqchart.margin.left-1)+",0)"),this.rootG.append("g").attr("class","axisannotation y right").attr("transform","translate("+(this.tqchart.innerWidth+1)+",0)"),this.rootG.select("g.axisannotation.x").append("rect").style("fill","#eeeeee").attr("opacity","0.8").attr("width","120px").attr("height","14px"),this.rootG.select("g.axisannotation.x").append("text").attr("x",1).attr("y",12),this.rootG.select("g.axisannotation.y.left").append("rect").style("fill","#FAFAFA").attr("opacity","0.9").attr("width",this.tqchart.margin.left-2).attr("height","16px"),this.rootG.select("g.axisannotation.y.left").append("text").attr("x",this.tqchart.margin.left-2).attr("y",13).attr("text-anchor","end"),this.rootG.select("g.axisannotation.y.right").append("rect").style("fill","#FAFAFA").attr("opacity","0.9").attr("width",this.tqchart.margin.right-2).attr("height","16px"),this.rootG.select("g.axisannotation.y.right").append("text").attr("x",2).attr("y",13)}},{key:"resize",value:function(){this.rectG.attr("width",this.tqchart.innerWidth).attr("height",this.tqchart.innerHeight),this.rootG.select("g.crosshair.horizontal line").attr("x2",this.tqchart.innerWidth),this.rootG.select("g.crosshair.vertical line").attr("y2",this.tqchart.innerHeight),this.rootG.select("g.axisannotation.x").attr("transform","translate(0,"+this.tqchart.innerHeight+")"),this.rootG.select("g.axisannotation.y.right").attr("transform","translate("+(this.tqchart.innerWidth+1)+",0)")}},{key:"update",value:function(t,e){var i=Math.floor(t/this.tqchart.bar.barWidth),r=i*this.tqchart.bar.barWidth+this.tqchart.bar.barWidth/2;this.rootG.select("g.crosshair.horizontal line").attr("y1",e+.5).attr("y2",e+.5),this.rootG.select("g.crosshair.vertical line").attr("x1",r).attr("x2",r);var n=this.tqchart.mainSeries;if(n&&n.last_id>-1&&n.data&&this.tqchart.range.leftId>-1){var a=this.tqchart.range.leftId+i,s=n.data[a],o=n.data[a-1];if(!s)return;this._updateKlinePanel(r,s,o),this._updateXAxisannotation(r,s.datetime);var h=this.tqchart.getBoardByYPosition(e);h&&this._updateYAxisannotation(e,h)}}},{key:"_updateKlinePanel",value:function(t,e,i){var r=this,n=[Object(d["l"])("%Y-%m-%d (%w)")(e.datetime/1e6),Object(d["l"])("%H:%M:%S")(e.datetime/1e6),"开盘",me(e.open,this.tqchart.price_decs),"最高",me(e.high,this.tqchart.price_decs),"最低",me(e.low,this.tqchart.price_decs),"收盘",me(e.close,this.tqchart.price_decs),"成交量",e.volume,"持仓量",e.close_oi],a=null;i&&i.close&&(a=me(e.close-i.close,this.tqchart.price_decs),n.push("涨跌"),n.push(a),n.push("涨跌幅"),n.push(me(a/i.close*100,2)+"%"));var s=this.klinePanel.select("text").selectAll("tspan").data(n);s.enter().append("tspan").merge(s).attr("x",(function(t,e){return e>1&&e%2===1?r.klinePanelWidth-1:1})).attr("dy",(function(t,e){return e>1&&e%2===1?"0px":"14px"})).attr("text-anchor",(function(t,e){return e>1&&e%2===1?"end":"start"})).attr("class",(function(t,e){if(15===e||17===e){if(a>0)return"up";if(a<0)return"down"}return""})).text((function(t){return t})).exit().remove();var o=2;t<this.klinePanelWidth-this.tqchart.margin.left&&(o=this.tqchart.outerWidth-2-this.klinePanelWidth),this.klinePanel.attr("transform","translate("+o+",0)")}},{key:"_updateXAxisannotation",value:function(t,e){this.rootG.select("g.axisannotation.x rect").attr("x",t-40),this.rootG.select("g.axisannotation.x text").text(Object(d["l"])("%Y-%m-%d %H:%M:%S")(e/1e6)).attr("x",t-38)}},{key:"_updateYAxisannotation",value:function(t,e){for(var i=0,r=["left","right"];i<r.length;i++){var n=r[i],a=e[n+"YAxis"],s=["g","axisannotation","y",n].join(".");if(a){var o=me(a.yScale.invert(t-e.top),"main"===e.boardId&&"right"===n&&this.tqchart.price_decs?this.tqchart.price_decs:0);if(!Number.isNaN(o)){this.rootG.select(s).attr("visibility","visible"),this.rootG.select(s+" rect").attr("y",t-10),this.rootG.select(s+" text").text(o).attr("y",t+2);continue}}this.rootG.select("g.axisannotation.y.left").attr("visibility","hidden")}}},{key:"show",value:function(){this.svgG.attr("visibility","visible")}},{key:"hide",value:function(){this.svgG.attr("visibility","hidden"),this.rootG.selectAll("g.axisannotation.y").attr("visibility","hidden")}},{key:"drag",value:function(t){t?this.rectG.attr("class","crosshair-cursor drag"):this.rectG.attr("class","crosshair-cursor")}}]),t}(),ye=function(){function t(e,i){Object(c["a"])(this,t),this.board=e,this.align=i,this.yScale=Object(d["i"])().range([this.board.height,0]),this.yAxis="left"===i?Object(d["b"])():Object(d["c"])(),this.yAxis.scale(this.yScale),this._init()}return Object(l["a"])(t,[{key:"_init",value:function(){this.rootG=this.board.rootG.append("g").attr("class","y axis "+this.align),this.resetPosition()}},{key:"resetPosition",value:function(){this.yScale.range([this.board.height,0]),"right"===this.align&&this.rootG.attr("transform","translate("+this.board.width+",0)")}},{key:"getTicks",value:function(){var t=[],e=this;return this.rootG.selectAll(".tick").each((function(i){t.push(Math.round(e.yScale(i)))})),t}},{key:"draw",value:function(t){this.yScale.domain(t),this.yAxis.ticks("main"===this.board.boardId?6:3),this.rootG.call(this.yAxis)}}]),t}(),ge=function(){function t(e,i){Object(c["a"])(this,t);var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",n=arguments.length>3?arguments[3]:void 0;this.tqchart=e,this.parentSvg=i,this.board=n,this.rootG=this.parentSvg.append("g").attr("class","background"),this.direction=r,"horizontal"===this.direction&&this.rootG.append("line").attr("class","border").attr("x1",-this.tqchart.margin.left).attr("y1",-.5).attr("x2",this.tqchart.innerWidth+this.tqchart.margin.right).attr("y2",-.5)}return Object(l["a"])(t,[{key:"clear",value:function(){this.rootG.selectAll("line").remove()}},{key:"draw",value:function(){if("vertical"===this.direction){var t=this.tqchart.xAxis.getTicks();this._drawVerticalLines(t)}else if("horizontal"===this.direction){var e=this.board.rightYAxis.getTicks();this._drawHorizontalLines(e)}}},{key:"resize",value:function(){"vertical"===this.direction?this.rootG.selectAll("line").attr("y2",this.tqchart.innerHeight):"horizontal"===this.direction&&this.rootG.selectAll("line").attr("x2",this.tqchart.innerWidth)}},{key:"_drawVerticalLines",value:function(t){var e=this.tqchart.innerHeight,i=this.rootG.selectAll("line.bgline").data(t);i.enter().append("line").attr("class","bgline").attr("y1",0).attr("y2",e).merge(i).attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),i.exit().remove()}},{key:"_drawHorizontalLines",value:function(t){var e=this.tqchart.innerWidth,i=this.rootG.selectAll("line.bgline").data(t);i.enter().append("line").attr("class","bgline").attr("x1",0).attr("x2",e).merge(i).attr("y1",(function(t){return t+.5})).attr("y2",(function(t){return t+.5})),i.exit().remove()}}]),t}(),ve=2,be=function(){function t(e,i,r,n,a){Object(c["a"])(this,t),this.tqchart=e,this.boardId=i,this.top=r,this.height=n,this.width=this.tqchart.innerWidth,this.rootG=this.tqchart.rootG.append("g").attr("class",this.boardId).attr("transform","translate(0,"+this.top+")"),this.background=new ge(this.tqchart,this.rootG,"horizontal",this),this.plotG=this.rootG.append("g").attr("class",this.boardId+" plots"),this.maskG=this.rootG.append("mask").attr("id","mask-"+this.boardId).append("rect").attr("x","0").attr("y","0").attr("width",this.width).attr("height",this.height).style("fill","#FFFFFF").attr("stroke","none"),this.markG=this.rootG.append("g").attr("mask","url(#mask-"+this.boardId+")").attr("class",this.boardId+" marks"),this.leftYAxis=new ye(this,"left"),this.rightYAxis=new ye(this,"right")}return Object(l["a"])(t,[{key:"resetPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.top,i=void 0===e?this.top:e,r=t.height,n=void 0===r?this.height:r;this.top=i,this.rootG.attr("transform","translate(0,"+this.top+")"),this.height=n,this.width=this.tqchart.innerWidth,this.maskG.attr("width",this.width).attr("height",this.height),this.background.resize(),this.leftYAxis&&this.leftYAxis.resetPosition(),this.rightYAxis.resetPosition()}},{key:"setDomain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";this[e+"Domain"]=t}},{key:"draw",value:function(t,e,i){this.leftYAxis.draw(this.leftDomain),this.rightYAxis.draw(this.rightDomain),this.background.draw()}},{key:"remove",value:function(){this.rootG.remove()}}],[{key:"GetMutilPlotsHeight",value:function(t,e){for(var i=e-ve*(t-1),r=1/t,n=Math.ceil(i*r*.7),a=i-n*(t-1),s=[{top:0,height:a}],o=1;o<t;o++)s[o]={height:n,top:s[o-1].top+s[o-1].height+ve};return s}}]),t}(),_e=k("match"),we=function(t){var e;return x(t)&&(void 0!==(e=t[_e])?!!e:"RegExp"==F(t))},ke=k("species"),xe=function(t,e){var i,r=S(t).constructor;return void 0===r||void 0==(i=S(r)[ke])?e:J(i)},Se=function(t){return function(e,i){var r,n,a=String($(e)),s=nt(i),o=a.length;return s<0||s>=o?t?"":void 0:(r=a.charCodeAt(s),r<55296||r>56319||s+1===o||(n=a.charCodeAt(s+1))<56320||n>57343?t?a.charAt(s):r:t?a.slice(s,s+2):n-56320+(r-55296<<10)+65536)}},Me=Se(!0),Oe=function(t,e,i){return e+(i?Me(t,e).length:1)},je=k("toStringTag"),De="Arguments"==F(function(){return arguments}()),Pe=function(t,e){try{return t[e]}catch(i){}},Te=function(t){var e,i,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=Pe(e=Object(t),je))?i:De?F(e):"Object"==(r=F(e))&&"function"==typeof e.callee?"Arguments":r},Ye=RegExp.prototype.exec,Ie=function(t,e){var i=t.exec;if("function"===typeof i){var r=i.call(t,e);if("object"!==Object(u["a"])(r))throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Te(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Ye.call(t,e)},Ae=function(){var t=S(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Ce=RegExp.prototype.exec,Ne=String.prototype.replace,He=Ce,qe="lastIndex",We=function(){var t=/a/,e=/b*/g;return Ce.call(t,"a"),Ce.call(e,"a"),0!==t[qe]||0!==e[qe]}(),Ge=void 0!==/()??/.exec("")[1],Le=We||Ge;Le&&(He=function(t){var e,i,r,n,a=this;return Ge&&(i=new RegExp("^"+a.source+"$(?!\\s)",Ae.call(a))),We&&(e=a[qe]),r=Ce.call(a,t),We&&r&&(a[qe]=a.global?r.index+r[0].length:e),Ge&&r&&r.length>1&&Ne.call(r[0],i,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)})),r});var Ee=He;et({target:"RegExp",proto:!0,forced:Ee!==/./.exec},{exec:Ee});var Re=k("species"),Fe=!M((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),ze=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}(),$e=function(t,e,i){var r=k(t),n=!M((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),a=n?!M((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[Re]=function(){return i}),i[r](""),!e})):void 0;if(!n||!a||"replace"===t&&!Fe||"split"===t&&!ze){var s=/./[r],o=i($,r,""[t],(function(t,e,i,r,a){return e.exec===Ee?n&&!a?{done:!0,value:s.call(e,i,r)}:{done:!0,value:t.call(i,e,r)}:{done:!1}})),h=o[0],c=o[1];K(String.prototype,t,h),H(RegExp.prototype,r,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}},Ue=Math.min,Ve=[].push,Be="split",Ze="length",Ke="lastIndex",Je=4294967295,Qe=!M((function(){RegExp(Je,"y")}));$e("split",2,(function(t,e,i,r){var n;return n="c"=="abbc"[Be](/(b)*/)[1]||4!="test"[Be](/(?:)/,-1)[Ze]||2!="ab"[Be](/(?:ab)*/)[Ze]||4!="."[Be](/(.?)(.?)/)[Ze]||"."[Be](/()()/)[Ze]>1||""[Be](/.?/)[Ze]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!we(t))return i.call(r,t,e);var n,a,s,o=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,l=void 0===e?Je:e>>>0,u=new RegExp(t.source,h+"g");while(n=Ee.call(u,r)){if(a=u[Ke],a>c&&(o.push(r.slice(c,n.index)),n[Ze]>1&&n.index<r[Ze]&&Ve.apply(o,n.slice(1)),s=n[0][Ze],c=a,o[Ze]>=l))break;u[Ke]===n.index&&u[Ke]++}return c===r[Ze]?!s&&u.test("")||o.push(""):o.push(r.slice(c)),o[Ze]>l?o.slice(0,l):o}:"0"[Be](void 0,0)[Ze]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,r){var a=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,a,r):n.call(String(a),i,r)},function(t,e){var a=r(n,t,this,e,n!==i);if(a.done)return a.value;var s=S(t),o=String(this),h=xe(s,RegExp),c=s.unicode,l=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Qe?"y":"g"),u=new h(Qe?s:"^(?:"+s.source+")",l),d=void 0===e?Je:e>>>0;if(0===d)return[];if(0===o.length)return null===Ie(u,o)?[o]:[];var f=0,m=0,p=[];while(m<o.length){u.lastIndex=Qe?m:0;var y,g=Ie(u,Qe?o:o.slice(m));if(null===g||(y=Ue(st(u.lastIndex+(Qe?0:m)),o.length))===f)m=Oe(o,m,c);else{if(p.push(o.slice(f,m)),p.length===d)return p;for(var v=1;v<=g.length-1;v++)if(p.push(g[v]),p.length===d)return p;m=f=y}}return p.push(o.slice(f)),p}]}));var Xe=Math.max,ti=Math.min,ei=Math.floor,ii=/\$([$&`']|\d\d?|<[^>]*>)/g,ri=/\$([$&`']|\d\d?)/g,ni=function(t){return void 0===t?t:String(t)};$e("replace",2,(function(t,e,i,r){return[function(r,n){var a=t(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,a,n):i.call(String(a),r,n)},function(t,e){var a=r(i,t,this,e);if(a.done)return a.value;var s=S(t),o=String(this),h="function"===typeof e;h||(e=String(e));var c=s.global;if(c){var l=s.unicode;s.lastIndex=0}var u=[];while(1){var d=Ie(s,o);if(null===d)break;if(u.push(d),!c)break;var f=String(d[0]);""===f&&(s.lastIndex=Oe(o,st(s.lastIndex),l))}for(var m="",p=0,y=0;y<u.length;y++){d=u[y];for(var g=String(d[0]),v=Xe(ti(nt(d.index),o.length),0),b=[],_=1;_<d.length;_++)b.push(ni(d[_]));var w=d.groups;if(h){var k=[g].concat(b,v,o);void 0!==w&&k.push(w);var x=String(e.apply(void 0,k))}else x=n(g,o,v,b,w,e);v>=p&&(m+=o.slice(p,v)+x,p=v+g.length)}return m+o.slice(p)}];function n(t,e,r,n,a,s){var o=r+t.length,h=n.length,c=ri;return void 0!==a&&(a=Yt(a),c=ii),i.call(s,c,(function(i,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(o);case"<":c=a[s.slice(1,-1)];break;default:var l=+s;if(0===l)return i;if(l>h){var u=ei(l/10);return 0===u?i:u<=h?void 0===n[u-1]?s.charAt(1):n[u-1]+s.charAt(1):i}c=n[l-1]}return void 0===c?"":c}))}})),O&&"g"!=/./g.flags&&C.f(RegExp.prototype,"flags",{configurable:!0,get:Ae});var ai="toString",si=/./[ai],oi=function(t){K(RegExp.prototype,ai,t,!0)};M((function(){return"/a/b"!=si.call({source:"a",flags:"b"})}))?oi((function(){var t=S(this);return"/".concat(t.source,"/","flags"in t?t.flags:!O&&t instanceof RegExp?Ae.call(t):void 0)})):si.name!=ai&&oi((function(){return si.call(this)}));var hi=p((function(t,e){(function(e,i){t.exports=i()})(0,(function(){var e,i;function r(){return e.apply(null,arguments)}function n(t){e=t}function a(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function s(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function h(t){return void 0===t}function c(t){return"number"===typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function d(t,e){var i,r=[];for(i=0;i<t.length;++i)r.push(e(t[i],i));return r}function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function p(t,e){for(var i in e)f(e,i)&&(t[i]=e[i]);return f(e,"toString")&&(t.toString=e.toString),f(e,"valueOf")&&(t.valueOf=e.valueOf),t}function y(t,e,i,r){return Bi(t,e,i,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(t){return null==t._pf&&(t._pf=g()),t._pf}function b(t){if(null==t._isValid){var e=v(t),r=i.call(e.parsedDateParts,(function(t){return null!=t})),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function _(t){var e=y(NaN);return null!=t?p(v(e),t):v(e).userInvalidated=!0,e}i=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,r=0;r<i;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var w=r.momentProperties=[];function k(t,e){var i,r,n;if(h(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),h(e._i)||(t._i=e._i),h(e._f)||(t._f=e._f),h(e._l)||(t._l=e._l),h(e._strict)||(t._strict=e._strict),h(e._tzm)||(t._tzm=e._tzm),h(e._isUTC)||(t._isUTC=e._isUTC),h(e._offset)||(t._offset=e._offset),h(e._pf)||(t._pf=v(e)),h(e._locale)||(t._locale=e._locale),w.length>0)for(i=0;i<w.length;i++)r=w[i],n=e[r],h(n)||(t[r]=n);return t}var x=!1;function S(t){k(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===x&&(x=!0,r.updateOffset(this),x=!1)}function M(t){return t instanceof S||null!=t&&null!=t._isAMomentObject}function O(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function j(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=O(e)),i}function D(t,e,i){var r,n=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),s=0;for(r=0;r<n;r++)(i&&t[r]!==e[r]||!i&&j(t[r])!==j(e[r]))&&s++;return s+a}function P(t){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,e){var i=!0;return p((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),i){for(var n,a=[],s=0;s<arguments.length;s++){if(n="","object"===Object(u["a"])(arguments[s])){for(var o in n+="\n["+s+"] ",arguments[0])n+=o+": "+arguments[0][o]+", ";n=n.slice(0,-2)}else n=arguments[s];a.push(n)}P(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)}),e)}var Y,I={};function A(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),I[t]||(P(e),I[t]=!0)}function C(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function N(t){var e,i;for(i in t)e=t[i],C(e)?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function H(t,e){var i,r=p({},t);for(i in e)f(e,i)&&(s(t[i])&&s(e[i])?(r[i]={},p(r[i],t[i]),p(r[i],e[i])):null!=e[i]?r[i]=e[i]:delete r[i]);for(i in t)f(t,i)&&!f(e,i)&&s(t[i])&&(r[i]=p({},r[i]));return r}function q(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,Y=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)f(t,e)&&i.push(e);return i};var W={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function G(t,e,i){var r=this._calendar[t]||this._calendar["sameElse"];return C(r)?r.call(e,i):r}var L={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function E(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])}var R="Invalid date";function F(){return this._invalidDate}var z="%d",$=/\d{1,2}/;function U(t){return this._ordinal.replace("%d",t)}var V={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function B(t,e,i,r){var n=this._relativeTime[i];return C(n)?n(t,e,i,r):n.replace(/%d/i,t)}function Z(t,e){var i=this._relativeTime[t>0?"future":"past"];return C(i)?i(e):i.replace(/%s/i,e)}var K={};function J(t,e){var i=t.toLowerCase();K[i]=K[i+"s"]=K[e]=t}function Q(t){return"string"===typeof t?K[t]||K[t.toLowerCase()]:void 0}function X(t){var e,i,r={};for(i in t)f(t,i)&&(e=Q(i),e&&(r[e]=t[i]));return r}var tt={};function et(t,e){tt[t]=e}function it(t){var e=[];for(var i in t)e.push({unit:i,priority:tt[i]});return e.sort((function(t,e){return t.priority-e.priority})),e}function rt(t,e,i){var r=""+Math.abs(t),n=e-r.length,a=t>=0;return(a?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var nt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,at=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,st={},ot={};function ht(t,e,i,r){var n=r;"string"===typeof r&&(n=function(){return this[r]()}),t&&(ot[t]=n),e&&(ot[e[0]]=function(){return rt(n.apply(this,arguments),e[1],e[2])}),i&&(ot[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function ct(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function lt(t){var e,i,r=t.match(nt);for(e=0,i=r.length;e<i;e++)ot[r[e]]?r[e]=ot[r[e]]:r[e]=ct(r[e]);return function(e){var n,a="";for(n=0;n<i;n++)a+=C(r[n])?r[n].call(e,t):r[n];return a}}function ut(t,e){return t.isValid()?(e=dt(e,t.localeData()),st[e]=st[e]||lt(e),st[e](t)):t.localeData().invalidDate()}function dt(t,e){var i=5;function r(t){return e.longDateFormat(t)||t}at.lastIndex=0;while(i>=0&&at.test(t))t=t.replace(at,r),at.lastIndex=0,i-=1;return t}var ft=/\d/,mt=/\d\d/,pt=/\d{3}/,yt=/\d{4}/,gt=/[+-]?\d{6}/,vt=/\d\d?/,bt=/\d\d\d\d?/,_t=/\d\d\d\d\d\d?/,wt=/\d{1,3}/,kt=/\d{1,4}/,xt=/[+-]?\d{1,6}/,St=/\d+/,Mt=/[+-]?\d+/,Ot=/Z|[+-]\d\d:?\d\d/gi,jt=/Z|[+-]\d\d(?::?\d\d)?/gi,Dt=/[+-]?\d+(\.\d{1,3})?/,Pt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Tt={};function Yt(t,e,i){Tt[t]=C(e)?e:function(t,r){return t&&i?i:e}}function It(t,e){return f(Tt,t)?Tt[t](e._strict,e._locale):new RegExp(At(t))}function At(t){return Ct(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,i,r,n){return e||i||r||n})))}function Ct(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Nt={};function Ht(t,e){var i,r=e;for("string"===typeof t&&(t=[t]),c(e)&&(r=function(t,i){i[e]=j(t)}),i=0;i<t.length;i++)Nt[t[i]]=r}function qt(t,e){Ht(t,(function(t,i,r,n){r._w=r._w||{},e(t,r._w,r,n)}))}function Wt(t,e,i){null!=e&&f(Nt,t)&&Nt[t](e,i._a,i,t)}var Gt=0,Lt=1,Et=2,Rt=3,Ft=4,zt=5,$t=6,Ut=7,Vt=8;function Bt(t){return Zt(t)?366:365}function Zt(t){return t%4===0&&t%100!==0||t%400===0}ht("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),ht(0,["YY",2],0,(function(){return this.year()%100})),ht(0,["YYYY",4],0,"year"),ht(0,["YYYYY",5],0,"year"),ht(0,["YYYYYY",6,!0],0,"year"),J("year","y"),et("year",1),Yt("Y",Mt),Yt("YY",vt,mt),Yt("YYYY",kt,yt),Yt("YYYYY",xt,gt),Yt("YYYYYY",xt,gt),Ht(["YYYYY","YYYYYY"],Gt),Ht("YYYY",(function(t,e){e[Gt]=2===t.length?r.parseTwoDigitYear(t):j(t)})),Ht("YY",(function(t,e){e[Gt]=r.parseTwoDigitYear(t)})),Ht("Y",(function(t,e){e[Gt]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return j(t)+(j(t)>68?1900:2e3)};var Kt,Jt=Xt("FullYear",!0);function Qt(){return Zt(this.year())}function Xt(t,e){return function(i){return null!=i?(ee(this,t,i),r.updateOffset(this,e),this):te(this,t)}}function te(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function ee(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&Zt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),ae(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function ie(t){return t=Q(t),C(this[t])?this[t]():this}function re(t,e){if("object"===Object(u["a"])(t)){t=X(t);for(var i=it(t),r=0;r<i.length;r++)this[i[r].unit](t[i[r].unit])}else if(t=Q(t),C(this[t]))return this[t](e);return this}function ne(t,e){return(t%e+e)%e}function ae(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=ne(e,12);return t+=(e-i)/12,1===i?Zt(t)?29:28:31-i%7%2}Kt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},ht("M",["MM",2],"Mo",(function(){return this.month()+1})),ht("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),ht("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),J("month","M"),et("month",8),Yt("M",vt),Yt("MM",vt,mt),Yt("MMM",(function(t,e){return e.monthsShortRegex(t)})),Yt("MMMM",(function(t,e){return e.monthsRegex(t)})),Ht(["M","MM"],(function(t,e){e[Lt]=j(t)-1})),Ht(["MMM","MMMM"],(function(t,e,i,r){var n=i._locale.monthsParse(t,r,i._strict);null!=n?e[Lt]=n:v(i).invalidMonth=t}));var se=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,oe="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function he(t,e){return t?a(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||se).test(e)?"format":"standalone"][t.month()]:a(this._months)?this._months:this._months["standalone"]}var ce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function le(t,e){return t?a(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[se.test(e)?"format":"standalone"][t.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}function ue(t,e,i){var r,n,a,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=y([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return i?"MMM"===e?(n=Kt.call(this._shortMonthsParse,s),-1!==n?n:null):(n=Kt.call(this._longMonthsParse,s),-1!==n?n:null):"MMM"===e?(n=Kt.call(this._shortMonthsParse,s),-1!==n?n:(n=Kt.call(this._longMonthsParse,s),-1!==n?n:null)):(n=Kt.call(this._longMonthsParse,s),-1!==n?n:(n=Kt.call(this._shortMonthsParse,s),-1!==n?n:null))}function de(t,e,i){var r,n,a;if(this._monthsParseExact)return ue.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=y([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(i&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!i&&this._monthsParse[r].test(t))return r}}function fe(t,e){var i;if(!t.isValid())return t;if("string"===typeof e)if(/^\d+$/.test(e))e=j(e);else if(e=t.localeData().monthsParse(e),!c(e))return t;return i=Math.min(t.date(),ae(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function me(t){return null!=t?(fe(this,t),r.updateOffset(this,!0),this):te(this,"Month")}function pe(){return ae(this.year(),this.month())}var ye=Pt;function ge(t){return this._monthsParseExact?(f(this,"_monthsRegex")||_e.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(f(this,"_monthsShortRegex")||(this._monthsShortRegex=ye),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}var ve=Pt;function be(t){return this._monthsParseExact?(f(this,"_monthsRegex")||_e.call(this),t?this._monthsStrictRegex:this._monthsRegex):(f(this,"_monthsRegex")||(this._monthsRegex=ve),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function _e(){function t(t,e){return e.length-t.length}var e,i,r=[],n=[],a=[];for(e=0;e<12;e++)i=y([2e3,e]),r.push(this.monthsShort(i,"")),n.push(this.months(i,"")),a.push(this.months(i,"")),a.push(this.monthsShort(i,""));for(r.sort(t),n.sort(t),a.sort(t),e=0;e<12;e++)r[e]=Ct(r[e]),n[e]=Ct(n[e]);for(e=0;e<24;e++)a[e]=Ct(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function we(t,e,i,r,n,a,s){var o;return t<100&&t>=0?(o=new Date(t+400,e,i,r,n,a,s),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,i,r,n,a,s),o}function ke(t){var e;if(t<100&&t>=0){var i=Array.prototype.slice.call(arguments);i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function xe(t,e,i){var r=7+e-i,n=(7+ke(t,0,r).getUTCDay()-e)%7;return-n+r-1}function Se(t,e,i,r,n){var a,s,o=(7+i-r)%7,h=xe(t,r,n),c=1+7*(e-1)+o+h;return c<=0?(a=t-1,s=Bt(a)+c):c>Bt(t)?(a=t+1,s=c-Bt(t)):(a=t,s=c),{year:a,dayOfYear:s}}function Me(t,e,i){var r,n,a=xe(t.year(),e,i),s=Math.floor((t.dayOfYear()-a-1)/7)+1;return s<1?(n=t.year()-1,r=s+Oe(n,e,i)):s>Oe(t.year(),e,i)?(r=s-Oe(t.year(),e,i),n=t.year()+1):(n=t.year(),r=s),{week:r,year:n}}function Oe(t,e,i){var r=xe(t,e,i),n=xe(t+1,e,i);return(Bt(t)-r+n)/7}function je(t){return Me(t,this._week.dow,this._week.doy).week}ht("w",["ww",2],"wo","week"),ht("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),et("week",5),et("isoWeek",5),Yt("w",vt),Yt("ww",vt,mt),Yt("W",vt),Yt("WW",vt,mt),qt(["w","ww","W","WW"],(function(t,e,i,r){e[r.substr(0,1)]=j(t)}));var De={dow:0,doy:6};function Pe(){return this._week.dow}function Te(){return this._week.doy}function Ye(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ie(t){var e=Me(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Ae(t,e){return"string"!==typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"===typeof t?t:null):parseInt(t,10)}function Ce(t,e){return"string"===typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Ne(t,e){return t.slice(e,7).concat(t.slice(0,e))}ht("d",0,"do","day"),ht("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),ht("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),ht("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),ht("e",0,0,"weekday"),ht("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),et("day",11),et("weekday",11),et("isoWeekday",11),Yt("d",vt),Yt("e",vt),Yt("E",vt),Yt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),Yt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),Yt("dddd",(function(t,e){return e.weekdaysRegex(t)})),qt(["dd","ddd","dddd"],(function(t,e,i,r){var n=i._locale.weekdaysParse(t,r,i._strict);null!=n?e.d=n:v(i).invalidWeekday=t})),qt(["d","e","E"],(function(t,e,i,r){e[r]=j(t)}));var He="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function qe(t,e){var i=a(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Ne(i,this._week.dow):t?i[t.day()]:i}var We="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Ge(t){return!0===t?Ne(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}var Le="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ee(t){return!0===t?Ne(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Re(t,e,i){var r,n,a,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=y([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return i?"dddd"===e?(n=Kt.call(this._weekdaysParse,s),-1!==n?n:null):"ddd"===e?(n=Kt.call(this._shortWeekdaysParse,s),-1!==n?n:null):(n=Kt.call(this._minWeekdaysParse,s),-1!==n?n:null):"dddd"===e?(n=Kt.call(this._weekdaysParse,s),-1!==n?n:(n=Kt.call(this._shortWeekdaysParse,s),-1!==n?n:(n=Kt.call(this._minWeekdaysParse,s),-1!==n?n:null))):"ddd"===e?(n=Kt.call(this._shortWeekdaysParse,s),-1!==n?n:(n=Kt.call(this._weekdaysParse,s),-1!==n?n:(n=Kt.call(this._minWeekdaysParse,s),-1!==n?n:null))):(n=Kt.call(this._minWeekdaysParse,s),-1!==n?n:(n=Kt.call(this._weekdaysParse,s),-1!==n?n:(n=Kt.call(this._shortWeekdaysParse,s),-1!==n?n:null)))}function Fe(t,e,i){var r,n,a;if(this._weekdaysParseExact)return Re.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=y([2e3,1]).day(r),i&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(i&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(i&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!i&&this._weekdaysParse[r].test(t))return r}}function ze(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Ae(t,this.localeData()),this.add(t-e,"d")):e}function $e(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ue(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Ce(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}var Ve=Pt;function Be(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(f(this,"_weekdaysRegex")||(this._weekdaysRegex=Ve),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}var Ze=Pt;function Ke(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(f(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ze),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}var Je=Pt;function Qe(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(f(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xe(){function t(t,e){return e.length-t.length}var e,i,r,n,a,s=[],o=[],h=[],c=[];for(e=0;e<7;e++)i=y([2e3,1]).day(e),r=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),a=this.weekdays(i,""),s.push(r),o.push(n),h.push(a),c.push(r),c.push(n),c.push(a);for(s.sort(t),o.sort(t),h.sort(t),c.sort(t),e=0;e<7;e++)o[e]=Ct(o[e]),h[e]=Ct(h[e]),c[e]=Ct(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function ti(){return this.hours()%12||12}function ei(){return this.hours()||24}function ii(t,e){ht(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function ri(t,e){return e._meridiemParse}function ni(t){return"p"===(t+"").toLowerCase().charAt(0)}ht("H",["HH",2],0,"hour"),ht("h",["hh",2],0,ti),ht("k",["kk",2],0,ei),ht("hmm",0,0,(function(){return""+ti.apply(this)+rt(this.minutes(),2)})),ht("hmmss",0,0,(function(){return""+ti.apply(this)+rt(this.minutes(),2)+rt(this.seconds(),2)})),ht("Hmm",0,0,(function(){return""+this.hours()+rt(this.minutes(),2)})),ht("Hmmss",0,0,(function(){return""+this.hours()+rt(this.minutes(),2)+rt(this.seconds(),2)})),ii("a",!0),ii("A",!1),J("hour","h"),et("hour",13),Yt("a",ri),Yt("A",ri),Yt("H",vt),Yt("h",vt),Yt("k",vt),Yt("HH",vt,mt),Yt("hh",vt,mt),Yt("kk",vt,mt),Yt("hmm",bt),Yt("hmmss",_t),Yt("Hmm",bt),Yt("Hmmss",_t),Ht(["H","HH"],Rt),Ht(["k","kk"],(function(t,e,i){var r=j(t);e[Rt]=24===r?0:r})),Ht(["a","A"],(function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t})),Ht(["h","hh"],(function(t,e,i){e[Rt]=j(t),v(i).bigHour=!0})),Ht("hmm",(function(t,e,i){var r=t.length-2;e[Rt]=j(t.substr(0,r)),e[Ft]=j(t.substr(r)),v(i).bigHour=!0})),Ht("hmmss",(function(t,e,i){var r=t.length-4,n=t.length-2;e[Rt]=j(t.substr(0,r)),e[Ft]=j(t.substr(r,2)),e[zt]=j(t.substr(n)),v(i).bigHour=!0})),Ht("Hmm",(function(t,e,i){var r=t.length-2;e[Rt]=j(t.substr(0,r)),e[Ft]=j(t.substr(r))})),Ht("Hmmss",(function(t,e,i){var r=t.length-4,n=t.length-2;e[Rt]=j(t.substr(0,r)),e[Ft]=j(t.substr(r,2)),e[zt]=j(t.substr(n))}));var ai=/[ap]\.?m?\.?/i;function si(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}var oi,hi=Xt("Hours",!0),ci={calendar:W,longDateFormat:L,invalidDate:R,ordinal:z,dayOfMonthOrdinalParse:$,relativeTime:V,months:oe,monthsShort:ce,week:De,weekdays:He,weekdaysMin:Le,weekdaysShort:We,meridiemParse:ai},li={},ui={};function di(t){return t?t.toLowerCase().replace("_","-"):t}function fi(t){var e,i,r,n,a=0;while(a<t.length){n=di(t[a]).split("-"),e=n.length,i=di(t[a+1]),i=i?i.split("-"):null;while(e>0){if(r=mi(n.slice(0,e).join("-")),r)return r;if(i&&i.length>=e&&D(n,i,!0)>=e-1)break;e--}a++}return oi}function mi(e){var i=null;if(!li[e]&&t&&t.exports)try{i=oi._abbr;var r=m;r("./locale/"+e),pi(i)}catch(n){}return li[e]}function pi(t,e){var i;return t&&(i=h(e)?vi(t):yi(t,e),i?oi=i:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),oi._abbr}function yi(t,e){if(null!==e){var i,r=ci;if(e.abbr=t,null!=li[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=li[t]._config;else if(null!=e.parentLocale)if(null!=li[e.parentLocale])r=li[e.parentLocale]._config;else{if(i=mi(e.parentLocale),null==i)return ui[e.parentLocale]||(ui[e.parentLocale]=[]),ui[e.parentLocale].push({name:t,config:e}),null;r=i._config}return li[t]=new q(H(r,e)),ui[t]&&ui[t].forEach((function(t){yi(t.name,t.config)})),pi(t),li[t]}return delete li[t],null}function gi(t,e){if(null!=e){var i,r,n=ci;r=mi(t),null!=r&&(n=r._config),e=H(n,e),i=new q(e),i.parentLocale=li[t],li[t]=i,pi(t)}else null!=li[t]&&(null!=li[t].parentLocale?li[t]=li[t].parentLocale:null!=li[t]&&delete li[t]);return li[t]}function vi(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return oi;if(!a(t)){if(e=mi(t),e)return e;t=[t]}return fi(t)}function bi(){return Y(li)}function _i(t){var e,i=t._a;return i&&-2===v(t).overflow&&(e=i[Lt]<0||i[Lt]>11?Lt:i[Et]<1||i[Et]>ae(i[Gt],i[Lt])?Et:i[Rt]<0||i[Rt]>24||24===i[Rt]&&(0!==i[Ft]||0!==i[zt]||0!==i[$t])?Rt:i[Ft]<0||i[Ft]>59?Ft:i[zt]<0||i[zt]>59?zt:i[$t]<0||i[$t]>999?$t:-1,v(t)._overflowDayOfYear&&(e<Gt||e>Et)&&(e=Et),v(t)._overflowWeeks&&-1===e&&(e=Ut),v(t)._overflowWeekday&&-1===e&&(e=Vt),v(t).overflow=e),t}function wi(t,e,i){return null!=t?t:null!=e?e:i}function ki(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function xi(t){var e,i,r,n,a,s=[];if(!t._d){for(r=ki(t),t._w&&null==t._a[Et]&&null==t._a[Lt]&&Si(t),null!=t._dayOfYear&&(a=wi(t._a[Gt],r[Gt]),(t._dayOfYear>Bt(a)||0===t._dayOfYear)&&(v(t)._overflowDayOfYear=!0),i=ke(a,0,t._dayOfYear),t._a[Lt]=i.getUTCMonth(),t._a[Et]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Rt]&&0===t._a[Ft]&&0===t._a[zt]&&0===t._a[$t]&&(t._nextDay=!0,t._a[Rt]=0),t._d=(t._useUTC?ke:we).apply(null,s),n=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Rt]=24),t._w&&"undefined"!==typeof t._w.d&&t._w.d!==n&&(v(t).weekdayMismatch=!0)}}function Si(t){var e,i,r,n,a,s,o,h;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)a=1,s=4,i=wi(e.GG,t._a[Gt],Me(Zi(),1,4).year),r=wi(e.W,1),n=wi(e.E,1),(n<1||n>7)&&(h=!0);else{a=t._locale._week.dow,s=t._locale._week.doy;var c=Me(Zi(),a,s);i=wi(e.gg,t._a[Gt],c.year),r=wi(e.w,c.week),null!=e.d?(n=e.d,(n<0||n>6)&&(h=!0)):null!=e.e?(n=e.e+a,(e.e<0||e.e>6)&&(h=!0)):n=a}r<1||r>Oe(i,a,s)?v(t)._overflowWeeks=!0:null!=h?v(t)._overflowWeekday=!0:(o=Se(i,r,n,a,s),t._a[Gt]=o.year,t._dayOfYear=o.dayOfYear)}var Mi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Oi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ji=/Z|[+-]\d\d(?::?\d\d)?/,Di=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Pi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ti=/^\/?Date\((\-?\d+)/i;function Yi(t){var e,i,r,n,a,s,o=t._i,h=Mi.exec(o)||Oi.exec(o);if(h){for(v(t).iso=!0,e=0,i=Di.length;e<i;e++)if(Di[e][1].exec(h[1])){n=Di[e][0],r=!1!==Di[e][2];break}if(null==n)return void(t._isValid=!1);if(h[3]){for(e=0,i=Pi.length;e<i;e++)if(Pi[e][1].exec(h[3])){a=(h[2]||" ")+Pi[e][0];break}if(null==a)return void(t._isValid=!1)}if(!r&&null!=a)return void(t._isValid=!1);if(h[4]){if(!ji.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=n+(a||"")+(s||""),Ei(t)}else t._isValid=!1}var Ii=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Ai(t,e,i,r,n,a){var s=[Ci(t),ce.indexOf(e),parseInt(i,10),parseInt(r,10),parseInt(n,10)];return a&&s.push(parseInt(a,10)),s}function Ci(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Ni(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Hi(t,e,i){if(t){var r=We.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return v(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}var qi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Wi(t,e,i){if(t)return qi[t];if(e)return 0;var r=parseInt(i,10),n=r%100,a=(r-n)/100;return 60*a+n}function Gi(t){var e=Ii.exec(Ni(t._i));if(e){var i=Ai(e[4],e[3],e[2],e[5],e[6],e[7]);if(!Hi(e[1],i,t))return;t._a=i,t._tzm=Wi(e[8],e[9],e[10]),t._d=ke.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),v(t).rfc2822=!0}else t._isValid=!1}function Li(t){var e=Ti.exec(t._i);null===e?(Yi(t),!1===t._isValid&&(delete t._isValid,Gi(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Ei(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],v(t).empty=!0;var e,i,n,a,s,o=""+t._i,h=o.length,c=0;for(n=dt(t._f,t._locale).match(nt)||[],e=0;e<n.length;e++)a=n[e],i=(o.match(It(a,t))||[])[0],i&&(s=o.substr(0,o.indexOf(i)),s.length>0&&v(t).unusedInput.push(s),o=o.slice(o.indexOf(i)+i.length),c+=i.length),ot[a]?(i?v(t).empty=!1:v(t).unusedTokens.push(a),Wt(a,i,t)):t._strict&&!i&&v(t).unusedTokens.push(a);v(t).charsLeftOver=h-c,o.length>0&&v(t).unusedInput.push(o),t._a[Rt]<=12&&!0===v(t).bigHour&&t._a[Rt]>0&&(v(t).bigHour=void 0),v(t).parsedDateParts=t._a.slice(0),v(t).meridiem=t._meridiem,t._a[Rt]=Ri(t._locale,t._a[Rt],t._meridiem),xi(t),_i(t)}else Gi(t);else Yi(t)}function Ri(t,e,i){var r;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(r=t.isPM(i),r&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function Fi(t){var e,i,r,n,a;if(0===t._f.length)return v(t).invalidFormat=!0,void(t._d=new Date(NaN));for(n=0;n<t._f.length;n++)a=0,e=k({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[n],Ei(e),b(e)&&(a+=v(e).charsLeftOver,a+=10*v(e).unusedTokens.length,v(e).score=a,(null==r||a<r)&&(r=a,i=e));p(t,i||e)}function zi(t){if(!t._d){var e=X(t._i);t._a=d([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),xi(t)}}function $i(t){var e=new S(_i(Ui(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ui(t){var e=t._i,i=t._f;return t._locale=t._locale||vi(t._l),null===e||void 0===i&&""===e?_({nullInput:!0}):("string"===typeof e&&(t._i=e=t._locale.preparse(e)),M(e)?new S(_i(e)):(l(e)?t._d=e:a(i)?Fi(t):i?Ei(t):Vi(t),b(t)||(t._d=null),t))}function Vi(t){var e=t._i;h(e)?t._d=new Date(r.now()):l(e)?t._d=new Date(e.valueOf()):"string"===typeof e?Li(t):a(e)?(t._a=d(e.slice(0),(function(t){return parseInt(t,10)})),xi(t)):s(e)?zi(t):c(e)?t._d=new Date(e):r.createFromInputFallback(t)}function Bi(t,e,i,r,n){var h={};return!0!==i&&!1!==i||(r=i,i=void 0),(s(t)&&o(t)||a(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=n,h._l=i,h._i=t,h._f=e,h._strict=r,$i(h)}function Zi(t,e,i,r){return Bi(t,e,i,r,!1)}r.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Ki=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Zi.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:_()})),Ji=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Zi.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:_()}));function Qi(t,e){var i,r;if(1===e.length&&a(e[0])&&(e=e[0]),!e.length)return Zi();for(i=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](i)||(i=e[r]);return i}function Xi(){var t=[].slice.call(arguments,0);return Qi("isBefore",t)}function tr(){var t=[].slice.call(arguments,0);return Qi("isAfter",t)}var er=function(){return Date.now?Date.now():+new Date},ir=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(t){for(var e in t)if(-1===Kt.call(ir,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,r=0;r<ir.length;++r)if(t[ir[r]]){if(i)return!1;parseFloat(t[ir[r]])!==j(t[ir[r]])&&(i=!0)}return!0}function nr(){return this._isValid}function ar(){return jr(NaN)}function sr(t){var e=X(t),i=e.year||0,r=e.quarter||0,n=e.month||0,a=e.week||e.isoWeek||0,s=e.day||0,o=e.hour||0,h=e.minute||0,c=e.second||0,l=e.millisecond||0;this._isValid=rr(e),this._milliseconds=+l+1e3*c+6e4*h+1e3*o*60*60,this._days=+s+7*a,this._months=+n+3*r+12*i,this._data={},this._locale=vi(),this._bubble()}function or(t){return t instanceof sr}function hr(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function cr(t,e){ht(t,0,0,(function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+rt(~~(t/60),2)+e+rt(~~t%60,2)}))}cr("Z",":"),cr("ZZ",""),Yt("Z",jt),Yt("ZZ",jt),Ht(["Z","ZZ"],(function(t,e,i){i._useUTC=!0,i._tzm=ur(jt,t)}));var lr=/([\+\-]|\d\d)/gi;function ur(t,e){var i=(e||"").match(t);if(null===i)return null;var r=i[i.length-1]||[],n=(r+"").match(lr)||["-",0,0],a=60*n[1]+j(n[2]);return 0===a?0:"+"===n[0]?a:-a}function dr(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(M(t)||l(t)?t.valueOf():Zi(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),r.updateOffset(i,!1),i):Zi(t).local()}function fr(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function mr(t,e,i){var n,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"===typeof t){if(t=ur(jt,t),null===t)return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(n=fr(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),a!==t&&(!e||this._changeInProgress?Ir(this,jr(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:fr(this)}function pr(t,e){return null!=t?("string"!==typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function yr(t){return this.utcOffset(0,t)}function gr(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(fr(this),"m")),this}function vr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var t=ur(Ot,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function br(t){return!!this.isValid()&&(t=t?Zi(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function _r(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wr(){if(!h(this._isDSTShifted))return this._isDSTShifted;var t={};if(k(t,this),t=Ui(t),t._a){var e=t._isUTC?y(t._a):Zi(t._a);this._isDSTShifted=this.isValid()&&D(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function kr(){return!!this.isValid()&&!this._isUTC}function xr(){return!!this.isValid()&&this._isUTC}function Sr(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}r.updateOffset=function(){};var Mr=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Or=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function jr(t,e){var i,r,n,a=t,s=null;return or(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:c(t)?(a={},e?a[e]=t:a.milliseconds=t):(s=Mr.exec(t))?(i="-"===s[1]?-1:1,a={y:0,d:j(s[Et])*i,h:j(s[Rt])*i,m:j(s[Ft])*i,s:j(s[zt])*i,ms:j(hr(1e3*s[$t]))*i}):(s=Or.exec(t))?(i="-"===s[1]?-1:1,a={y:Dr(s[2],i),M:Dr(s[3],i),w:Dr(s[4],i),d:Dr(s[5],i),h:Dr(s[6],i),m:Dr(s[7],i),s:Dr(s[8],i)}):null==a?a={}:"object"===Object(u["a"])(a)&&("from"in a||"to"in a)&&(n=Tr(Zi(a.from),Zi(a.to)),a={},a.ms=n.milliseconds,a.M=n.months),r=new sr(a),or(t)&&f(t,"_locale")&&(r._locale=t._locale),r}function Dr(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Pr(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Tr(t,e){var i;return t.isValid()&&e.isValid()?(e=dr(e,t),t.isBefore(e)?i=Pr(t,e):(i=Pr(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Yr(t,e){return function(i,r){var n,a;return null===r||isNaN(+r)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=i,i=r,r=a),i="string"===typeof i?+i:i,n=jr(i,r),Ir(this,n,t),this}}function Ir(t,e,i,n){var a=e._milliseconds,s=hr(e._days),o=hr(e._months);t.isValid()&&(n=null==n||n,o&&fe(t,te(t,"Month")+o*i),s&&ee(t,"Date",te(t,"Date")+s*i),a&&t._d.setTime(t._d.valueOf()+a*i),n&&r.updateOffset(t,s||o))}jr.fn=sr.prototype,jr.invalid=ar;var Ar=Yr(1,"add"),Cr=Yr(-1,"subtract");function Nr(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Hr(t,e){var i=t||Zi(),n=dr(i,this).startOf("day"),a=r.calendarFormat(this,n)||"sameElse",s=e&&(C(e[a])?e[a].call(this,i):e[a]);return this.format(s||this.localeData().calendar(a,this,Zi(i)))}function qr(){return new S(this)}function Wr(t,e){var i=M(t)?t:Zi(t);return!(!this.isValid()||!i.isValid())&&(e=Q(e)||"millisecond","millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function Gr(t,e){var i=M(t)?t:Zi(t);return!(!this.isValid()||!i.isValid())&&(e=Q(e)||"millisecond","millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function Lr(t,e,i,r){var n=M(t)?t:Zi(t),a=M(e)?e:Zi(e);return!!(this.isValid()&&n.isValid()&&a.isValid())&&(r=r||"()",("("===r[0]?this.isAfter(n,i):!this.isBefore(n,i))&&(")"===r[1]?this.isBefore(a,i):!this.isAfter(a,i)))}function Er(t,e){var i,r=M(t)?t:Zi(t);return!(!this.isValid()||!r.isValid())&&(e=Q(e)||"millisecond","millisecond"===e?this.valueOf()===r.valueOf():(i=r.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function Rr(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Fr(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function zr(t,e,i){var r,n,a;if(!this.isValid())return NaN;if(r=dr(t,this),!r.isValid())return NaN;switch(n=6e4*(r.utcOffset()-this.utcOffset()),e=Q(e),e){case"year":a=$r(this,r)/12;break;case"month":a=$r(this,r);break;case"quarter":a=$r(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-n)/864e5;break;case"week":a=(this-r-n)/6048e5;break;default:a=this-r}return i?a:O(a)}function $r(t,e){var i,r,n=12*(e.year()-t.year())+(e.month()-t.month()),a=t.clone().add(n,"months");return e-a<0?(i=t.clone().add(n-1,"months"),r=(e-a)/(a-i)):(i=t.clone().add(n+1,"months"),r=(e-a)/(i-a)),-(n+r)||0}function Ur(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Vr(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?ut(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",ut(i,"Z")):ut(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Br(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",a=e+'[")]';return this.format(i+r+n+a)}function Zr(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=ut(this,t);return this.localeData().postformat(e)}function Kr(t,e){return this.isValid()&&(M(t)&&t.isValid()||Zi(t).isValid())?jr({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Jr(t){return this.from(Zi(),t)}function Qr(t,e){return this.isValid()&&(M(t)&&t.isValid()||Zi(t).isValid())?jr({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Xr(t){return this.to(Zi(),t)}function tn(t){var e;return void 0===t?this._locale._abbr:(e=vi(t),null!=e&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var en=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function rn(){return this._locale}var nn=1e3,an=60*nn,sn=60*an,on=3506328*sn;function hn(t,e){return(t%e+e)%e}function cn(t,e,i){return t<100&&t>=0?new Date(t+400,e,i)-on:new Date(t,e,i).valueOf()}function ln(t,e,i){return t<100&&t>=0?Date.UTC(t+400,e,i)-on:Date.UTC(t,e,i)}function un(t){var e;if(t=Q(t),void 0===t||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?ln:cn;switch(t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=hn(e+(this._isUTC?0:this.utcOffset()*an),sn);break;case"minute":e=this._d.valueOf(),e-=hn(e,an);break;case"second":e=this._d.valueOf(),e-=hn(e,nn);break}return this._d.setTime(e),r.updateOffset(this,!0),this}function dn(t){var e;if(t=Q(t),void 0===t||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?ln:cn;switch(t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=sn-hn(e+(this._isUTC?0:this.utcOffset()*an),sn)-1;break;case"minute":e=this._d.valueOf(),e+=an-hn(e,an)-1;break;case"second":e=this._d.valueOf(),e+=nn-hn(e,nn)-1;break}return this._d.setTime(e),r.updateOffset(this,!0),this}function fn(){return this._d.valueOf()-6e4*(this._offset||0)}function mn(){return Math.floor(this.valueOf()/1e3)}function pn(){return new Date(this.valueOf())}function yn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function gn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function vn(){return this.isValid()?this.toISOString():null}function bn(){return b(this)}function _n(){return p({},v(this))}function wn(){return v(this).overflow}function kn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xn(t,e){ht(0,[t,t.length],0,e)}function Sn(t){return Dn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Mn(t){return Dn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function On(){return Oe(this.year(),1,4)}function jn(){var t=this.localeData()._week;return Oe(this.year(),t.dow,t.doy)}function Dn(t,e,i,r,n){var a;return null==t?Me(this,r,n).year:(a=Oe(t,r,n),e>a&&(e=a),Pn.call(this,t,e,i,r,n))}function Pn(t,e,i,r,n){var a=Se(t,e,i,r,n),s=ke(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Tn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}ht(0,["gg",2],0,(function(){return this.weekYear()%100})),ht(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),xn("gggg","weekYear"),xn("ggggg","weekYear"),xn("GGGG","isoWeekYear"),xn("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),et("weekYear",1),et("isoWeekYear",1),Yt("G",Mt),Yt("g",Mt),Yt("GG",vt,mt),Yt("gg",vt,mt),Yt("GGGG",kt,yt),Yt("gggg",kt,yt),Yt("GGGGG",xt,gt),Yt("ggggg",xt,gt),qt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,i,r){e[r.substr(0,2)]=j(t)})),qt(["gg","GG"],(function(t,e,i,n){e[n]=r.parseTwoDigitYear(t)})),ht("Q",0,"Qo","quarter"),J("quarter","Q"),et("quarter",7),Yt("Q",ft),Ht("Q",(function(t,e){e[Lt]=3*(j(t)-1)})),ht("D",["DD",2],"Do","date"),J("date","D"),et("date",9),Yt("D",vt),Yt("DD",vt,mt),Yt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Ht(["D","DD"],Et),Ht("Do",(function(t,e){e[Et]=j(t.match(vt)[0])}));var Yn=Xt("Date",!0);function In(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}ht("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),et("dayOfYear",4),Yt("DDD",wt),Yt("DDDD",pt),Ht(["DDD","DDDD"],(function(t,e,i){i._dayOfYear=j(t)})),ht("m",["mm",2],0,"minute"),J("minute","m"),et("minute",14),Yt("m",vt),Yt("mm",vt,mt),Ht(["m","mm"],Ft);var An=Xt("Minutes",!1);ht("s",["ss",2],0,"second"),J("second","s"),et("second",15),Yt("s",vt),Yt("ss",vt,mt),Ht(["s","ss"],zt);var Cn,Nn=Xt("Seconds",!1);for(ht("S",0,0,(function(){return~~(this.millisecond()/100)})),ht(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),ht(0,["SSS",3],0,"millisecond"),ht(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),ht(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),ht(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),ht(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),ht(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),ht(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),J("millisecond","ms"),et("millisecond",16),Yt("S",wt,ft),Yt("SS",wt,mt),Yt("SSS",wt,pt),Cn="SSSS";Cn.length<=9;Cn+="S")Yt(Cn,St);function Hn(t,e){e[$t]=j(1e3*("0."+t))}for(Cn="S";Cn.length<=9;Cn+="S")Ht(Cn,Hn);var qn=Xt("Milliseconds",!1);function Wn(){return this._isUTC?"UTC":""}function Gn(){return this._isUTC?"Coordinated Universal Time":""}ht("z",0,0,"zoneAbbr"),ht("zz",0,0,"zoneName");var Ln=S.prototype;function En(t){return Zi(1e3*t)}function Rn(){return Zi.apply(null,arguments).parseZone()}function Fn(t){return t}Ln.add=Ar,Ln.calendar=Hr,Ln.clone=qr,Ln.diff=zr,Ln.endOf=dn,Ln.format=Zr,Ln.from=Kr,Ln.fromNow=Jr,Ln.to=Qr,Ln.toNow=Xr,Ln.get=ie,Ln.invalidAt=wn,Ln.isAfter=Wr,Ln.isBefore=Gr,Ln.isBetween=Lr,Ln.isSame=Er,Ln.isSameOrAfter=Rr,Ln.isSameOrBefore=Fr,Ln.isValid=bn,Ln.lang=en,Ln.locale=tn,Ln.localeData=rn,Ln.max=Ji,Ln.min=Ki,Ln.parsingFlags=_n,Ln.set=re,Ln.startOf=un,Ln.subtract=Cr,Ln.toArray=yn,Ln.toObject=gn,Ln.toDate=pn,Ln.toISOString=Vr,Ln.inspect=Br,Ln.toJSON=vn,Ln.toString=Ur,Ln.unix=mn,Ln.valueOf=fn,Ln.creationData=kn,Ln.year=Jt,Ln.isLeapYear=Qt,Ln.weekYear=Sn,Ln.isoWeekYear=Mn,Ln.quarter=Ln.quarters=Tn,Ln.month=me,Ln.daysInMonth=pe,Ln.week=Ln.weeks=Ye,Ln.isoWeek=Ln.isoWeeks=Ie,Ln.weeksInYear=jn,Ln.isoWeeksInYear=On,Ln.date=Yn,Ln.day=Ln.days=ze,Ln.weekday=$e,Ln.isoWeekday=Ue,Ln.dayOfYear=In,Ln.hour=Ln.hours=hi,Ln.minute=Ln.minutes=An,Ln.second=Ln.seconds=Nn,Ln.millisecond=Ln.milliseconds=qn,Ln.utcOffset=mr,Ln.utc=yr,Ln.local=gr,Ln.parseZone=vr,Ln.hasAlignedHourOffset=br,Ln.isDST=_r,Ln.isLocal=kr,Ln.isUtcOffset=xr,Ln.isUtc=Sr,Ln.isUTC=Sr,Ln.zoneAbbr=Wn,Ln.zoneName=Gn,Ln.dates=T("dates accessor is deprecated. Use date instead.",Yn),Ln.months=T("months accessor is deprecated. Use month instead",me),Ln.years=T("years accessor is deprecated. Use year instead",Jt),Ln.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",pr),Ln.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wr);var zn=q.prototype;function $n(t,e,i,r){var n=vi(),a=y().set(r,e);return n[i](a,t)}function Un(t,e,i){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return $n(t,e,i,"month");var r,n=[];for(r=0;r<12;r++)n[r]=$n(t,r,i,"month");return n}function Vn(t,e,i,r){"boolean"===typeof t?(c(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,c(e)&&(i=e,e=void 0),e=e||"");var n,a=vi(),s=t?a._week.dow:0;if(null!=i)return $n(e,(i+s)%7,r,"day");var o=[];for(n=0;n<7;n++)o[n]=$n(e,(n+s)%7,r,"day");return o}function Bn(t,e){return Un(t,e,"months")}function Zn(t,e){return Un(t,e,"monthsShort")}function Kn(t,e,i){return Vn(t,e,i,"weekdays")}function Jn(t,e,i){return Vn(t,e,i,"weekdaysShort")}function Qn(t,e,i){return Vn(t,e,i,"weekdaysMin")}zn.calendar=G,zn.longDateFormat=E,zn.invalidDate=F,zn.ordinal=U,zn.preparse=Fn,zn.postformat=Fn,zn.relativeTime=B,zn.pastFuture=Z,zn.set=N,zn.months=he,zn.monthsShort=le,zn.monthsParse=de,zn.monthsRegex=be,zn.monthsShortRegex=ge,zn.week=je,zn.firstDayOfYear=Te,zn.firstDayOfWeek=Pe,zn.weekdays=qe,zn.weekdaysMin=Ee,zn.weekdaysShort=Ge,zn.weekdaysParse=Fe,zn.weekdaysRegex=Be,zn.weekdaysShortRegex=Ke,zn.weekdaysMinRegex=Qe,zn.isPM=ni,zn.meridiem=si,pi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===j(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),r.lang=T("moment.lang is deprecated. Use moment.locale instead.",pi),r.langData=T("moment.langData is deprecated. Use moment.localeData instead.",vi);var Xn=Math.abs;function ta(){var t=this._data;return this._milliseconds=Xn(this._milliseconds),this._days=Xn(this._days),this._months=Xn(this._months),t.milliseconds=Xn(t.milliseconds),t.seconds=Xn(t.seconds),t.minutes=Xn(t.minutes),t.hours=Xn(t.hours),t.months=Xn(t.months),t.years=Xn(t.years),this}function ea(t,e,i,r){var n=jr(e,i);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function ia(t,e){return ea(this,t,e,1)}function ra(t,e){return ea(this,t,e,-1)}function na(t){return t<0?Math.floor(t):Math.ceil(t)}function aa(){var t,e,i,r,n,a=this._milliseconds,s=this._days,o=this._months,h=this._data;return a>=0&&s>=0&&o>=0||a<=0&&s<=0&&o<=0||(a+=864e5*na(oa(o)+s),s=0,o=0),h.milliseconds=a%1e3,t=O(a/1e3),h.seconds=t%60,e=O(t/60),h.minutes=e%60,i=O(e/60),h.hours=i%24,s+=O(i/24),n=O(sa(s)),o+=n,s-=na(oa(n)),r=O(o/12),o%=12,h.days=s,h.months=o,h.years=r,this}function sa(t){return 4800*t/146097}function oa(t){return 146097*t/4800}function ha(t){if(!this.isValid())return NaN;var e,i,r=this._milliseconds;if(t=Q(t),"month"===t||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,i=this._months+sa(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(oa(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function ca(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*j(this._months/12):NaN}function la(t){return function(){return this.as(t)}}var ua=la("ms"),da=la("s"),fa=la("m"),ma=la("h"),pa=la("d"),ya=la("w"),ga=la("M"),va=la("Q"),ba=la("y");function _a(){return jr(this)}function wa(t){return t=Q(t),this.isValid()?this[t+"s"]():NaN}function ka(t){return function(){return this.isValid()?this._data[t]:NaN}}var xa=ka("milliseconds"),Sa=ka("seconds"),Ma=ka("minutes"),Oa=ka("hours"),ja=ka("days"),Da=ka("months"),Pa=ka("years");function Ta(){return O(this.days()/7)}var Ya=Math.round,Ia={ss:44,s:45,m:45,h:22,d:26,M:11};function Aa(t,e,i,r,n){return n.relativeTime(e||1,!!i,t,r)}function Ca(t,e,i){var r=jr(t).abs(),n=Ya(r.as("s")),a=Ya(r.as("m")),s=Ya(r.as("h")),o=Ya(r.as("d")),h=Ya(r.as("M")),c=Ya(r.as("y")),l=n<=Ia.ss&&["s",n]||n<Ia.s&&["ss",n]||a<=1&&["m"]||a<Ia.m&&["mm",a]||s<=1&&["h"]||s<Ia.h&&["hh",s]||o<=1&&["d"]||o<Ia.d&&["dd",o]||h<=1&&["M"]||h<Ia.M&&["MM",h]||c<=1&&["y"]||["yy",c];return l[2]=e,l[3]=+t>0,l[4]=i,Aa.apply(null,l)}function Na(t){return void 0===t?Ya:"function"===typeof t&&(Ya=t,!0)}function Ha(t,e){return void 0!==Ia[t]&&(void 0===e?Ia[t]:(Ia[t]=e,"s"===t&&(Ia.ss=e-1),!0))}function qa(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=Ca(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}var Wa=Math.abs;function Ga(t){return(t>0)-(t<0)||+t}function La(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,r=Wa(this._milliseconds)/1e3,n=Wa(this._days),a=Wa(this._months);t=O(r/60),e=O(t/60),r%=60,t%=60,i=O(a/12),a%=12;var s=i,o=a,h=n,c=e,l=t,u=r?r.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var f=d<0?"-":"",m=Ga(this._months)!==Ga(d)?"-":"",p=Ga(this._days)!==Ga(d)?"-":"",y=Ga(this._milliseconds)!==Ga(d)?"-":"";return f+"P"+(s?m+s+"Y":"")+(o?m+o+"M":"")+(h?p+h+"D":"")+(c||l||u?"T":"")+(c?y+c+"H":"")+(l?y+l+"M":"")+(u?y+u+"S":"")}var Ea=sr.prototype;return Ea.isValid=nr,Ea.abs=ta,Ea.add=ia,Ea.subtract=ra,Ea.as=ha,Ea.asMilliseconds=ua,Ea.asSeconds=da,Ea.asMinutes=fa,Ea.asHours=ma,Ea.asDays=pa,Ea.asWeeks=ya,Ea.asMonths=ga,Ea.asQuarters=va,Ea.asYears=ba,Ea.valueOf=ca,Ea._bubble=aa,Ea.clone=_a,Ea.get=wa,Ea.milliseconds=xa,Ea.seconds=Sa,Ea.minutes=Ma,Ea.hours=Oa,Ea.days=ja,Ea.weeks=Ta,Ea.months=Da,Ea.years=Pa,Ea.humanize=qa,Ea.toISOString=La,Ea.toString=La,Ea.toJSON=La,Ea.locale=tn,Ea.localeData=rn,Ea.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",La),Ea.lang=en,ht("X",0,0,"unix"),ht("x",0,0,"valueOf"),Yt("x",Mt),Yt("X",Dt),Ht("X",(function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))})),Ht("x",(function(t,e,i){i._d=new Date(j(t))})),r.version="2.24.0",n(Zi),r.fn=Ln,r.min=Xi,r.max=tr,r.now=er,r.utc=y,r.unix=En,r.months=Bn,r.isDate=l,r.locale=pi,r.invalid=_,r.duration=jr,r.isMoment=M,r.weekdays=Kn,r.parseZone=Rn,r.localeData=vi,r.isDuration=or,r.monthsShort=Zn,r.weekdaysMin=Qn,r.defineLocale=yi,r.updateLocale=gi,r.locales=bi,r.weekdaysShort=Jn,r.normalizeUnits=Q,r.relativeTimeRounding=Na,r.relativeTimeThreshold=Ha,r.calendarFormat=Nr,r.prototype=Ln,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}))})),ci=(Object(d["l"])(".%L"),Object(d["l"])(":%S"),Object(d["l"])("%H:%M"),Object(d["l"])("%H:%M"),Object(d["l"])("%m%d"),Object(d["l"])("%m%d"),Object(d["l"])("%y"),function(t){var e="";if(t&&t>=1e9){var i=hi.duration(t/1e9,"seconds");i.years()>0&&(e+=i.years()+"Y"),i.months()>0&&(e+=i.months()+"M"),i.days()>0&&(e+=i.days()+"D"),i.hours()>0&&(e+=i.hours()+"h"),i.minutes()>0&&(e+=i.minutes()+"m"),i.seconds()>0&&(e+=i.seconds()+"s")}return e}),li={up:function(t){return t.open<=t.close},down:function(t){return t.open>t.close}},ui=Object.keys(li),di={up:function(t){return t.open<t.close},down:function(t){return t.open>t.close},equal:function(t){return t.open===t.close}},fi=Object.keys(di),mi=function(t,e,i){return function(){var r=Array.from(arguments).join(" "),n="color: white; background-color: ".concat(i,";");console.log.apply(this,["%c "+e+" %c "+r,n,t])}},pi=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TqChart",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plum";return{log:mi("color: green;",t,e),info:mi("color: blue;",t,e),debug:mi("color: pink;",t,e),warn:mi("color: orange;",t,e),error:mi("color: red;",t,e)}},yi=function(t){return Number.isInteger(Number(t))},gi=function(t){var e="string"===typeof t?t:"";if(yi(t)){var i=t.toString(16).padStart(8,"F"),r=parseInt(i.slice(0,2),16)/255,n=parseInt(i.slice(2,4),16),a=parseInt(i.slice(4,6),16),s=parseInt(i.slice(6),16);e="rgba(".concat(n,", ").concat(a,", ").concat(s,", ").concat(r,")")}return e},vi=function t(){Object(c["a"])(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id,r=e.xScale,n=e.yScale,a=e.bar;this.id=i||(new Date).getTime(),this.bar=a,this.xScale=r,this.yScale=n,this.paths=[]},bi=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),fi.forEach((function(e){return t.paths.push([t.id,"candle","line",e].join("."))})),fi.forEach((function(e){return t.paths.push([t.id,"candle","body",e].join("."))})),t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=i.slice(t,e+1),n=[Object(d["g"])(r,(function(t){return t&&t.low})),Object(d["f"])(r,(function(t){return t&&t.high}))],a=n[0],s=n[1];return a-=.2*(s-a),s+=.2*(s-a),[a,s]}},{key:"calcPaths",value:function(t,e,i){var r=this;if(this.yScale&&this.xScale&&this.bar){var n={};this.paths.forEach((function(t){n[t]=""}));for(var a=function(t){if("kline"===r.id&&console.info(t,i,i[t]),!i[t])return"continue";fi.forEach((function(e){if(di[e](i[t])){var a="up"===e?.5:0;n[[r.id,"candle","body",e].join(".")]+=r._bodyPath(i[t],t,a),n[[r.id,"candle","line",e].join(".")]+=r._linePath(i[t],t)}}))},s=t;s<=e;s++)a(s);return n}}},{key:"_bodyPath",value:function(t,e,i){var r=Math.round(this.yScale(t.open))+i,n=Math.round(this.yScale(t.close))+i,a=this.xScale(e)+this.bar.barPadding;if(Number.isNaN(r)||Number.isNaN(n)||Number.isNaN(a))return"";var s=this.bar.barWidth-2*this.bar.barPadding;return r!==n?"M".concat(a+i," ").concat(r," L").concat(a+s-i," ").concat(r," L").concat(a+s-i," ").concat(n," L").concat(a+i," ").concat(n," L").concat(a+i," ").concat(r):"M".concat(a," ").concat(r+.5," L").concat(a+s," ").concat(r+.5)}},{key:"_linePath",value:function(t,e){var i=Math.round(this.yScale(t.high)),r=Math.round(this.yScale(t.low)),n=this.xScale(e)+this.bar.barWidth/2;return Number.isNaN(i)||Number.isNaN(r)||Number.isNaN(n)?"":"M ".concat(n," ").concat(i," L ").concat(n," ").concat(r)}}]),e}(vi),_i=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),ui.forEach((function(e){return t.paths.push([t.id,"body",e].join("."))})),t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=i.slice(t,e+1);return[0,1.2*Object(d["f"])(r,(function(t){return t&&t.volume}))]}},{key:"calcPaths",value:function(t,e,i){var r=this;if(this.yScale&&this.xScale&&this.bar){var n={};this.paths.forEach((function(t){n[t]=""}));for(var a=function(t){if(!i[t])return"continue";ui.forEach((function(e){li[e](i[t])&&(n[[r.id,"body",e].join(".")]+=r.bodyPath(i[t],t,"up"===e?.5:0))}))},s=t;s<=e;s++)a(s);return n}}},{key:"bodyPath",value:function(t,e,i){var r=Math.ceil(this.yScale(0))+(0===i?1:i),n=Math.min(Math.round(r-this.yScale(t.volume)),r-i),a=this.xScale(e)+this.bar.barPadding,s=this.bar.barWidth-2*this.bar.barPadding,o="M".concat(a+i," ").concat(r,"L").concat(a+s-i," ").concat(r,"L ").concat(a+s-i," ").concat(r-n,"L").concat(a+i," ").concat(r-n,"L").concat(a+i," ").concat(r);return o}}]),e}(vi),wi=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),t.paths=["oi"],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=i.slice(t,e+1),n=[Object(d["g"])(r,(function(t){return t&&t.close_oi})),Object(d["f"])(r,(function(t){return t&&t.close_oi}))],a=n[0],s=n[1];return a-=.2*(s-a),s+=.2*(s-a),[a,s]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var r="",n=t;n<=e;n++)if(i[n]){var a=this.yScale(i[n].close_oi),s=this.xScale(n)+this.bar.barWidth/2;r+=""===r?"M":"L",r+="".concat(s," ").concat(a," ")}return{oi:r}}}}]),e}(vi),ki=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar,l=i.propName,u=i.min,d=i.max;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),t.min=u,t.max=d,t.propName=l||"value",t.paths=["value"],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var n=i.slice(t,e+1);return[Object(d["g"])(n,(function(t){return t&&t[r.propName]})),Object(d["f"])(n,(function(t){return t&&t[r.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var r="M",n=t;n<=e;n++)if(i[n]){var a=this.yScale(i[n][this.propName]),s=this.xScale(n)+this.bar.barWidth/2;void 0===a||Number.isNaN(a)||Number.isNaN(s)?r.endsWith("M")||(r+="M"):(r+=r.endsWith("M")?"":"L",r+="".concat(s," ").concat(a))}else r.endsWith("M")||(r+="M");return{value:r.replace(/[LM]$/,"")}}}}]),e}(vi),xi=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar,l=i.propName,u=i.isHollow,d=i.min,f=i.max;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),t.isHollow=u||!1,t.min=d,t.max=f,t.propName=l||"value",t.paths=["value"],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var n=i.slice(t,e+1);return[0,Object(d["f"])(n,(function(t){return t&&t[r.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var r="",n=t;n<=e;n++)i[n]&&(r+=this.bodyPath(i[n],n,this.isHollow?.5:0));return{value:r}}}},{key:"bodyPath",value:function(t,e,i){var r=Math.floor(this.yScale(0)),n=Math.round(r-this.yScale(t[this.propName])),a=this.xScale(e)+this.bar.barPadding;if(Number.isNaN(n)||Number.isNaN(a))return"";var s=this.bar.barWidth-2*this.bar.barPadding;return"M ".concat(a+i," ").concat(r-i," L ").concat(a+s-i," ").concat(r-i," L ").concat(a+s-i," ").concat(r-n+i," L ").concat(a+i," ").concat(r-n+i," L ").concat(a+i," ").concat(r-i)}}]),e}(vi),Si=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar,l=i.propName,u=i.min,d=i.max;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),t.min=u,t.max=d,t.propName=l||"value",t.paths=["value"],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var n=i.slice(t,e+1);return[Object(d["g"])(n,(function(t){return t&&t[r.propName]})),Object(d["f"])(n,(function(t){return t&&t[r.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var r="",n=t;n<=e;n++)if(i[n]){var a=this.yScale(i[n][this.propName]),s=this.xScale(n)+this.bar.barWidth/2;if(!Number.isNaN(a)&&!Number.isNaN(s)){var o=3;r+="M ".concat(s-o," ").concat(a," a ").concat(o,", ").concat(o," 0 1,0 ").concat(2*o,",0 a ").concat(o,", ").concat(o," 0 1,0 ").concat(2*-o,",0 ")}}return{value:r}}}}]),e}(vi),Mi=function(){function t(){Object(c["a"])(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.chart,r=e.boardId,n=e.plotId,a=void 0===n?"":n,s=e.yAlign,o=void 0===s?"right":s,h=e.type,l=void 0===h?"candle":h,u=e.color,d=void 0===u?"red":u,f=e.width,m=void 0===f?2:f,p=e.dash,y=void 0!==p&&p,g=e.data;this.chart=i,this.boardId=r,this.plotId=a,this.yAlign=o,this.board=this.chart.boards[r],this.data=g,this.type=l,this.color=d,this.width=Number.isFinite(m)?Math.round(m):2,this.dash=y,this.g=this.board.plotG.append("g").attr("class","plot ".concat(this.boardId," ").concat(this.plotId)),this.path=null,this._initPath()}return Object(l["a"])(t,[{key:"_initPath",value:function(){switch(this.type){case"candle":this.path=new bi({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"volume":this.path=new _i({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"oi":this.path=new wi({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"dash":this.path=new ki({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"line":this.path=new ki({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"bar":this.path=new xi({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"dot":this.path=new Si({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break}for(var t=0;t<this.path.paths.length;t++)this._appendPlotTypePath(this.path.paths[t])}},{key:"_appendPlotTypePath",value:function(t){if(Array.isArray(t)||(t=t.split(".")),this.g.selectAll("path.".concat(t.join("."))).data((function(t){return[t]})).enter().append("path").attr("class",t.join(" ")),"line"===this.type||"dash"===this.type){var e="string"===typeof this.color?this.color:"";this.g.selectAll("path.".concat(t.join("."))).style("fill","none").attr("stroke",e).attr("stroke-width",this.width+"px").attr("stroke-dasharray",this.dash?"4 4":"0")}else"bar"===this.type?this.g.selectAll("path.".concat(t.join("."))).style("fill",this.color).attr("stroke","none"):"dot"===this.type&&this.g.selectAll("path.".concat(t.join("."))).style("fill",this.color).attr("stroke","none")}},{key:"getYDomain",value:function(t,e,i){return this.path.getYDomain(t,e,i)}},{key:"draw",value:function(t,e,i){var r=this.path.calcPaths(t,e,i);for(var n in r)try{this.g.select("path.".concat(n)).attr("d",r[n])}catch(a){this.chart.tqChartConsole.error(a)}}},{key:"remove",value:function(){this.g.remove()}}]),t}(),Oi=function(){function t(e,i,r){Object(c["a"])(this,t),this.tqchart=e,this.id=i,this.klineId=r}return Object(l["a"])(t,[{key:"update",value:function(t){this.klineId=t}},{key:"resize",value:function(){this.g.attr("width",this.tqchart.bar.barWidth).attr("height",this.tqchart.innerHeight)}},{key:"draw",value:function(){this.g||(this.g=this.tqchart.bgShapesG.append("rect").attr("class","highlight").attr("width",this.tqchart.bar.barWidth).attr("height",this.tqchart.innerHeight));var t=this.tqchart.chartController.revertIdToPx(this.klineId);this.g.attr("transform","translate(".concat(t,",0)"))}},{key:"clear",value:function(){this.g.remove()}}]),t}(),ji={HighlightBar:Oi},Di=function(){function t(e,i,r){Object(c["a"])(this,t),this.tqchart=e,this.managerId=i,this.typeClass=r,this.contents={}}return Object(l["a"])(t,[{key:"add",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var n;this.contents[t]?(n=this.contents[t]).update.apply(n,i):this.contents[t]=Object(a["a"])(ji[this.typeClass],[this.tqchart,t].concat(i));return this.contents[t]}},{key:"each",value:function(t,e){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];for(var a in this.contents)if(this.contents[a]){var s=this.contents[a];s[t].apply(s,[e].concat(r))}}},{key:"get",value:function(t){return this.contents[t]||null}},{key:"remove",value:function(t){this.contents[t].clear(),delete this.contents[t]}},{key:"removeAll",value:function(){for(var t in this.contents)this.contents[t].clear(),delete this.contents[t]}}]),t}(),Pi=function(){function t(){Object(c["a"])(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id,r=e.chart,n=e.board,a=e.boardId,s=e.parentG,o=e.type,h=e.yAlign,l=e.fill,u=e.fillOpacity,d=e.stroke,f=e.strokeWidth,m=e.strokeOpacity,p=e.strokeDasharray;this.id=i||(new Date).getTime(),this.chart=r,this.boardId=a||"main",this.board=n||this.chart.boards[this.boardId],this.parentG=s,this.g=s?s.append("g").attr("class",this.boardId+" mark "+o+" "+this.id):this.board.markG.append("g").attr("class",this.boardId+" mark "+o+" "+this.id),this.yAlign=h||"right",this.type=o,this.fill=l||"none",this.fillOpacity=u||.5,this.stroke=d||"#bbbbbb",this.strokeWidth=f||1,this.strokeOpacity=m||.5,this.strokeDasharray=p||"0",this._show=!0}return Object(l["a"])(t,[{key:"update",value:function(t){this.xPos1=void 0===t.xPos1?this.xPos1:t.xPos1,this.x1=void 0===t.x1?this.x1:t.x1,this.dt1=void 0===t.dt1?this.dt1:t.dt1,this.yPos1=void 0===t.yPos1?this.yPos1:t.yPos1,this.y1=void 0===t.y1?this.y1:t.y1,this.xPos2=void 0===t.xPos2?this.xPos2:t.xPos2,this.x2=void 0===t.x2?this.x2:t.x2,this.dt2=void 0===t.dt2?this.dt2:t.dt2,this.yPos2=void 0===t.yPos2?this.yPos2:t.yPos2,this.y2=void 0===t.y2?this.y2:t.y2}},{key:"show",value:function(){this.g&&!this._show&&(this._show=!0,this.g.attr("visibility","visible"))}},{key:"hide",value:function(){this.g&&this._show&&(this._show=!1,this.g.attr("visibility","hidden"))}},{key:"remove",value:function(){this.g.remove()}},{key:"revertSomeToPos",value:function(t){var e={x:null,y:null};return Number.isFinite(this["xPos"+t])?e.x=this["xPos"+t]:Number.isFinite(this["x"+t])?e.x=this.revertIdToPos(this["x"+t]):Number.isFinite(this["dt"+t])&&(e.x=this.revertIdToPos(this.revertDtToId(this["dt"+t]))),Number.isFinite(this["yPos"+t])?e.y=this["yPos"+t]:Number.isFinite(this["y"+t])&&(e.y=this.revertValueToYPos(this["y"+t])),e}},{key:"revertDtToId",value:function(t){var e=this.chart.mainSeries,i=[this.chart.range.leftId,this.chart.range.rightId],r=i[0],n=i[1];if(!e||!e.data||!e.data[r]||t<e.data[r].datetime)return null;var a=e.data[n]?n:e.last_id;if(t<=e.data[a].datetime)for(var s=r;s<a+1;s++)if(t-e.data[s].datetime<=0)return s;return null}},{key:"revertIdToPos",value:function(t){return Math.round(this.chart.xAxis.xScale(t))+Math.floor(this.chart.bar.barWidth/2)}},{key:"revertValueToYPos",value:function(t){return t&&this.board[this.yAlign+"YAxis"]?Math.round(this.board[this.yAlign+"YAxis"].yScale(t)):null}},{key:"isPointInChart",value:function(t){var e=t.x,i=t.y;return e>=0&&e<=this.chart.innerWidth&&i>=0&&i<=this.chart.innerHeight}}]),t}(),Ti=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this,t)),i.type="text",i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.text=t.text,i.size=t.size,i.textG=i.g.append("text").style("font-size",i.size).style("fill",i.fill),i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"update",value:function(t){Object(n["a"])(Object(o["a"])(e.prototype),"update",this).call(this,t),this.text=void 0===t.text?this.text:t.text}},{key:"draw",value:function(){var t=this.revertSomeToPos("1");if(Number.isFinite(t.x)&&Number.isFinite(t.y)&&this.text)return this.show(),void this.textG.attr("x",t.x).attr("y",t.y).text(this.text);this.hide()}}]),e}(Pi),Yi=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this,t)),i.type="line",i.lineG=i.g.append("line"),i.lineG.style("fill","none").attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.text=t.text,i.clamp=t.clamp,i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"update",value:function(t){Object(n["a"])(Object(o["a"])(e.prototype),"update",this).call(this,t),this.x1=t.x1||this.x1,this.y1=t.y1||this.y1,this.text=void 0===t.text?this.text:t.text,this.clamp=void 0===t.clamp?this.clamp:t.clamp}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=this.revertSomeToPos("2");Number.isFinite(t.x)&&Number.isFinite(t.y)&&Number.isFinite(e.x)&&Number.isFinite(e.y)&&(this.clamp&&t.y-e.y<1e-6&&(t.y<0||e.y<0?t.y=e.y=0:(t.y>this.chart.innerHeight||e.y>this.chart.innerHeight)&&(t.y=e.y=this.chart.innerHeight)),this.lineG.attr("x1",t.x).attr("y1",t.y).attr("x2",e.x).attr("y2",e.y),this.show(),this.text&&(this.textG=this.textG||this.g.append("text"),this.textG.attr("x",t.x).attr("y",t.y).attr("dy",t.y<15?"12px":"-2px").text(this.text)))}}]),e}(Pi),Ii=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this,t)),i.type="rect",i.rectG=i.g.append("rect"),i.rectG.style("fill",i.fill).attr("fill-opacity",i.fillOpacity).attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.width=t.width,i.height=t.height,i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"update",value:function(t){Object(n["a"])(Object(o["a"])(e.prototype),"update",this).call(this,t),this.width=void 0===t.width?this.width:t.width,this.height=void 0===t.height?this.height:t.height}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=.5;if("none"===this.rectG.attr("stroke")&&(e=0),Number.isFinite(t.x)&&Number.isFinite(t.y)){if(Number.isFinite(this.width)&&Number.isFinite(this.height))return this.rectG.attr("x",t.x+e).attr("y",t.y+e).attr("width",this.width).attr("height",this.height),void this.show();var i=this.revertSomeToPos("2");if(Number.isFinite(i.x)&&Number.isFinite(i.y))return this.rectG.attr("x",t.x+e).attr("y",t.y+e).attr("width",Math.abs(i.x-t.x)).attr("height",Math.abs(i.y-t.y)),void this.show()}this.hide()}}]),e}(Pi),Ai=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this,t)),i.type="arrow",i.arrowG=i.g.append("path"),i.arrowG.style("fill",i.fill).attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.width=t.width,i.height=t.height,i.direction=t.direction,i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"update",value:function(t){Object(n["a"])(Object(o["a"])(e.prototype),"update",this).call(this,t),this.width=void 0===t.width?this.width:t.width,this.height=void 0===t.height?this.height:t.height,this.direction=void 0===t.direction?this.direction:t.direction}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=this.width||this.chart.bar.barWidth,i=this.height||this.chart.bar.barWidth,r="up"===this.direction?1:-1,n="none"===this.stroke?0:.5;if(Number.isFinite(t.x)&&Number.isFinite(t.y)&&this.isPointInChart(t)){var a=Math.round(e/3),s="M ".concat(t.x+e/2," ").concat(t.y," l ").concat(-e/2," ").concat(r*i/2," l ").concat(a-n," 0 l 0 ").concat(r*i/2," l ").concat(a," 0 l 0 ").concat(-1*r*i/2," l ").concat(a," 0 z");this.arrowG.attr("d",s),this.show()}else this.hide()}}]),e}(Pi),Ci=function(){function t(e){Object(c["a"])(this,t),this.chart=e,this.marks={}}return Object(l["a"])(t,[{key:"addMark",value:function(t){return t.id=t.id||(new Date).getTime(),this.marks[t.id]?this.marks[t.id].update(t):(t.chart=t.chart||this.chart,t.boardId=t.boardId||"main",t.board=t.board||this.chart.boards[t.boardId],t.yAlign=t.yAlign||"right","line"===t.type?this.marks[t.id]=new Yi(t):"rect"===t.type?this.marks[t.id]=new Ii(t):"arrow"===t.type?this.marks[t.id]=new Ai(t):"text"===t.type?this.marks[t.id]=new Ti(t):this.chart.tqChartConsole.error("未支持 ".concat(t.type," 类型标记，[line|rect|arrow|text]"))),this.marks[t.id]}},{key:"removeMarkAll",value:function(){for(var t in this.marks)this.marks[t].remove(),delete this.marks[t]}},{key:"removeMark",value:function(t){this.marks[t]&&this.marks[t].remove(),delete this.marks[t]}},{key:"showMark",value:function(t){this.marks[t].show()}},{key:"hideMark",value:function(t){this.marks[t].hide()}},{key:"draw",value:function(){var t=this.chart.mainSeries,e=[this.chart.range.leftId,this.chart.range.rightId],i=e[0],r=e[1];if(r=t.data[r]?r:t.last_id,t.data[i]&&t.data[r]){var n=t.data[i].datetime,a=t.data[r].datetime;for(var s in this.marks){var o=this.marks[s];if("arrow"===o.type)if(o.dt1>=n&&o.dt1<=a){var h=this.marks[s].revertDtToId(o.dt1);this.marks[s].x1=h,this.marks[s].y1="up"===this.marks[s].direction?t.data[h].low:t.data[h].high,this.marks[s].draw()}else this.marks[s].hide();else this.marks[s].draw()}}}}]),t}(),Ni=function(){function t(e){Object(c["a"])(this,t),this.tqchart=e,this._board=null,this._g=null,this.trades={}}return Object(l["a"])(t,[{key:"add",value:function(t,e){this.trades[t]||(this.trades[t]=e)}},{key:"removeAll",value:function(){for(var t in this.g.select("path").remove(),this.trades)delete this.trades[t]}},{key:"revertValueToYPos",value:function(t){return t&&this.board.rightYAxis?Math.round(this.board.rightYAxis.yScale(t)):null}},{key:"draw",value:function(){var t=[],e={},i={},r=this.tqchart.mainSeries,n=[this.tqchart.range.leftId,this.tqchart.range.rightId],a=n[0],s=n[1];if(s=r.data[s]?s:r.last_id,r.data[a]&&r.data[s]){var o=[r.data[a].datetime,r.data[s].datetime],h=o[0],c=o[1];for(var l in this.trades){var u=this.trades[l];if(u.trade_date_time>=h&&u.trade_date_time<=c+this.tqchart.duration){var d=this.tqchart.chartController.revertDtToId(u.trade_date_time,a,s);if(!d)continue;if("BUY"===u.direction)if(e[d])e[d].volume+=u.volume;else{var f={x:this.tqchart.chartController.revertIdToPx(d),y:this.revertValueToYPos(r.data[d].low),dir:"up",diff:"OPEN"===u.offset?0:.5,width:this.tqchart.bar.barWidth,volume:u.volume};e[d]=f,t.push(f)}else if("SELL"===u.direction)if(i[d])i[d].volume+=u.volume;else{var m={x:this.tqchart.chartController.revertIdToPx(d),y:this.revertValueToYPos(r.data[d].high),dir:"down",diff:"OPEN"===u.offset?0:.5,width:this.tqchart.bar.barWidth,volume:u.volume};i[d]=m,t.push(m)}}}this.drawArrows(t)}}},{key:"drawArrows",value:function(t){var e=this.g.selectAll("path").data(t);e.enter().append("path").attr("class",(function(t){return t.dir})).attr("d",this.getArrowPath),e.merge(e).attr("class",(function(t){return t.dir})).attr("d",this.getArrowPath),e.exit().remove()}},{key:"getArrowPath",value:function(t){var e="up"===t.dir?1:-1,i=t.width,r=t.width,n=Math.round(r/3);return"M ".concat(t.x+r/2," ").concat(t.y," l ").concat(-r/2," ").concat(e*i/2," l ").concat(n-t.diff," 0 l 0 ").concat(e*i/2," l ").concat(n," 0 l 0 ").concat(-1*e*i/2," l ").concat(n," 0 z")}},{key:"board",get:function(){return null===this._board&&(this._board=this.tqchart.boards.main?this.tqchart.boards.main:null),this._board}},{key:"g",get:function(){return null===this._g&&(this._g=this.board.markG.append("g").attr("class","tradearrow")),this._g}}]),t}(),Hi=function(){function t(e){Object(c["a"])(this,t),this.tqchart=e,this._board=null,this._g=null,this.datetimeKeys=[],this.positions={}}return Object(l["a"])(t,[{key:"add",value:function(t,e){this.positions[t]||(this.positions[t]=e,e.datetime=t,e.volume_net=e.volume_long-e.volume_short,e.klineId=this.tqchart.chartController.revertDtToId(t),this.datetimeKeys=Object.keys(this.positions).sort())}},{key:"removeAll",value:function(){for(var t in this.g.select("rect").remove(),this.positions)delete this.positions[t]}},{key:"getPostionKlineId",value:function(t){return t.klineId?t.klineId:(t.klineId=this.tqchart.chartController.revertDtToId(t.datetime),t.klineId)}},{key:"revertValueToYPos",value:function(t){return t&&this.board.rightYAxis?Math.round(this.board.rightYAxis.yScale(t)):null}},{key:"draw",value:function(){var t=this.tqchart.mainSeries,e=[this.tqchart.range.leftId,this.tqchart.range.rightId],i=e[0],r=e[1];if(r=t.data[r]?r:t.last_id,t.data[i]&&t.data[r]){for(var n=[t.data[i].datetime,t.data[r].datetime],a=n[0],s=n[1],o=[],h=1;h<this.datetimeKeys.length;h++){var c=this.datetimeKeys[h-1],l=this.datetimeKeys[h];if(!(l<a)){if(a>s)break;var u=this.positions[c],d=this.positions[l],f=this.getPostionKlineId(u),m=this.getPostionKlineId(d);if(null!==f&&null!==m&&m-f>1&&0!==u.volume_net){var p=t.data[m].close-t.data[f].open;if(0!==u.volume_net&&0!==p){var y=Math.min(t.data[f].low,t.data[m].low),g=Math.max(t.data[f].high,t.data[m].high),v=u.volume_net*p>0?"profit":"loss";o.push({id:"rect"+f,x1:f,y1:g,x2:m+1,y2:y,className:v,stroke:"none"})}}}}this.drawPosRect(o)}}},{key:"drawPosRect",value:function(t){var e=this,i=this.g.selectAll("rect").data(t);i.enter().append("rect").attr("class",(function(t){return t.className})).attr("x",(function(t){return e.tqchart.chartController.revertIdToPx(t.x1)})).attr("y",(function(t){return e.revertValueToYPos(t.y1)})).attr("width",(function(t){return(t.x2-t.x1)*e.tqchart.bar.barWidth})).attr("height",(function(t){return e.revertValueToYPos(t.y2)-e.revertValueToYPos(t.y1)})),i.merge(i).attr("class",(function(t){return t.className})).attr("x",(function(t){return e.tqchart.chartController.revertIdToPx(t.x1)})).attr("y",(function(t){return e.revertValueToYPos(t.y1)})).attr("width",(function(t){return(t.x2-t.x1)*e.tqchart.bar.barWidth})).attr("height",(function(t){return e.revertValueToYPos(t.y2)-e.revertValueToYPos(t.y1)})),i.exit().remove()}},{key:"board",get:function(){return null===this._board&&(this._board=this.tqchart.boards.main?this.tqchart.boards.main:null),this._board}},{key:"g",get:function(){return null===this._g&&(this._g=this.board.markG.append("g").attr("class","posrect")),this._g}}]),t}(),qi=function(){function t(e){Object(c["a"])(this,t),this.fullWidth=e,this.barWidth=t.BAR_WIDTH,this.barPadding=this._getBarPadding(),this.barNumbers=this._getBarNumbers()}return Object(l["a"])(t,[{key:"_getBarPadding",value:function(){return this.barWidth<=3?0:this.barWidth<=17?1:2}},{key:"_getBarNumbers",value:function(){return Math.floor(this.fullWidth/this.barWidth)}},{key:"zoom",value:function(e){if(0!==e){var i=e/Math.abs(e),r=this.barWidth+2*i;r<t.BAR_WIDTH_MIN||r>t.BAR_WIDTH_MAX||r===this.barWidth||(this.barWidth=r,this.barPadding=this._getBarPadding(),this.barNumbers=this._getBarNumbers())}}},{key:"setFullWidth",value:function(t){this.fullWidth=t,this.barNumbers=this._getBarNumbers()}}]),t}();qi.BAR_WIDTH=9,qi.BAR_WIDTH_MAX=35,qi.BAR_WIDTH_MIN=1;var Wi=function(){function t(e,i){Object(c["a"])(this,t),this.leftId=Number.isInteger(e)?e:-1,this.rightId=Number.isInteger(i)?i:-1}return Object(l["a"])(t,[{key:"reset",value:function(t,e){return!(!this.isInvalid()&&t===this.leftId&&e===this.rightId)&&(this.leftId=Number.isInteger(t)?t:-1,this.rightId=Number.isInteger(e)?e:-1,!0)}},{key:"isInvalid",value:function(){return-1===this.leftId||-1===this.rightId}},{key:"isEqual",value:function(t){return t.leftId===this.leftId&&t.rightId===this.rightId}},{key:"copy",value:function(e){e instanceof t&&(this.leftId=e.leftId,this.rightId=e.rightId)}}]),t}(),Gi=function(){function t(e){Object(c["a"])(this,t),this.tqchart=e,this.range=new Wi}return Object(l["a"])(t,[{key:"_initRange",value:function(){var t=-1,e=-1;this.tqchart.mainSeries&&-1!==this.tqchart.mainSeries.last_id&&(e=this.tqchart.mainSeries.last_id,t=e-this.tqchart.bar.barNumbers+1),this.range.reset(t,e)}},{key:"getRange",value:function(){return this.range.isInvalid()&&this._initRange(),this.range}},{key:"init",value:function(){this._initRange()}},{key:"setRange",value:function(t,e){t>=0&&e>=t?this.range.reset(t,e):(this.tqchart.tqChartConsole.warn("setRange 不传入数据，表示指定移动到最后端"),this.range.reset(-1,-1))}},{key:"move",value:function(t){if(this.getRange().isInvalid())return this.tqchart.tqChartConsole.warn("move 拖动图表的时候，图表范围还未确定"),!1;var e=this.range.leftId-t,i=e+this.tqchart.bar.barNumbers-1;return e>=0&&e<=this.tqchart.mainSeries.last_id-this.tqchart.bar.barNumbers+10?this.range.reset(e,i):e<0?0!==this.range.leftId&&(e=0,i=e+this.tqchart.bar.barNumbers-1,this.range.reset(e,i)):e>=0&&t>0&&this.range.reset(e,i)}},{key:"zoom",value:function(){var t=-1,e=-1;return t=this.range.rightId>this.tqchart.mainSeries.last_id?this.tqchart.mainSeries.last_id-this.tqchart.bar.barNumbers+1:this.range.rightId-this.tqchart.bar.barNumbers+1,t=t<0?0:t,e=t+this.tqchart.bar.barNumbers-1,this.range.reset(t,e),!0}},{key:"revertIdToPx",value:function(t){return Math.round(this.tqchart.xAxis.xScale(t))}},{key:"revertDtToId",value:function(t,e,i){var r=this.tqchart.mainSeries;if(!r||!r.data||this.range.isInvalid())return null;var n=!1;e>=0&&i>e?n=!0:(e=this.range.leftId,i=this.range.rightId);var a=e,s=i;if(s=s<=r.last_id?s:r.last_id,!r.data[a]||!r.data[s])return null;if(t>=r.data[s].datetime&&t<r.data[s].datetime+this.tqchart.duration)return s;if(t>=r.data[a].datetime&&t<=r.data[s].datetime){for(var o=a;o<s+1&&r.data[o];o++)if(t-r.data[o].datetime<=0)return o>=1?o-1:o;return null}if(n)return null;if(t>r.data[s].datetime){if(s===r.last_id)return null;for(var h=s;h<r.last_id&&r.data[h]&&r.data[h];h++)if(t-r.data[h].datetime<=0)return h>=1?h-1:h;return null}if(t<r.data[a].datetime){if(0===a)return null;for(var c=a;c>=0&&r.data[c];c--)if(t-r.data[c].datetime>=0)return c;return null}}}]),t}(),Li=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this)),i.divDomId=t.id,i.outerWidth=t.width,i.outerHeight=t.height,i.margin=t.margin?t.margin:{top:15,right:50,bottom:20,left:80},i.innerWidth=i.outerWidth-i.margin.left-i.margin.right,i.innerHeight=i.outerHeight-i.margin.top-i.margin.bottom,i.mode="free",i.customRange=new Wi,i.mainType="candle",i.bar=new qi(i.innerWidth),i.range=new Wi,i.symbol=t.symbol||t.instrumentId,i.duration=t.duration||6e10,i.price_decs=t.price_decs||2,i.price_ticks=t.price_ticks,i.mainSeries=t.mainSeries,i.chartController=new Gi(Object(r["a"])(i)),i.highlightManager=new Di(Object(r["a"])(i),"highlight","HighlightBar"),i.tradeArrowManager=new Ni(Object(r["a"])(i)),i.positionManager=new Hi(Object(r["a"])(i)),i.tqChartConsole=pi("TqChart","plum"),i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"setMode",value:function(t,e,i){"free"===t?(this.mode="free",e>=0&&i>=e?this.customRange.reset(e,i):this.customRange.reset()):"fixed"===t?e>=0&&i>=e?(this.mode="fixed",this.customRange.reset(e,i)):this.tqChartConsole.error("mode:fixed 必须指定 leftId rightId"):this.tqChartConsole.error("不支持 mode:".concat(t,"， 只支持 mode:[free|fixed]"))}},{key:"setRange",value:function(t,e){this.chartController.setRange(t,e),this.draw()}},{key:"setMainType",value:function(t){"candle"===t||"close"===t?this.mainType=t:this.tqChartConsole.error("mainType 只支持 [candle|close] => [K线图|收盘价线]")}},{key:"setMainSeries",value:function(t,e,i){t&&e&&i?(this.symbol=t,this.duration=e,this.mainSeries=i,this.backgroundText.text("".concat(this.symbol," ").concat(ci(this.duration))).attr("dy","-2"),this.chartController.init(),this.marksManager.removeMarkAll(),this.tradeArrowManager.removeAll(),this.positionManager.removeAll(),this._resetBoards(),this.draw()):this.tqChartConsole.error("setMainSeries 必须同时指定 symbol, duration, klines")}},{key:"addHighlightBar",value:function(t,e){this.highlightManager.add(t,e)}},{key:"addTradeArrow",value:function(t,e){this.tradeArrowManager.add(t,e)}},{key:"addPositionRecord",value:function(t,e){this.positionManager.add(t,e)}},{key:"init",value:function(){this._initSvgNode(),this._initEventListenners(),this.xAxis=new fe(this);var t=be.GetMutilPlotsHeight(2,this.innerHeight);this.boards={main:new be(this,"main",t[0].top,t[0].height,!1),sub:new be(this,"sub",t[1].top,t[1].height,!0)},this.plots={mainkline:new Mi({chart:this,boardId:"main",plotId:"candle",yAlign:"right",type:"candle"}),volume:new Mi({chart:this,boardId:"sub",plotId:"volume",yAlign:"right",type:"volume"}),oi:new Mi({chart:this,boardId:"sub",plotId:"oi",yAlign:"left",type:"oi"})},this.marksManager=new Ci(this),this.crosshair=new pe(this),this.chartController.init()}},{key:"_initSvgNode",value:function(){this.svg=Object(d["j"])("#"+this.divDomId).append("svg").attr("class","tqchart").attr("width",this.outerWidth).attr("height",this.outerHeight),this.defs=this.svg.append("defs");var t="mask-global";this.maskGlobal=e.AppendMask(this.defs,t,this.innerWidth,this.innerHeight,0,0);var i=[this.margin.left,this.margin.top],r=i[0],n=i[1];this.backgroundG=e.AppendG(this.svg,"background global",r,n),this.boardBackgroundG=e.AppendG(this.svg,"boardBackground global",r,n),this.rootG=e.AppendG(this.svg,"root global",r,n),this.crosshairG=e.AppendG(this.svg,"crosshair global",r,n),this.loadingG=e.AppendG(this.svg,"loading global",r,n),this.bgShapesG=e.AppendG(this.svg,"bgShapes global",r,n,t),this.backgroundText=this.backgroundG.append("g").append("text"),this.backgroundText.text("".concat(this.symbol," ").concat(ci(this.duration))).attr("dy","-2"),this.markG=this.rootG.append("g")}},{key:"_debounce",value:function(t,e){var i=null;return function(){var r=this,n=arguments;clearTimeout(i),i=setTimeout((function(){t.apply(r,n)}),e)}}},{key:"_initEventListenners",value:function(){var t=this;this.svg.on("mousemove",(function(){var e=Object(d["h"])(this),i=te(e,2),r=i[0],n=i[1];r>t.margin.left&&r<t.margin.left+t.innerWidth&&n>t.margin.top&&n<t.margin.top+t.innerHeight&&t.crosshair.update(r-t.margin.left,n-t.margin.top)})),this.svg.on("mouseover",(function(){null===e&&t.crosshair.show()})),this.svg.on("mouseleave",(function(){t.crosshair.hide()}));var e=null,i=Object(d["d"])().on("start",(function(){e=d["e"].x,t.crosshair.hide(),t.crosshair.drag(!0)})).on("drag",(function(){var i=Math.round((d["e"].x-e)/t.bar.barWidth);this.bar=new qi(this.innerWidth),Math.abs(i)>0&&(e=d["e"].x,t.move(i))})).on("end",(function(){e=null,t.crosshair.show(),t.crosshair.drag(!1)}));this.svg.call(i);var r=Object(d["r"])().on("zoom",(function(){var e=d["e"].sourceEvent.deltaY;Math.abs(e)>0&&t._debounce(t.zoom,200).bind(t)(e>0?-2:2)}));this.svg.call(r).on("dblclick.zoom",null)}},{key:"getBoardByYPosition",value:function(t){for(var e in this.boards)if(t>=this.boards[e].top&&t<=this.boards[e].top+this.boards[e].height)return this.boards[e]}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.height,i=t.width;this.tqChartConsole.log("onresize",i),this.outerWidth=i,this.outerHeight=e,this.innerWidth=this.outerWidth-this.margin.left-this.margin.right,this.innerHeight=this.outerHeight-this.margin.top-this.margin.bottom,this.svg.attr("width",this.outerWidth).attr("height",this.outerHeight),this.bar.setFullWidth(this.innerWidth),this.xAxis.resetPosition(),this.chartController.zoom();var r=be.GetMutilPlotsHeight(Object.keys(this.boards).length,this.innerHeight),n=0;for(var a in this.boards)this.boards[a].resetPosition(r[n++]);this.crosshair.resize(),this.draw()}},{key:"_resetBoards",value:function(){for(var t in this.boards)"main"!==t&&"sub"!==t&&(this.boards[t].remove(),delete this.boards[t]);var e=be.GetMutilPlotsHeight(2,this.innerHeight);for(var i in this.boards.main.resetPosition(e[0]),this.boards.sub.resetPosition(e[1]),this.plots)"mainkline"!==i&&"volume"!==i&&"oi"!==i&&(this.plots[i].remove(),delete this.plots[i])}},{key:"_updateBoards",value:function(){var t=be.GetMutilPlotsHeight(Object.keys(this.boards).length,this.innerHeight),e=0;for(var i in this.boards)this.boards[i].resetPosition(t[e++])}},{key:"addSeries",value:function(t,e){this.tqChartConsole.log("addSeries",t,e);var i=e.board?e.board.toLowerCase():"main";this.boards[i]||(this.boards[i]=new be(this,i,this.innerHeight,0,!0),this._updateBoards()),"KSERIAL"!==e.type&&"SERIAL"!==e.type||this.plots[t]||("KSERIAL"===e.type?this.plots[t]=new Mi({chart:this,boardId:i,plotId:t,yAlign:e.yAlign,type:"candle",data:e.data}):"SERIAL"===e.type&&(this.plots[t]=new Mi({chart:this,boardId:i,plotId:t,yAlign:e.yAlign,type:e.style.toLowerCase(),data:e.data,color:gi(e.color),width:e.width,dash:"dash"===e.style.toLowerCase()}))),"TEXT"===e.type?this.addMark({id:t,boardId:e.board.toLowerCase(),type:"text",x1:e.x1,y1:e.y1,fill:gi(e.color),size:e.size,text:e.text}):"LINE"===e.type||"SEG"===e.type||"RAY"===e.type?this.addMark({id:t,boardId:e.board.toLowerCase(),type:"line",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,stroke:gi(e.color),strokeWidth:e.width,text:"",clamp:!1}):"BOX"===e.type&&this.addMark({id:t,boardId:e.board.toLowerCase(),type:"rect",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,fill:gi(e.bg_color),stroke:gi(e.color),strokeWidth:e.width||1}),this.draw()}},{key:"addMark",value:function(t){this.marksManager.addMark(t)}},{key:"removeMark",value:function(t){this.marksManager.removeMark(t)}},{key:"removeMarkAll",value:function(){this.marksManager.removeMarkAll()}},{key:"showMark",value:function(t){this.marksManager.showMark(t)}},{key:"hideMark",value:function(t){this.marksManager.hideMark(t)}},{key:"move",value:function(t){"fixed"!==this.mode&&this.chartController.move(t)&&this.draw()}},{key:"zoom",value:function(t){if("fixed"!==this.mode){var e=this.bar.barWidth;this.bar.zoom(t),e!==this.bar.barWidth&&(this.highlightManager.each("resize"),this.chartController.zoom(),this.xAxis.resetPosition(),this.draw())}}},{key:"readyToDraw",value:function(){return this.dm.readyToDraw()}},{key:"draw",value:function(){if(-1!==this.mainSeries.last_id){this.mainSeries.last_id-this.range.rightId===1&&this.chartController.setRange(this.mainSeries.last_id-this.bar.barNumbers+1,this.mainSeries.last_id);var t=this.chartController.getRange(),e=t.leftId,i=t.rightId;this.xAxis.draw(e,i,this.mainSeries.data);var r={};for(var n in this.plots){var a=this.plots[n].getYDomain(e,i,this.plots[n].data||this.mainSeries.data),s=this.plots[n].boardId,o=this.plots[n].yAlign;r[s]=r[s]||{left:[1/0,-1/0],right:[1/0,-1/0]},r[s][o][0]=Math.min(r[s][o][0],a[0]),r[s][o][1]=Math.max(r[s][o][1],a[1])}for(var h in this.boards){var c=r[h];c&&(this.boards[h].setDomain(c.left,"left"),this.boards[h].setDomain(c.right,"right"),this.boards[h].draw(e,i,this.mainSeries.data))}for(var l in this.plots)this.plots[l].draw(e,i,this.plots[l].data||this.mainSeries.data);this.marksManager.draw(),this.highlightManager.each("draw"),this.tradeArrowManager.draw(),this.positionManager.draw(),this.chartController.range.isEqual(this.range)||(this.range.copy(this.chartController.range),this.emit("showRangeChanged",this.range))}}},{key:"_drawBackground",value:function(t,e,i){var r=this.tqsdk.get_quote(this.symbol);if(r&&r.trading_time){var n=[],a=Object(d["l"])("%H:%M:%S"),s=Object(d["l"])("%d");if(this.duration<=6e10){var o=[];for(var h in r.trading_time.day)o.push(r.trading_time.day[h][0]);if(r.trading_time.night&&r.trading_time.night.length>0)for(var c in r.trading_time.night)o.push(r.trading_time.night[c][0]);for(var l=t;l<=e;l++)i[l]&&o.indexOf(a(i[l].datetime/1e6))>-1&&n.push((l-t)*this.bar.barWidth+this.bar.barWidth/2)}else if(this.duration<864e11){var u=[],f=r.trading_time.night?"night":"day";u.push(r.trading_time[f][0][0]);for(var m=t;m<=e;m++)i[m]&&u.indexOf(a(i[m].datetime/1e6))>-1&&n.push((m-t)*this.bar.barWidth+this.bar.barWidth/2)}else if(this.duration<=432e12)for(var p=t;p<=e;p++)i[p]&&i[p-1]&&s(i[p].datetime/1e6)<s(i[p-1].datetime/1e6)&&n.push((p-t)*this.bar.barWidth+this.bar.barWidth/2);var y=this.backgroundG.selectAll("line").data(n);y.enter().append("line").attr("y1",0).attr("y2",this.innerHeight).attr("stroke","#E6E6E6").attr("stroke-dasharray","12 6").attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),y.merge(y).attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),y.exit().remove()}}}]),e}(ne);Li.AppendG=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=t.append("g").attr("class",e);return 0===i&&0===r||a.attr("transform","translate(".concat(i,",").concat(r,")")),n&&a.attr("mask","url(#".concat(n,")")),a},Li.AppendMask=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return t.append("mask").attr("id",e).append("rect").attr("x",n).attr("y",a).attr("width",i).attr("height",r).style("fill","#FFFFFF").attr("stroke","none")},Li.version=f,e["a"]=Li}).call(this,i("c8ba"))},c8b7:function(t,e,i){"use strict";var r=i("0f78"),n=i.n(r);n.a},cf05:function(t,e,i){t.exports=i.p+"img/logo.165e0f64.png"},d227:function(t,e,i){"use strict";var r=i("9571"),n=i.n(r);n.a},d4f6:function(t,e,i){}});