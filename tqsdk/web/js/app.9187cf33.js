(function(t){function e(e){for(var r,s,o=e[0],h=e[1],c=e[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(t[r]=h[r]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],r=!0,o=1;o<i.length;o++){var h=i[o];0!==n[h]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},n={app:0},a=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=h;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"07f6":function(t,e,i){},"19da":function(t,e,i){"use strict";var r=i("dcf3"),n=i.n(r);n.a},"1a2d3":function(t,e,i){"use strict";var r=i("f6c5"),n=i.n(r);n.a},2975:function(t,e,i){"use strict";var r=i("8fde"),n=i.n(r);n.a},"2dac":function(t,e,i){"use strict";var r=i("5a46"),n=i.n(r);n.a},"326a":function(t,e,i){"use strict";var r=i("6491"),n=i.n(r);n.a},4678:function(t,e,i){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=a(t);return i(e)}function a(t){if(!i.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=a,t.exports=n,n.id="4678"},5096:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("4de4"),i("c975"),i("a9e3"),i("f00c"),i("8ba4"),i("b680"),i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),n=i("c1df"),a=i.n(n),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("tianqin")],1)},o=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-home"},[i("div",{staticClass:"layout-area header-container"},[i("tq-header-view",{attrs:{height:t.headerHeight,width:t.$root.windowWidth}})],1),i("div",{staticClass:"layout-area top-container",style:{height:t.topHeight+"px"}},[i("tq-top-view",{attrs:{height:t.topHeight,width:t.$root.windowWidth}})],1),i("div",{staticClass:"layout-area bottom-container",style:{height:t.bottomHeight+"px",top:t.bottomYOffset+4+"px",backgroundColor:"#FEFEFE",boxShadow:t.showBottomShadow?"0px -3px 4px -1px #AFAFAF":""}},[i("div",{staticClass:"bottom-area-handle",on:{mousedown:t.handleMousedown}}),i("tq-bottom-view",{attrs:{height:t.bottomHeight,width:t.$root.windowWidth}})],1)])},c=[],l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tq-header-view"},[r("tq-layout-area",{attrs:{height:t.height,otherStyle:{backgroundColor:"#FEFEFE"}}},[r("a",{attrs:{href:"https://www.shinnytech.com/tianqin/",target:"_blank"}},[r("img",{staticClass:"logo",style:{padding:"4px",width:t.height+"px",height:t.height+"px"},attrs:{alt:"Tianqin",src:i("cf05")}})])]),r("tq-layout-area",{attrs:{height:t.height,left:t.height,width:240,otherStyle:{paddingTop:"8px"}}},[t._v(" "+t._s(t.$store.state.file_name)+" ")]),r("tq-layout-area",{attrs:{height:t.height,left:t.height+240,width:380,otherStyle:{paddingTop:"8px",backgroundColor:"backtest"===t.$store.state.mode?"#FAF5EA":"replay"===t.$store.state.mode?"#F0E2FA":"#FFF"}}},["run"===t.$store.state.mode?r("div",[t._v("账户："+t._s(t.$store.state.broker_id)+","+t._s(t.$store.state.account_id)+" ")]):t._e(),"backtest"===t.$store.state.mode?r("div",[t._v("回测区间： "+t._s(t.formatDt(t.$store.state.start_dt))+" -- "+t._s(t.formatDt(t.$store.state.end_dt))+" ")]):t._e(),"replay"===t.$store.state.mode?r("div",[r("tq-replay-ctrl")],1):t._e()]),r("tq-layout-area",{attrs:{height:t.height,width:160,horizontalAlign:"right",otherStyle:{paddingTop:"8px"}}},[r("Badge",{attrs:{color:t.$store.state.py_file_status?"green":"red",text:"py文件"}}),r("Badge",{attrs:{color:t.$store.state.md_url_status?"green":"red",text:"行情"}}),r("Badge",{attrs:{color:t.$store.state.td_url_status?"green":"red",text:"交易"}})],1)],1)},u=[],d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-layout-absolute",style:t.computedStyle},[t._t("default")],2)},f=[],m={name:"tq-layout-absolute",data:function(){return{}},props:{horizontalAlign:{type:String,default:"left"},verticalAlign:{type:String,default:"top"},top:{type:Number,default:0},left:{type:Number,default:0},bottom:{type:Number,default:0},right:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},otherStyle:{type:Object,default:function(){}}},computed:{computedStyle:function(){var t={width:this.width+"px",height:this.height+"px"};return t[this.horizontalAlign]=this[this.horizontalAlign]+"px",t[this.verticalAlign]=this[this.verticalAlign]+"px",Object.assign(t,this.otherStyle)}}},p=m,g=(i("b9e2"),i("2877")),v=Object(g["a"])(p,d,f,!1,null,null,null),y=v.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"replay-control"},[t._v(" 复盘日期： "+t._s(t.currentDateTime?t.currentDateTime:t.formatDt(t.$store.state.replay_dt))+" ("+t._s(this.currentSpeed)+") "),i("ButtonGroup",{attrs:{size:"small"}},[i("Button",{on:{click:function(e){return t.ctrl("play")}}},[i("Icon",{attrs:{type:"ios-play"}})],1),i("Button",{on:{click:function(e){return t.ctrl("pause")}}},[i("Icon",{attrs:{type:"ios-pause"}})],1),i("Button",{on:{click:function(e){return t.ctrl("rewind")}}},[i("Icon",{attrs:{type:"ios-rewind"}})],1),i("Button",{on:{click:function(e){return t.ctrl("fastforward")}}},[i("Icon",{attrs:{type:"ios-fastforward"}})],1)],1)],1)},_=[],w=(i("a4d3"),i("e01a"),i("d28b"),i("a15b"),i("fb6a"),i("d3b7"),i("3ca3"),i("ddb0"),i("2f62"));r["a"].use(w["a"]);var k=new w["a"].Store({state:{mode:"",broker_id:"",account_id:"",py_file_status:"",md_url_status:"",td_url_status:"",file_path:"",file_name:""},mutations:{set_action:function(t,e){Object.assign(t,e)},set_py_file_status:function(t,e){t.py_file_status=e}},actions:{}}),x=k,S={name:"tq-replay-control",data:function(){return{currentSpeed:"-",currentDateTime:""}},props:{width:Number},computed:{replayUrl:function(){return this.$store.state.ctrl_url}},methods:{setSpeed:function(t){fetch(this.replayUrl,{method:"POST",body:JSON.stringify({aid:"ratio",speed:t})}).then((function(t){console.log(t)}))},ctrl:function(t){"play"===t?("-"===this.currentSpeed&&(this.currentSpeed=1),this.setSpeed(this.currentSpeed)):"pause"===t?this.setSpeed(0):"rewind"===t?("-"===this.currentSpeed?this.currentSpeed=1:this.currentSpeed<=5?this.currentSpeed=Math.max(1,this.currentSpeed-1):this.currentSpeed<=40?this.currentSpeed-=5:this.currentSpeed<=100&&(this.currentSpeed-=10),this.setSpeed(this.currentSpeed)):"fastforward"===t&&("-"===this.currentSpeed?this.currentSpeed=2:this.currentSpeed<5?this.currentSpeed+=1:this.currentSpeed<40?this.currentSpeed+=5:this.currentSpeed<100?this.currentSpeed+=10:this.currentSpeed=100,this.setSpeed(this.currentSpeed))},formatDt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return a()(t/1e6).format(e)}},mounted:function(){var t=this,e=["KQ.m@SHFE.au","KQ.m@SHFE.ag","KQ.m@CFFEX.T","KQ.m@CFFEX.TF"];this.$tqsdk.on("rtn_data",(function(){var i=t.$tqsdk.getByPath(["ins_list"]);i=void 0===i?"":i,""!==i&&-1!==i.indexOf("KQ.m@SHFE.au")&&-1!==i.indexOf("KQ.m@SHFE.ag")&&-1!==i.indexOf("KQ.m@CFFEX.T")&&-1!==i.indexOf("KQ.m@CFFEX.TF")||(i+=(i?",":"")+e.join(","),t.$tqsdk.subscribe_quote(i));var r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var h=s.value,c=t.$tqsdk.get_by_path(["quotes",h,"datetime"]);t.currentDateTime=c&&c>t.currentDateTime?c.slice(0,19):t.currentDateTime}}catch(l){n=!0,a=l}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}}))}},O=S,M=(i("2dac"),Object(g["a"])(O,b,_,!1,null,null,null)),j=M.exports,D={name:"tq-header-view",components:{TqLayoutArea:y,TqReplayCtrl:j},props:{height:Number},methods:{formatDt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return a()(t/1e6).format(e)}}},C=D,P=(i("8e24"),Object(g["a"])(C,l,u,!1,null,null,null)),T=P.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-top-view"},[i("tq-layout-area",{staticClass:"left-view",attrs:{height:t.height,width:t.chartWidth}},[i("tq-layout-area",{attrs:{height:26,width:300}},[i("button-group-durations",{attrs:{duration:t.duration},on:{onChangeDuration:t.onChangeDuration}})],1),i("tq-layout-area",{attrs:{top:26}},[i("tq-chart-components",{attrs:{instrumentId:t.instrumentId,duration:t.duration,height:t.height-26,width:t.chartWidth,theme:t.theme}})],1)],1),i("tq-layout-area",{staticClass:"right-view",attrs:{height:t.height,width:t.rightWidth,horizontalAlign:"right"}},["backtest"!==t.$store.state.mode?i("tq-layout-area",{attrs:{height:t.rightClosed?t.height-35:160,width:t.rightWidth}},["backtest"!==t.$store.state.mode?i("quote-info",{attrs:{symbol:t.instrumentId,height:t.rightClosed?t.height-35:160,width:t.rightWidth}}):t._e()],1):t._e(),i("tq-layout-area",{attrs:{top:"backtest"!==t.$store.state.mode?160:0,height:t.rightClosed?0:18,width:t.rightWidth,otherStyle:{backgroundColor:"lightgrey",color:"#333333",fontSize:"12px",fontWeight:"700",overflow:"hidden"}}},[t._v(" 订阅合约列表 ")]),i("tq-layout-area",{attrs:{verticalAlign:"bottom",bottom:35,height:t.rightClosed?0:t.height-("backtest"!==t.$store.state.mode?160:0)-18-35,width:t.rightWidth,otherStyle:{overflowY:"scroll"}}},[i("subscribed-list",{on:{onChange:t.onChangeSelectedSubscribed}})],1),i("tq-layout-area",{attrs:{verticalAlign:"bottom",height:35,width:t.rightWidth}},[i("about-us",{attrs:{width:t.rightWidth}})],1),"backtest"!==t.$store.state.mode?i("div",{staticClass:"right-resize-tool",on:{click:t.toggleRightClosed}},[t.rightClosed?i("Icon",{attrs:{type:"ios-arrow-back"}}):i("Icon",{attrs:{type:"ios-arrow-forward"}})],1):t._e()],1)],1)},q=[],A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-button-group-durations"},[i("RadioGroup",{attrs:{type:"button",size:"small"},model:{value:t.selectedPeriod,callback:function(e){t.selectedPeriod=e},expression:"selectedPeriod"}},t._l(t.periods,(function(t){return i("Radio",{key:t,attrs:{label:t}})})),1)],1)},I=[],N=(i("4160"),i("b64b"),i("07ac"),i("159b"),{"1m":6e10,"5m":3e11,"15m":9e11,"30m":18e11,"1h":36e11,"1d":864e11}),W={data:function(){return{periods:Object.keys(N),selectedPeriod:"",selectedDuration:null}},props:{duration:Number},watch:{duration:function(){if(this.duration!==this.selectedDuration){var t=Object.values(N).indexOf(this.duration);t>-1?(this.selectedPeriod=N[t],this.selectedDuration=this.duration):(this.selectedPeriod="",this.selectedDuration=null)}},selectedPeriod:function(){document.querySelectorAll(".tq-button-group-durations input[type=radio]").forEach((function(t){return t.blur()})),this.selectedDuration=N[this.selectedPeriod],this.selectedPeriod&&this.selectedDuration&&this.$emit("onChangeDuration",this.selectedDuration)}}},F=W,G=(i("326a"),Object(g["a"])(F,A,I,!1,null,null,null)),H=G.exports,E=(i("99af"),i("beea")),L=(i("f9f8"),"web_chart"),$="web_chart_focus",R=null,z=null,U={name:"tq-chart-components",data:function(){return{id:"TQ-CHART",action:"run"}},props:{instrumentId:{type:String,default:"TQ.m@SHFE.au"},duration:{type:Number,default:6e10},width:Number,height:Number,theme:{type:String,default:"light"}},render:function(t){var e={class:{"theme-light":"light"===this.theme,"theme-dark":"dark"===this.theme},attrs:{id:this.id}};return t("div",e)},watch:{instrumentId:function(t,e){z.removeMarkAll(),this.$nextTick(this.updateTqChart)},duration:function(t,e){z.removeMarkAll(),this.$nextTick(this.updateTqChart)},width:function(t,e){z&&z.resize({width:t,height:this.height})},height:function(t,e){z&&z.resize({width:this.width,height:t})}},created:function(){R=this.$tqsdk.get({name:"klines",symbol:this.instrumentId,duration:this.duration}),z=new E["a"]({id:this.id,instrumentId:this.instrumentId,duration:this.duration,height:this.height,width:this.width,mainSeries:R});var t="free",e=3,i=this;z.on("showRangeChanged",(function(r){if(-1!==r.rightId&&-1!==r.leftId)if("fixed"===t){var n=864e11;i.$tqsdk.set_chart({chart_id:L,symbol:i.instrumentId,duration:i.duration,trading_day_start:n*(1-e),trading_day_count:n*e})}else if("free"===t){var a=r.rightId-r.leftId;i.$tqsdk.set_chart({chart_id:L,symbol:i.instrumentId,duration:i.duration,left_kline_id:Math.max(r.leftId-a,0),view_width:3*a})}}))},mounted:function(){z.init();var t=this;this.$tqsdk.on("rtn_data",(function(){if(t.updatePositionLine(),t.updateTrades(),t.updateTqSdkChartData(),t.updatePositionRect(),"run"===t.action&&"backtest"===t.$tqsdk.get_by_path(["action","mode"])){var e=t.$store.state.account_id;if(e){var i=t.$tqsdk.get({name:"trades",user_id:e});for(var r in i){var n=i[r];z&&z.symbol&&z.duration&&(t.$tqsdk.set_chart({chart_id:$,symbol:z.symbol,duration:z.duration,view_width:z.bar.barNumbers,focus_datetime:n.trade_date_time,focus_position:Math.floor(z.bar.barNumbers/2)}),t.action="backtest");break}}}var a=t.$tqsdk.get_by_path(["charts",$]);if(a&&!a.more_data&&a.left_id&&a.right_id){var s=[a.left_id,a.right_id],o=s[0],h=s[1];z.setRange(o,h),z.addHighlightBar("movetoid",o+Math.round(z.bar.barNumbers/2-2)),t.$tqsdk.set_chart({chart_id:$,symbol:"",duration:z.duration,view_width:0})}else{var c=t.$tqsdk.get_by_path(["charts",L,"more_data"]);!c&&t.$tqsdk.is_changed(R)&&z.draw()}})),this.$eventHub.$on("moveChartToDt",(function(t){this.$tqsdk.set_chart({chart_id:$,symbol:z.symbol,duration:z.duration,view_width:z.bar.barNumbers,focus_datetime:t,focus_position:Math.floor(z.bar.barNumbers/2)})}))},methods:{updateTqChart:function(){if(this.$tqsdk.set_chart({chart_id:L,symbol:this.instrumentId,duration:this.duration,view_width:1e3}),R=this.$tqsdk.get({name:"klines",symbol:this.instrumentId,duration:this.duration}),z){var t=this.$tqsdk.get_quote(this.instrumentId);z.setMainSeries(this.instrumentId,this.duration,R),z.price_decs=t.price_decs,this.$nextTick((function(){this.updateTqSdkChartData(),this.updateTrades(!0),this.updatePositionRect(!0)}))}},updateTqSdkChartData:function(){var t=this.$tqsdk.get_by_path(["draw_chart_datas",z.symbol,z.duration]);if(t)for(var e in t)z.addSeries(e,t[e])},updatePositionLine:function(t){var e=this.$store.state.account_id;if(e){var i=this.$tqsdk.get({name:"position",user_id:e,symbol:z.symbol});i&&i.volume_long>0?z.addMark({id:"pos_long",type:"line",boardId:"main",yAlign:"right",xPos1:0,xPos2:z.innerWidth,y1:i.open_price_long,y2:i.open_price_long,stroke:"red",text:"多仓".concat(i.volume_long,"手@").concat(i.open_price_long)}):z.removeMark("pos_long"),i&&i.volume_short>0?z.addMark({id:"pos_short",type:"line",boardId:"main",yAlign:"right",xPos1:0,xPos2:z.innerWidth,y1:i.open_price_short,y2:i.open_price_short,stroke:"green",text:"空仓".concat(i.volume_short,"手@").concat(i.open_price_short)}):z.removeMark("pos_short")}},updateTrades:function(t){var e=this.$store.state.account_id;if(e){var i=this.$tqsdk.get({name:"trades",user_id:e});for(var r in i){var n=i[r];t?n.volume>0&&n.symbol===z.symbol&&z.addTradeArrow(r,n):n._epoch===this.$tqsdk.dm._epoch&&n.volume>0&&n.symbol===z.symbol&&z.addTradeArrow(r,n)}}},updatePositionRect:function(t){var e=this.$tqsdk.get_by_path(["snapshots"]);for(var i in e){var r=e[i];t?r.positions&&r.positions.hasOwnProperty(z.symbol)&&z.addPositionRecord(i,r.positions[z.symbol]):r._epoch===this.$tqsdk.dm._epoch&&r.positions&&r.positions.hasOwnProperty(z.symbol)&&z.addPositionRecord(i,r.positions[z.symbol])}}}},V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"subscribed-list"},[t._l(t.subscribedSymbols,(function(e){return[t._l(t.subscribed[e],(function(r){return[i("Button",{attrs:{size:"small",long:""},on:{click:function(i){return t.onClick(e,r)}}},[t._v(" "+t._s(e)+" "+t._s(t.ParseDuartionToString(r))+" ")])]}))]}))],2)},B=[];i("caad"),i("2532"),i("a434"),i("ac1f"),i("1276"),i("bf2d");function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"===typeof t?t.toFixed(e):t}function Q(t){switch(t){case"BUY":return"买";case"SELL":return"卖";default:return t}}function K(t){switch(t){case"OPEN":return"开";case"CLOSE":return"平";case"CLOSETODAY":return"平今";default:return t}}function J(t){var e="";if(t&&t>=1e9){var i=a.a.duration(t/1e9,"seconds");i.years()>0&&(e+=i.years()+"Y"),i.months()>0&&(e+=i.months()+"M"),i.days()>0&&(e+=i.days()+"D"),i.hours()>0&&(e+=i.hours()+"h"),i.minutes()>0&&(e+=i.minutes()+"m"),i.seconds()>0&&(e+=i.seconds()+"s")}return e}var X=[],tt={},et={data:function(){return{subscribedSymbols:X,subscribed:tt}},props:{},watch:{subscribedSymbols:function(t,e){console.log(t,e)}},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.getByPath(["subscribed"]);if(e&&e._epoch===t.$tqsdk.dm._epoch){for(var i in e){var r=e[i];if(Array.isArray(r.symbol))for(var n in r.symbol)t.addSubscribed(r.symbol[n],r.dur_nano);else t.addSubscribed(r.symbol,r.dur_nano)}t.updateSubscribedSymbols()}}))},methods:{addSubscribed:function(t,e){tt[t]||(tt[t]=[]),e||(e=""),tt[t].includes(e)||tt[t].push(e)},updateSubscribedSymbols:function(){for(var t in tt)-1===X.indexOf(t)&&X.push(t)},onClick:function(t,e){this.$emit("onChange",t,e)},ParseDuartionToString:J}},it=et,rt=Object(g["a"])(it,V,B,!1,null,null,null),nt=rt.exports,at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"quote-info-container"},[i("Row",{attrs:{"class-name":"quote-items-title"}},[i("Col",{attrs:{span:t.largeSize?12:24}},[i("div",[t._v(t._s(t.quote.ins_name))])]),i("Col",{attrs:{span:t.largeSize?12:24}},[i("div",[t._v(t._s(t.quote.ins_id))])])],1),i("Row",[i("Col",{attrs:{span:t.largeSize?6:12}},[i("div",[t._v("卖一")])]),i("Col",{attrs:{span:t.largeSize?9:12}},[i("div",[t._v(t._s(t.formatter(t.quote.ask_price1)))])]),i("Col",{attrs:{span:t.largeSize?9:"0"}},[t._v(" "+t._s(t.quote.ask_volume1)+" ")])],1),i("div",{staticClass:"outer"},[i("div",{staticClass:"inner",style:{width:100*t.innerWidth+"%"}})]),i("Row",[i("Col",{attrs:{span:t.largeSize?6:12}},[t._v(" 买一 ")]),i("Col",{attrs:{span:t.largeSize?9:12}},[t._v(" "+t._s(t.formatter(t.quote.bid_price1)))]),i("Col",{attrs:{span:t.largeSize?9:"0"}},[t._v(" "+t._s(t.quote.bid_volume1)+" ")])],1),i("Row",{attrs:{"class-name":"quote-items "+(t.largeSize?"large-size":"")}},[i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最新价 ")]),i("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.last_price))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 昨结算 ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.pre_settlement))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 涨跌 ")]),i("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.change))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 今开 ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.quote.open)+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 涨跌幅 ")]),i("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t._f("toFixed")(t.quote.change_percent))+"% ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最高 ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.highest))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 总手 ")]),i("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatterVolume(t.quote.volume))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最低 ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.lowest))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 涨停 ")]),i("Col",{staticClass:"R",attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.upper_limit))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 收盘 ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.close))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 跌停 ")]),i("Col",{staticClass:"G",attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.lower_limit))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 结算 ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.settlement))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 持仓量 ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.quote.open_interest))]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 日增")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(Number.isNaN(t.quote.open_interest-t.quote.pre_open_interest)?"-":t.quote.open_interest-t.quote.pre_open_interest))])],1)],1)},st=[],ot={ins_name:"-",ins_id:"-",price_decs:2,last_price:"-",ask_price1:"-",ask_volume1:"-",bid_price1:"-",bid_volume1:"-",pre_settlement:"-",change:"-",change_percent:"-",open:"-",close:"-",highest:"-",volume:"-",lowest:"-",upper_limit:"-",lower_limit:"-",settlement:"-",open_interest:"-",pre_open_interest:"-"},ht={data:function(){return{quote:Object.assign({},ot)}},props:{symbol:String,height:Number,width:Number},watch:{symbol:function(t,e){this.$tqsdk.subscribeQuote(this.symbol);var i=this.$tqsdk.getQuote(this.symbol);ct(this.quote,i)}},computed:{classOfColor:function(){return this.quote["change"]>0?"R":this.quote["change"]<0?"G":""},innerWidth:function(){return this.quote.bid_volume1/(this.quote.bid_volume1+this.quote.ask_volume1)},largeSize:function(){return this.width>100}},created:function(){var t=this;this.$tqsdk.subscribe_quote(this.symbol),this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.getQuote(t.symbol);ct(t.quote,e)}))},methods:{formatter:function(t){return Z(t,this.quote.price_decs)},formatterVolume:function(t){return"number"!==typeof t?t:t>1e8?(t/1e8).toFixed(1)+"亿":t>1e4?(t/1e8).toFixed(1)+"万":t}}};function ct(t,e){Object.keys(ot).forEach((function(i,r,n){t[i]!==e[i]&&(t[i]=e[i])}))}var lt=ht,ut=(i("19da"),Object(g["a"])(lt,at,st,!1,null,null,null)),dt=ut.exports,ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about-us"},[r("a",{attrs:{href:"https://doc.shinnytech.com/tqsdk/latest/",target:"_blank"}},[r("img",{staticClass:"logo",attrs:{alt:"Tianqin",src:i("cf05")}}),t._v(" 天勤量化"),t.width>100?r("span",[t._v("开发文档")]):t._e()]),r("a",{attrs:{href:"https://www.shinnytech.com/qa/",target:"_blank"}},[r("Icon",{attrs:{type:"ios-chatbubbles"}}),t._v(" 天勤"),t.width>100?r("span",[t._v("量化")]):t._e(),t._v("论坛 ")],1)])},mt=[],pt={props:{width:Number}},gt=pt,vt=(i("2975"),Object(g["a"])(gt,ft,mt,!1,null,null,null)),yt=vt.exports,bt=function(){return document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)}}(),_t=function(){return document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)}}(),wt={name:"tq-top-view",components:{TqLayoutArea:y,TqChartComponents:U,ButtonGroupDurations:H,QuoteInfo:dt,SubscribedList:nt,AboutUs:yt},props:{width:Number,height:Number},data:function(){var t=240,e=80;return{rightClosed:!1,rightOpenedWidth:t,rightClosedWidth:e,instrumentId:"",duration:6e10,theme:"light"}},computed:{chartWidth:function(){var t=this.$root.windowWidth-(this.rightClosed?this.rightClosedWidth:this.rightOpenedWidth);return Math.max(t,400)},rightWidth:function(){return(this.rightClosed?this.rightClosedWidth:this.rightOpenedWidth)-4}},methods:{toggleRightClosed:function(){this.rightClosed=!this.rightClosed},onChangeDuration:function(t){this.duration=t},onChangeSelectedSubscribed:function(t,e){this.instrumentId=t,this.duration=e||6e10}},created:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){t.subscribed=t.$tqsdk.get_by_path(["subscribed"]),t.subscribed&&t.subscribed[0]&&""===t.instrumentId&&(t.subscribedIndex=0,t.instrumentId=Array.isArray(t.subscribed[0].symbol)?t.subscribed[0].symbol[0]:t.subscribed[0].symbol,t.duration=t.subscribed[0].dur_nano||6e10)}))}},kt=wt,xt=(i("f451"),Object(g["a"])(kt,Y,q,!1,null,null,null)),St=xt.exports,Ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-bottom-view"},["backtest"===t.$store.state.mode?[i("tq-layout-area",{attrs:{width:t.width/2,height:t.height}},[i("Tabs",{attrs:{animated:!1}},[i("TabPane",{attrs:{label:"回测指标"}},[i("backtest-info",{attrs:{width:t.width,height:t.height-27}})],1),i("TabPane",{attrs:{label:"成交记录"}},[i("trades-table",{attrs:{width:t.width,height:t.height-27}})],1)],1)],1),i("tq-layout-area",{attrs:{horizontalAlign:"right",width:t.width/2,height:t.height,otherStyle:{borderLeft:"2px solid #E0E0E0"}}},[i("backtest-chart")],1)]:"run"===t.$store.state.mode||"replay"===t.$store.state.mode?[i("tq-layout-area",{attrs:{height:26,width:t.width}},[i("account-info",{attrs:{height:26}})],1),i("tq-layout-area",{attrs:{height:t.height-26,top:26,width:t.width}},[i("Tabs",[i("TabPane",{attrs:{label:"持仓"}},[i("positions-table",{attrs:{width:t.width,height:t.height-53}})],1),i("TabPane",{attrs:{label:"成交记录"}},[i("trades-table",{attrs:{width:t.width,height:t.height-53}})],1),i("TabPane",{attrs:{label:"委托单记录"}},[i("orders-table",{attrs:{width:t.width,height:t.height-53}})],1)],1)],1)]:t._e()],2)},Mt=[],jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reports trades-table",style:{height:t.height+"px"}},[i("table",[i("thead",[i("tr",t._l(t.columns,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])})),0)]),i("tbody")])])},Dt=[],Ct=(i("4e82"),{data:function(){return{tbodyRoot:null,columns:[{name:"成交合约",key:"instrument_id",width:"100",cb:function(t){return t.exchange_id+"."+t.instrument_id}},{name:"方向",key:"direction",width:"60",cb:function(t){return Q(t.direction)}},{name:"开平",key:"offset",width:"60",cb:function(t){return K(t.offset)}},{name:"成交价格",width:"60",key:"price"},{name:"手数",width:"60",key:"volume"},{name:"成交时间",key:"trade_date_time",width:"140",cb:function(t){return a()(t.trade_date_time/1e6).format("YYYY-MM-DD HH:mm:ss")}},{name:"报单编号",key:"trade_id",width:"260"}]}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".trades-table table tbody");var t=this,e=function(){var e=t.$store.state.account_id;if(e){var i=[],r=t.$tqsdk.get({name:"trades",user_id:e});if(r){for(var n in r)r[n]._epoch===t.$tqsdk.dm._epoch&&i.push(r[n]);i.sort((function(t,e){return t.trade_date_time-e.trade_date_time}));for(var a=function(e){var r=t.append_trade(i[e]);r.onclick=function(n){var a=t.tbodyNode.querySelectorAll("tr");a.forEach((function(t){return t.className=""})),r.className="selected",t.$eventHub.$emit("moveChartToDt",i[e].trade_date_time)}},s=0;s<i.length;s++)a(s)}}};e(),this.$tqsdk.on("rtn_data",e)},methods:{append_trade:function(t){var e=document.createElement("tr");for(var i in this.columns){var r=this.columns[i],n=this.get_td_text(r.cb?r.cb(t):t[r.key],r.key);e.appendChild(n)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},get_td_text:function(t){var e=document.createElement("td");return e.textContent=t,e}}}),Pt=Ct,Tt=Object(g["a"])(Pt,jt,Dt,!1,null,null,null),Yt=Tt.exports,qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reports orders-table",style:{height:t.height+"px"}},[i("table",[i("thead",[i("tr",[t._l(t.columns,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])})),t._l(t.columnsAppend,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])}))],2)]),i("tbody")])])},At=[],It={data:function(){return{tbodyRoot:null,columns:[{name:"成交合约",width:"100",key:"instrument_id",cb:function(t){return t.exchange_id+"."+t.instrument_id}},{name:"方向",width:"60",key:"direction",cb:function(t){return Q(t.direction)}},{name:"开平",width:"60",key:"offset",cb:function(t){return K(t.offset)}},{name:"报单价格",width:"60",key:"limit_price"},{name:"总手数",width:"60",key:"volume_orign"},{name:"报单时间",width:"140",key:"insert_date_time",cb:function(t){return a()(t.insert_date_time/1e6).format("YYYY-MM-DD HH:mm:ss")}}],columnsAppend:[{name:"未成交手数",key:"volume_left",width:"80",cb:function(t){return t.volume_left}},{name:"冻结保证金",width:"80",key:"frozen_margin"},{name:"状态",width:"60",key:"status",cb:function(t){return"FINISHED"===t.status?"已完成":"未完成"}},{name:"提示信息",key:"last_msg",width:"160"}],ordersTr:{}}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".orders-table table tbody");var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$store.state.account_id;if(e){var i=t.$tqsdk.get({name:"orders",user_id:e});if(i){var r=function(e){if(t.ordersTr[e])t.update_order(i[e],t.ordersTr[e]);else{var r=t.append_order(i[e]);r.onclick=function(n){var a=t.tbodyNode.querySelectorAll("tr");a.forEach((function(t){return t.className=""})),r.className="selected",t.$eventHub.$emit("moveChartToDt",i[e].insert_date_time)},t.ordersTr[e]=r}};for(var n in i)r(n)}}}))},methods:{append_order:function(t){var e=document.createElement("tr");for(var i in this.columns){var r=this.columns[i],n=this.get_td_text(r.cb?r.cb(t):t[r.key],r.key);e.appendChild(n)}for(var a in this.columnsAppend){var s=this.columnsAppend[a],o=this.get_td_text(s.cb?s.cb(t):t[s.key],s.key);e.appendChild(o)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},update_order:function(t,e){for(var i in this.columnsAppend){var r=this.columns[i],n=e.querySelector("."+r.key),a=r.cb?r.cb(t):t[r.key];a!==n.textContent&&this.update_td_text(a,n)}},get_td_text:function(t,e){var i=document.createElement("td");return i.className=e,i.textContent=t,i},update_td_text:function(t,e){e.textContent=t}}},Nt=It,Wt=Object(g["a"])(Nt,qt,At,!1,null,null,null),Ft=Wt.exports,Gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reports positions-table",style:{height:t.height+"px"}},[i("table",[i("thead",[i("tr",[t._l(t.columns,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])})),t._l(t.columnsAppend,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])}))],2)]),i("tbody")])])},Ht=[],Et={data:function(){return{tbodyRoot:null,columns:[{name:"持仓合约",width:"100",key:"instrument_id",cb:function(t){return t.exchange_id+"."+t.instrument_id}}],columnsAppend:[{name:"多仓",key:"volume_long",width:"60"},{name:"多头开仓均价",width:"80",key:"open_price_long",cb:function(t){return Z(t.open_price_long)}},{name:"多头浮动盈亏",width:"80",key:"position_profit_long",cb:function(t){return Z(t.position_profit_long)}},{name:"多头占用保证金",width:"80",key:"margin_long",cb:function(t){return Z(t.margin_long)}},{name:"空仓",key:"volume_short",width:"60"},{name:"空头开仓均价",width:"80",key:"open_price_short",cb:function(t){return Z(t.open_price_short)}},{name:"空头浮动盈亏",width:"80",key:"position_profit_short",cb:function(t){return Z(t.position_profit_short)}},{name:"空头占用保证金",width:"80",key:"margin_short",cb:function(t){return Z(t.margin_short)}}],ordersTr:{}}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".positions-table table tbody");var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$store.state.account_id;if(e){var i=t.$tqsdk.get({name:"positions",user_id:e});if(i)for(var r in i)i[r]._epoch===t.$tqsdk.dm._epoch&&(t.ordersTr[r]?t.update_position(i[r],t.ordersTr[r]):t.ordersTr[r]=t.append_position(i[r]))}}))},methods:{append_position:function(t){var e=document.createElement("tr");for(var i in this.columns){var r=this.columns[i],n=this.get_td_text(r.cb?r.cb(t):t[r.key],r.key);e.appendChild(n)}for(var a in this.columnsAppend){var s=this.columnsAppend[a],o=this.get_td_text(s.cb?s.cb(t):t[s.key],s.key);e.appendChild(o)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},update_position:function(t,e){for(var i in this.columnsAppend){var r=this.columnsAppend[i],n=e.querySelector("."+r.key),a=r.cb?r.cb(t):t[r.key];a!==n.textContent&&this.update_td_text(a,n)}},get_td_text:function(t,e){var i=document.createElement("td");return i.className=e,i.textContent=t,i},update_td_text:function(t,e){e.textContent=t}}},Lt=Et,$t=Object(g["a"])(Lt,Gt,Ht,!1,null,null,null),Rt=$t.exports,zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"account-info",style:{height:t.height+"px"}},[i("div",[t._v(" 账户权益: "+t._s(t._f("toFixed")(t.balance))+" ")]),i("div",[t._v(" 浮动盈亏: "+t._s(t._f("toFixed")(t.float_profit))+" ")]),i("div",[t._v(" 保证金占用: "+t._s(t._f("toFixed")(t.margin))+" ")]),i("div",[t._v(" 日内手续费: "+t._s(t._f("toFixed")(t.commission))+" ")]),i("div",[t._v(" 可用资金: "+t._s(t._f("toFixed")(t.available))+" ")])])},Ut=[],Vt=(i("130f"),{data:function(){return{available:"-",balance:"-",commission:"-",float_profit:"-",margin:"-"}},props:{height:Number},computed:{account_id:function(){return this.$store.state.account_id}},mounted:function(){setImmediate(this.update.bind(this)),this.$tqsdk.on("rtn_data",this.update)},methods:{update:function(){if(this.account_id){var t=this.$tqsdk.get({name:"account",user_id:this.account_id,currency:"CNY"});t._epoch===this.$tqsdk.dm._epoch&&(this.available=t.available,this.balance=t.balance,this.commission=t.commission,this.float_profit=t.float_profit,this.margin=t.margin)}}}}),Bt=Vt,Zt=(i("a240"),Object(g["a"])(Bt,zt,Ut,!1,null,null,null)),Qt=Zt.exports,Kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"backtest-info",style:{height:t.height+"px"}},[i("Row",["-"===t.init_balance?i("Col",{attrs:{span:24,"class-name":"spin-container"}},[i("Spin",{attrs:{fix:""}},[i("div",{staticClass:"loader"},[i("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[i("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"6","stroke-miterlimit":"10"}})])]),t._v(" 回测进行中 ")])],1):t._e()],1),i("Row",[i("Col",{attrs:{span:6}},[t._v("起始资金")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.init_balance,2)))]),i("Col",{attrs:{span:6}},[t._v("总收益")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.balance-t.init_balance,2)))]),i("Col",{attrs:{span:6}},[t._v("结束资金")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.balance,2)))]),i("Col",{attrs:{span:6}},[t._v("总收益率")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.ror,2))+"%")]),i("Col",{attrs:{span:6}},[t._v("最大回撤")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.max_drawdown,2))+"%")]),i("Col",{attrs:{span:6}},[t._v("年化收益率")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.annual_yield,2))+"%")]),i("Col",{attrs:{span:6}},[t._v("总手续费")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.commission,2)))]),i("Col",{attrs:{span:6}},[t._v("年化夏普率")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.sharpe_ratio,2)))]),i("Col",{attrs:{span:6}},[t._v("胜率")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.winning_rate,2))+"%")]),i("Col",{attrs:{span:6}},[t._v("盈亏额比")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.profit_loss_ratio,2)))]),i("Col",{style:{color:"#bd0000"},attrs:{span:12}},[t._v("天勤量化："+t._s(t.getMsg(100*t.ror)))])],1)],1)},Jt=[],Xt={data:function(){return{init_balance:"-",balance:"-",ror:"-",annual_yield:"-",max_drawdown:"-",sharpe_ratio:"-",commission:"-",winning_rate:"-",profit_loss_ratio:"-"}},props:{height:Number,width:Number},methods:{getMsg:function(t){return t<=-100?"幸好是模拟账户，不然你就亏完啦":t<=-50?"触底反弹,与其执迷修改参数，不如改变策略思路去天勤官网策略库进修":t<=-20?"越挫越勇，不如去天勤量化官网策略库进修":t<=0?"不要灰心，少侠重新来过":t<=20?"策略看来小有所成":t<=50?"策略看来的得心应手":t<=100?"策略看来春风得意，堪比当代索罗斯":"策略看来独孤求败，小心过拟合噢"}},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$store.state.account_id;if(e){var i=t.$tqsdk.get({name:"account",user_id:e,currency:"CNY"});if(i&&i._tqsdk_stat){t.init_balance=i._tqsdk_stat.init_balance,t.balance=i._tqsdk_stat.balance,t.max_drawdown=i._tqsdk_stat.max_drawdown,t.annual_yield=i._tqsdk_stat.annual_yield,t.ror=i._tqsdk_stat.ror,t.sharpe_ratio=i._tqsdk_stat.sharpe_ratio,t.winning_rate=i._tqsdk_stat.winning_rate,t.profit_loss_ratio=i._tqsdk_stat.profit_loss_ratio;var r=t.$tqsdk.get({name:"trades",user_id:e}),n=0;for(var a in r)n+=r[a].commission;t.commission=n}}}))}},te=Xt,ee=(i("5ab6"),Object(g["a"])(te,Kt,Jt,!1,null,null,null)),ie=ee.exports,re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"backtest-report"},[i("e-chart",{ref:"echart",attrs:{height:"220px",width:t.width+"px","path-option":t.defaultOption}})],1)},ne=[],ae=(i("25eb"),i("a6fb")),se=i.n(ae),oe=i("313e"),he=i.n(oe);(function(){var t=function(t,e,i){i=i||window;var r=!1,n=function(){r||(r=!0,requestAnimationFrame((function(){i.dispatchEvent(new CustomEvent(e)),r=!1})))};i.addEventListener(t,n)};t("resize","optimizedResize")})();var ce={name:"v-echart",render:function(t){var e={staticClass:"v-chart",style:this.canvasStyle,ref:"canvas",on:this.$listeners};return t("div",e)},props:{width:{type:String,default:"auto"},height:{type:String,default:"400px"},pathOption:[Object,Array],widthChangeDelay:{type:Number,default:450}},data:function(){return{chartInstance:null,_defaultOption:{animation:!1,tooltip:{show:!0},title:{show:!0,textStyle:{fontSize:"16px",color:"rgba(0, 0, 0 , .87)",fontFamily:"sans-serif"}},grid:{containLabel:!0},xAxis:{show:!0,type:"category",axisLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{show:!0,color:"rgba(0, 0, 0 , .24)"}},axisLabel:{show:!1},splitLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}}},yAxis:{show:!0,type:"value",max:"dataMax",min:"dataMin",axisLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisLabel:{show:!1,color:"rgba(0, 0, 0 , .24)"},splitLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisTick:{show:!0,lineStyle:{show:!0,color:"rgba(0, 0, 0 , .54)"}}},series:[{type:"line"}]}}},computed:{canvasStyle:function(){return{width:this.width,height:this.height}}},methods:{init:function(){var t=this;this.pathOption&&this.pathOption.forEach((function(e){se.a.set(t.$data._defaultOption,e[0],e[1])})),this.chartInstance=he.a.init(this.$refs.canvas),this.chartInstance.setOption(this.$data._defaultOption),window.addEventListener("optimizedResize",(function(e){setTimeout((function(e){t.chartInstance.resize()}),t.widthChangeDelay)}))},showLoadPercent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&t<100?(t=Math.max(t,0),this.chartInstance.showLoading("default",{text:"数据已加载 "+t+"%",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0})):this.chartInstance.hideLoading()},update:function(t){this.chartInstance.setOption(t)},resize:function(){this.chartInstance.resize()},clean:function(){window.removeEventListener("resize",this.chartInstance.resize),this.chartInstance.clear()}},mounted:function(){this.init()},beforeDestroy:function(){this.clean()}},le={components:{EChart:ce},data:function(){return{daily_yield:[],defaultOption:[["grid.top","16px"],["grid.left","10px"],["grid.bottom","0px"],["grid.right","16px"],["series[0]",{type:"line",encode:{x:"datetime",y:["balance"]},smooth:!1,showAllSymbol:!0,areaStyle:{}}],["yAxis.show",!0],["yAxis.type","value"],["yAxis.axisLabel",{show:!0,formatter:function(t,e){return t.toFixed(2)},color:"#333333"}],["yAxis.splitLine",{show:!0}],["xAxis.show",!0],["xAxis.type","time"],["xAxis.axisLabel",{show:!0,color:"#333333"}],["xAxis.splitLine",{show:!0}],["xAxis.boundaryGap",!1],["tooltip",{trigger:"axis",triggerOn:"mousemove|click"}]]}},props:{height:Number,width:Number},methods:{},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.get_by_path(["snapshots"]),i=[];for(var r in e)r>t.$store.state.end_dt||i.push([Number.parseInt(r/1e6),e[r].accounts.CNY.balance]);t.$refs.echart.update({dataset:{source:i}})}))}},ue=le,de=(i("b7de"),Object(g["a"])(ue,re,ne,!1,null,null,null)),fe=de.exports,me={name:"tq-bottom-view",components:{TqLayoutArea:y,TradesTable:Yt,OrdersTable:Ft,PositionsTable:Rt,AccountInfo:Qt,BacktestInfo:ie,BacktestChart:fe},props:{height:Number,width:Number},data:function(){return{}},methods:{},created:function(){}},pe=me,ge=(i("1a2d3"),Object(g["a"])(pe,Ot,Mt,!1,null,null,null)),ve=ge.exports,ye=38,be=4,_e=56,we={name:"tq-home",components:{TqHeaderView:T,TqTopView:St,TqBottomView:ve},data:function(){var t=Math.max(260,Math.round(this.$root.windowHeight/5*3)),e=ye+t+be;return{isMoving:!1,headerHeight:ye,topHeight:t,topHeightMin:260,bottomYOffset:e,bottomYOffsetMin:2*ye,bottomYOffsetMax:this.$root.windowHeight-_e,bottomHeight:this.$root.windowHeight-e-be,showBottomShadow:!1}},methods:{onResize:function(){this.bottomYOffsetMax=this.$root.windowHeight-_e,this.computeLayouts()},handleMousedown:function(t){this.isMoving=!0,bt(document,"mousemove",this.handleMove),bt(document,"mouseup",this.handleUp)},handleMove:function(t){var e=t.pageY;e>=this.bottomYOffsetMax||e<=this.bottomYOffsetMin||(this.bottomYOffset=e,this.computeLayouts())},handleUp:function(){this.isMoving=!1,_t(document,"mousemove",this.handleMove),_t(document,"mouseup",this.handleUp)},computeLayouts:function(){var t=this.$root.windowHeight-this.bottomYOffset;t<=_e&&(t=_e,this.bottomYOffset=this.$root.windowHeight-t),this.showBottomShadow=this.bottomYOffset<this.topHeightMin+ye,this.bottomHeight=t-be;var e=this.$root.windowHeight-ye-t-be;this.topHeight=Math.max(e,this.topHeightMin)}},created:function(){this.$eventHub.$on("window_resize",this.onResize),this.computeLayouts()}},ke=we,xe=(i("a124"),Object(g["a"])(ke,h,c,!1,null,null,null)),Se=xe.exports,Oe={name:"tq-app",components:{Tianqin:Se}},Me=Oe,je=(i("5c0b"),Object(g["a"])(Me,s,o,!1,null,null,null)),De=je.exports,Ce=i("0977"),Pe=i("8629"),Te=i("f843"),Ye=i("8144"),qe=i("2d48"),Ae=i("6def"),Ie=i("e79d"),Ne=i("90b2"),We=i("c5c1"),Fe=i("dcbf"),Ge=i("e3f5"),He=i("5250"),Ee=i("76ea"),Le=i("b3e6"),$e=i("8679"),Re=i("fe66"),ze=i("6252"),Ue=i("9259"),Ve=i("aa30"),Be=i("e0b9");r["a"].prototype.$Loading=Be["a"],r["a"].prototype.$Message=Ve["a"],r["a"].prototype.$Modal=Ue["a"],r["a"].prototype.$Notice=ze["a"],r["a"].prototype.$Spin=Re["a"],r["a"].component("Layout",$e["a"]),r["a"].component("Row",Le["a"]),r["a"].component("Col",Ee["a"]),r["a"].component("Icon",He["a"]),r["a"].component("Button",Ge["a"]),r["a"].component("ButtonGroup",Fe["a"]),r["a"].component("Dropdown",We["a"]),r["a"].component("DropdownMenu",Ne["a"]),r["a"].component("DropdownItem",Ie["a"]),r["a"].component("Badge",Ae["a"]),r["a"].component("Radio",qe["a"]),r["a"].component("RadioGroup",Ye["a"]),r["a"].component("Tabs",Te["a"]),r["a"].component("TabPane",Pe["a"]),r["a"].component("Spin",Re["a"]),r["a"].config.productionTip=!1,r["a"].$eventHub=new r["a"],r["a"].prototype.$eventHub=r["a"].$eventHub;var Ze={name:"tianqin-web",windowHeight:window.innerHeight,windowWidth:window.innerWidth},Qe=new r["a"]({data:Ze,store:x,render:function(t){return t(De)},methods:{handlerResize:function(){Ze.windowHeight=window.innerHeight,Ze.windowWidth=window.innerWidth,this.$eventHub.$emit("window_resize",{width:Ze.windowWidth,height:Ze.windowHeight})}},created:function(){var t;function e(){t||(t=setTimeout((function(){t=null,Qe.handlerResize()}),200))}window.addEventListener("resize",e,!1)},errorCaptured:function(t,e,i){return console.error("App.errorCaptured",t,e,i),!1},destroyed:function(){}});r["a"].filter("toFixed",(function(t,e){var i=Number(t);return e=Number.isInteger(e)?e:2,Number.isFinite(i)?i.toFixed(e):t||"-"})),GetTqsdkUrl().then((function(t){var e=t["ins_url"],i=t["md_url"],n=t["ws_url"];if("https://openmd.shinnytech.com/t/md/symbols/latest.json"===e){var s=a()().format("YYYY-MM-DD HH:mm:ss.SSSSSS");e="https://openmd.shinnytech.com/t/md/symbols/".concat(s,".json")}if(t["replay_dt"]){var o=e.indexOf("/symbol");x.state.ctrl_url=e.substring(0,o);var h=a()(t["replay_dt"]/1e6).format("YYYY-MM-DD HH:mm:ss");h+=(Math.random()+"").substring(2,8),e="https://openmd.shinnytech.com/t/md/symbols/".concat(h,".json")}r["a"].$tqsdk=new Ce["a"]({symbolsServerUrl:e,wsQuoteUrl:i,autoInit:!1}),r["a"].prototype.$tqsdk=r["a"].$tqsdk,r["a"].$tqsdk.initMdWebsocket();var c=r["a"].$tqsdk.addWebSocket(n);c.on("close",(function(){x.commit("set_py_file_status",!1)})),c.on("open",(function(){x.commit("set_py_file_status",!0)})),r["a"].$tqsdk.on("rtn_data",(function(){var t=r["a"].$tqsdk.get_by_path(["_tqsdk_backtest"]);t&&t.current_dt&&(x.state.start_dt=t.start_dt,x.state.end_dt=t.end_dt);var e=r["a"].$tqsdk.get_by_path(["_tqsdk_replay"]);e&&e.replay_dt&&(x.state.replay_dt=e.replay_dt);var i=r["a"].$tqsdk.get_by_path(["action"]);""===x.state.mode&&i&&x.commit("set_action",i)})),Qe.$mount("#app")}))},"5a46":function(t,e,i){},"5ab6":function(t,e,i){"use strict";var r=i("d85d"),n=i.n(r);n.a},"5c0b":function(t,e,i){"use strict";var r=i("9c0c"),n=i.n(r);n.a},"5c44":function(t,e,i){},6491:function(t,e,i){},"657e":function(t,e,i){},"889f":function(t,e,i){},"8e24":function(t,e,i){"use strict";var r=i("889f"),n=i.n(r);n.a},"8fde":function(t,e,i){},"9c0c":function(t,e,i){},a124:function(t,e,i){"use strict";var r=i("657e"),n=i.n(r);n.a},a240:function(t,e,i){"use strict";var r=i("07f6"),n=i.n(r);n.a},a829:function(t,e,i){},b7de:function(t,e,i){"use strict";var r=i("5096"),n=i.n(r);n.a},b9e2:function(t,e,i){"use strict";var r=i("a829"),n=i.n(r);n.a},beea:function(t,e,i){"use strict";(function(t){i("a4d3"),i("e01a"),i("d28b"),i("99af"),i("cb29"),i("4160"),i("a630"),i("c975"),i("a15b"),i("fb6a"),i("45fc"),i("4e82"),i("accc"),i("f4b3"),i("0d03"),i("b0c0"),i("a9e3"),i("f00c"),i("8ba4"),i("9129"),i("b680"),i("7039"),i("3410"),i("e21d"),i("b64b"),i("d3b7"),i("acd8"),i("e25e"),i("4d63"),i("ac1f"),i("5377"),i("25f0"),i("8a79"),i("3ca3"),i("466d"),i("4d90"),i("5319"),i("1276"),i("4c53"),i("159b"),i("ddb0"),i("bf19");var r=i("9aa6"),n=i("902f"),a=i("c3c5"),s=i("8b83"),o=i("c65a"),h=i("c03e"),c=i("9f12"),l=i("53fe"),u=i("bf2d"),d=i("19b8"),f="0.0.1";"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function m(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function p(t,e){return e={exports:{}},t(e,e.exports),e.exports}var g=p((function(t){var e=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=e)})),v=(g.version,p((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}))),y=p((function(t){var e="__core-js_shared__",i=v[e]||(v[e]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:g.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),b=0,_=Math.random(),w=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++b+_).toString(36))},k=p((function(t){var e=y("wks"),i=v.Symbol,r="function"==typeof i,n=t.exports=function(t){return e[t]||(e[t]=r&&i[t]||(r?i:w)("Symbol."+t))};n.store=e})),x=function(t){return"object"===Object(u["a"])(t)?null!==t:"function"===typeof t},S=function(t){if(!x(t))throw TypeError(t+" is not an object!");return t},O=function(t){try{return!!t()}catch(e){return!0}},M=!O((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),j=v.document,D=x(j)&&x(j.createElement),C=function(t){return D?j.createElement(t):{}},P=!M&&!O((function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})),T=function(t,e){if(!x(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!x(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!x(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!x(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Y=Object.defineProperty,q=M?Object.defineProperty:function(t,e,i){if(S(t),e=T(e,!0),S(i),P)try{return Y(t,e,i)}catch(r){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t},A={f:q},I=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},N=M?function(t,e,i){return A.f(t,e,I(1,i))}:function(t,e,i){return t[e]=i,t},W=k("unscopables"),F=Array.prototype;void 0==F[W]&&N(F,W,{});var G=function(t){F[W][t]=!0},H=function(t,e){return{value:e,done:!!t}},E={},L={}.toString,$=function(t){return L.call(t).slice(8,-1)},R=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==$(t)?t.split(""):Object(t)},z=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},U=function(t){return R(z(t))},V={}.hasOwnProperty,B=function(t,e){return V.call(t,e)},Z=y("native-function-to-string",Function.toString),Q=p((function(t){var e=w("src"),i="toString",r=(""+Z).split(i);g.inspectSource=function(t){return Z.call(t)},(t.exports=function(t,i,n,a){var s="function"==typeof n;s&&(B(n,"name")||N(n,"name",i)),t[i]!==n&&(s&&(B(n,e)||N(n,e,t[i]?""+t[i]:r.join(String(i)))),t===v?t[i]=n:a?t[i]?t[i]=n:N(t,i,n):(delete t[i],N(t,i,n)))})(Function.prototype,i,(function(){return"function"==typeof this&&this[e]||Z.call(this)}))})),K=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},J=function(t,e,i){if(K(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)}}return function(){return t.apply(e,arguments)}},X="prototype",tt=function t(e,i,r){var n,a,s,o,h=e&t.F,c=e&t.G,l=e&t.S,u=e&t.P,d=e&t.B,f=c?v:l?v[i]||(v[i]={}):(v[i]||{})[X],m=c?g:g[i]||(g[i]={}),p=m[X]||(m[X]={});for(n in c&&(r=i),r)a=!h&&f&&void 0!==f[n],s=(a?f:r)[n],o=d&&a?J(s,v):u&&"function"==typeof s?J(Function.call,s):s,f&&Q(f,n,s,e&t.U),m[n]!=s&&N(m,n,o),u&&p[n]!=s&&(p[n]=s)};v.core=g,tt.F=1,tt.G=2,tt.S=4,tt.P=8,tt.B=16,tt.W=32,tt.U=64,tt.R=128;var et=tt,it=Math.ceil,rt=Math.floor,nt=function(t){return isNaN(t=+t)?0:(t>0?rt:it)(t)},at=Math.min,st=function(t){return t>0?at(nt(t),9007199254740991):0},ot=Math.max,ht=Math.min,ct=function(t,e){return t=nt(t),t<0?ot(t+e,0):ht(t,e)},lt=function(t){return function(e,i,r){var n,a=U(e),s=st(a.length),o=ct(r,s);if(t&&i!=i){while(s>o)if(n=a[o++],n!=n)return!0}else for(;s>o;o++)if((t||o in a)&&a[o]===i)return t||o||0;return!t&&-1}},ut=y("keys"),dt=function(t){return ut[t]||(ut[t]=w(t))},ft=lt(!1),mt=dt("IE_PROTO"),pt=function(t,e){var i,r=U(t),n=0,a=[];for(i in r)i!=mt&&B(r,i)&&a.push(i);while(e.length>n)B(r,i=e[n++])&&(~ft(a,i)||a.push(i));return a},gt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),vt=Object.keys||function(t){return pt(t,gt)},yt=M?Object.defineProperties:function(t,e){S(t);var i,r=vt(e),n=r.length,a=0;while(n>a)A.f(t,i=r[a++],e[i]);return t},bt=v.document,_t=bt&&bt.documentElement,wt=dt("IE_PROTO"),kt=function(){},xt="prototype",St=function(){var t,e=C("iframe"),i=gt.length,r="<",n=">";e.style.display="none",_t.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+n+"document.F=Object"+r+"/script"+n),t.close(),St=t.F;while(i--)delete St[xt][gt[i]];return St()},Ot=Object.create||function(t,e){var i;return null!==t?(kt[xt]=S(t),i=new kt,kt[xt]=null,i[wt]=t):i=St(),void 0===e?i:yt(i,e)},Mt=A.f,jt=k("toStringTag"),Dt=function(t,e,i){t&&!B(t=i?t:t.prototype,jt)&&Mt(t,jt,{configurable:!0,value:e})},Ct={};N(Ct,k("iterator"),(function(){return this}));var Pt=function(t,e,i){t.prototype=Ot(Ct,{next:I(1,i)}),Dt(t,e+" Iterator")},Tt=function(t){return Object(z(t))},Yt=dt("IE_PROTO"),qt=Object.prototype,At=Object.getPrototypeOf||function(t){return t=Tt(t),B(t,Yt)?t[Yt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?qt:null},It=k("iterator"),Nt=!([].keys&&"next"in[].keys()),Wt="@@iterator",Ft="keys",Gt="values",Ht=function(){return this},Et=function(t,e,i,r,n,a,s){Pt(i,e,r);var o,h,c,l=function(t){if(!Nt&&t in m)return m[t];switch(t){case Ft:return function(){return new i(this,t)};case Gt:return function(){return new i(this,t)}}return function(){return new i(this,t)}},u=e+" Iterator",d=n==Gt,f=!1,m=t.prototype,p=m[It]||m[Wt]||n&&m[n],g=p||l(n),v=n?d?l("entries"):g:void 0,y="Array"==e&&m.entries||p;if(y&&(c=At(y.call(new t)),c!==Object.prototype&&c.next&&(Dt(c,u,!0),"function"!=typeof c[It]&&N(c,It,Ht))),d&&p&&p.name!==Gt&&(f=!0,g=function(){return p.call(this)}),(Nt||f||!m[It])&&N(m,It,g),E[e]=g,E[u]=Ht,n)if(o={values:d?g:l(Gt),keys:a?g:l(Ft),entries:v},s)for(h in o)h in m||Q(m,h,o[h]);else et(et.P+et.F*(Nt||f),e,o);return o},Lt=Et(Array,"Array",(function(t,e){this._t=U(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,H(1)):H(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values");E.Arguments=E.Array,G("keys"),G("values"),G("entries");for(var $t=k("iterator"),Rt=k("toStringTag"),zt=E.Array,Ut={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Vt=vt(Ut),Bt=0;Bt<Vt.length;Bt++){var Zt,Qt=Vt[Bt],Kt=Ut[Qt],Jt=v[Qt],Xt=Jt&&Jt.prototype;if(Xt&&(Xt[$t]||N(Xt,$t,zt),Xt[Rt]||N(Xt,Rt,Qt),E[Qt]=zt,Kt))for(Zt in Lt)Xt[Zt]||Q(Xt,Zt,Lt[Zt],!0)}function te(t,e){return ee(t)||ie(t,e)||re()}function ee(t){if(Array.isArray(t))return t}function ie(t,e){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(i.push(s.value),e&&i.length===e)break}catch(h){n=!0,a=h}finally{try{r||null==o["return"]||o["return"]()}finally{if(n)throw a}}return i}function re(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var ne=p((function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,r,a,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new n(r,a||t,s),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,s=new Array(a);n<a;n++)s[n]=r[n].fn;return s},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,n,a,s){var o=i?i+t:t;if(!this._events[o])return!1;var h,c,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,a),!0;case 6:return l.fn.call(l.context,e,r,n,a,s),!0}for(c=1,h=new Array(u-1);c<u;c++)h[c-1]=arguments[c];l.fn.apply(l.context,h)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,n);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];l[c].fn.apply(l[c].context,h)}}return!0},o.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,n){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||s(this,a);else{for(var h=0,c=[],l=o.length;h<l;h++)(o[h].fn!==e||n&&!o[h].once||r&&o[h].context!==r)&&c.push(o[h]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})),ae=Object(d["l"])(".%L"),se=Object(d["l"])(":%S"),oe=Object(d["l"])("%H:%M"),he=Object(d["l"])("%H:%M"),ce=Object(d["l"])("%m%d"),le=Object(d["l"])("%m%d"),ue=Object(d["l"])("%y");function de(t){return(Object(d["p"])(t)<t?ae:Object(d["n"])(t)<t?se:Object(d["m"])(t)<t?oe:Object(d["k"])(t)<t?he:Object(d["o"])(t)<t?ce:Object(d["q"])(t)<t?le:ue)(t)}var fe=function(){function t(e){Object(c["a"])(this,t),this.chart=e,this.xScale=Object(d["i"])(),this.xAxis=Object(d["a"])().scale(this.xScale),this._init()}return Object(l["a"])(t,[{key:"_init",value:function(){this.rootG=this.chart.rootG.append("g").attr("class","x axis"),this.resetPosition()}},{key:"resetPosition",value:function(){this.rootG.attr("transform","translate("+Math.floor(this.chart.bar.barWidth/2)+","+(this.chart.innerHeight+1)+")"),this.xScale.rangeRound([0,this.chart.bar.barNumbers*this.chart.bar.barWidth-this.chart.bar.barWidth])}},{key:"draw",value:function(t,e,i){this.xScale.domain([t,e]),this.xAxis.tickFormat((function(t,e){return i[t]&&i[t].datetime?de(i[t].datetime/1e6):""})),this.rootG.call(this.xAxis)}}]),t}();function me(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=Number(t),r=Number.isInteger(e)?e:2;return Number.isFinite(i)?i.toFixed(r):t}var pe=function(){function t(e){Object(c["a"])(this,t),this.tqchart=e,this.svgG=this.tqchart.svg.append("g").attr("class","crosshair-container").attr("visibility","hidden"),this.rootG=this.svgG.append("g").attr("class","crosshair-content").attr("transform","translate("+this.tqchart.margin.left+","+this.tqchart.margin.top+")"),this.rectG=this.rootG.append("rect").attr("class","crosshair-cursor").attr("width",this.tqchart.innerWidth).attr("height",this.tqchart.innerHeight),this.klinePanel=this.svgG.append("g").attr("class","kline panel"),this.klinePanelWidth=100,this.klinePanelHeight=144,this.klinePanelDefaultColor="#333333",this.klinePanel.append("rect").attr("x",.5).attr("y",.5).attr("width",this.klinePanelWidth).attr("height",this.klinePanelHeight).attr("stroke","#DDDDDD"),this.klinePanel.append("text").attr("x",0).attr("y",0),this._initCrosshairline(),this._initAxisannotation()}return Object(l["a"])(t,[{key:"_initCrosshairline",value:function(){this.rootG.append("g").attr("class","crosshair horizontal").append("line").attr("x1",0).attr("y1",0).attr("x2",this.tqchart.innerWidth).attr("y2",0).attr("stroke","#aaaaaa").attr("stroke-dasharray","2"),this.rootG.append("g").attr("class","crosshair vertical").append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",this.tqchart.innerHeight).attr("stroke","#aaaaaa").attr("stroke-dasharray","2")}},{key:"_initAxisannotation",value:function(){this.rootG.append("g").attr("class","axisannotation x").attr("transform","translate(0,"+(this.tqchart.innerHeight+2)+")"),this.rootG.append("g").attr("class","axisannotation y left").attr("transform","translate(-"+(this.tqchart.margin.left-1)+",0)"),this.rootG.append("g").attr("class","axisannotation y right").attr("transform","translate("+(this.tqchart.innerWidth+1)+",0)"),this.rootG.select("g.axisannotation.x").append("rect").style("fill","#eeeeee").attr("opacity","0.8").attr("width","120px").attr("height","14px"),this.rootG.select("g.axisannotation.x").append("text").attr("x",1).attr("y",12),this.rootG.select("g.axisannotation.y.left").append("rect").style("fill","#FAFAFA").attr("opacity","0.9").attr("width",this.tqchart.margin.left-2).attr("height","16px"),this.rootG.select("g.axisannotation.y.left").append("text").attr("x",this.tqchart.margin.left-2).attr("y",13).attr("text-anchor","end"),this.rootG.select("g.axisannotation.y.right").append("rect").style("fill","#FAFAFA").attr("opacity","0.9").attr("width",this.tqchart.margin.right-2).attr("height","16px"),this.rootG.select("g.axisannotation.y.right").append("text").attr("x",2).attr("y",13)}},{key:"resize",value:function(){this.rectG.attr("width",this.tqchart.innerWidth).attr("height",this.tqchart.innerHeight),this.rootG.select("g.crosshair.horizontal line").attr("x2",this.tqchart.innerWidth),this.rootG.select("g.crosshair.vertical line").attr("y2",this.tqchart.innerHeight),this.rootG.select("g.axisannotation.x").attr("transform","translate(0,"+this.tqchart.innerHeight+")"),this.rootG.select("g.axisannotation.y.right").attr("transform","translate("+(this.tqchart.innerWidth+1)+",0)")}},{key:"update",value:function(t,e){var i=Math.floor(t/this.tqchart.bar.barWidth),r=i*this.tqchart.bar.barWidth+this.tqchart.bar.barWidth/2;this.rootG.select("g.crosshair.horizontal line").attr("y1",e+.5).attr("y2",e+.5),this.rootG.select("g.crosshair.vertical line").attr("x1",r).attr("x2",r);var n=this.tqchart.mainSeries;if(n&&n.last_id>-1&&n.data&&this.tqchart.range.leftId>-1){var a=this.tqchart.range.leftId+i,s=n.data[a],o=n.data[a-1];if(!s)return;this._updateKlinePanel(r,s,o),this._updateXAxisannotation(r,s.datetime);var h=this.tqchart.getBoardByYPosition(e);h&&this._updateYAxisannotation(e,h)}}},{key:"_updateKlinePanel",value:function(t,e,i){var r=this,n=[Object(d["l"])("%Y-%m-%d (%w)")(e.datetime/1e6),Object(d["l"])("%H:%M:%S")(e.datetime/1e6),"开盘",me(e.open,this.tqchart.price_decs),"最高",me(e.high,this.tqchart.price_decs),"最低",me(e.low,this.tqchart.price_decs),"收盘",me(e.close,this.tqchart.price_decs),"成交量",e.volume,"持仓量",e.close_oi],a=null;i&&i.close&&(a=me(e.close-i.close,this.tqchart.price_decs),n.push("涨跌"),n.push(a),n.push("涨跌幅"),n.push(me(a/i.close*100,2)+"%"));var s=this.klinePanel.select("text").selectAll("tspan").data(n);s.enter().append("tspan").merge(s).attr("x",(function(t,e){return e>1&&e%2===1?r.klinePanelWidth-1:1})).attr("dy",(function(t,e){return e>1&&e%2===1?"0px":"14px"})).attr("text-anchor",(function(t,e){return e>1&&e%2===1?"end":"start"})).attr("class",(function(t,e){if(15===e||17===e){if(a>0)return"up";if(a<0)return"down"}return""})).text((function(t){return t})).exit().remove();var o=2;t<this.klinePanelWidth-this.tqchart.margin.left&&(o=this.tqchart.outerWidth-2-this.klinePanelWidth),this.klinePanel.attr("transform","translate("+o+",0)")}},{key:"_updateXAxisannotation",value:function(t,e){this.rootG.select("g.axisannotation.x rect").attr("x",t-40),this.rootG.select("g.axisannotation.x text").text(Object(d["l"])("%Y-%m-%d %H:%M:%S")(e/1e6)).attr("x",t-38)}},{key:"_updateYAxisannotation",value:function(t,e){for(var i=0,r=["left","right"];i<r.length;i++){var n=r[i],a=e[n+"YAxis"],s=["g","axisannotation","y",n].join(".");if(a){var o=me(a.yScale.invert(t-e.top),"main"===e.boardId&&"right"===n&&this.tqchart.price_decs?this.tqchart.price_decs:0);if(!Number.isNaN(o)){this.rootG.select(s).attr("visibility","visible"),this.rootG.select(s+" rect").attr("y",t-10),this.rootG.select(s+" text").text(o).attr("y",t+2);continue}}this.rootG.select("g.axisannotation.y.left").attr("visibility","hidden")}}},{key:"show",value:function(){this.svgG.attr("visibility","visible")}},{key:"hide",value:function(){this.svgG.attr("visibility","hidden"),this.rootG.selectAll("g.axisannotation.y").attr("visibility","hidden")}},{key:"drag",value:function(t){t?this.rectG.attr("class","crosshair-cursor drag"):this.rectG.attr("class","crosshair-cursor")}}]),t}(),ge=function(){function t(e,i){Object(c["a"])(this,t),this.board=e,this.align=i,this.yScale=Object(d["i"])().range([this.board.height,0]),this.yAxis="left"===i?Object(d["b"])():Object(d["c"])(),this.yAxis.scale(this.yScale),this._init()}return Object(l["a"])(t,[{key:"_init",value:function(){this.rootG=this.board.rootG.append("g").attr("class","y axis "+this.align),this.resetPosition()}},{key:"resetPosition",value:function(){this.yScale.range([this.board.height,0]),"right"===this.align&&this.rootG.attr("transform","translate("+this.board.width+",0)")}},{key:"getTicks",value:function(){var t=[],e=this;return this.rootG.selectAll(".tick").each((function(i){t.push(Math.round(e.yScale(i)))})),t}},{key:"draw",value:function(t){this.yScale.domain(t),this.yAxis.ticks("main"===this.board.boardId?6:3),this.rootG.call(this.yAxis)}}]),t}(),ve=function(){function t(e,i){Object(c["a"])(this,t);var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",n=arguments.length>3?arguments[3]:void 0;this.tqchart=e,this.parentSvg=i,this.board=n,this.rootG=this.parentSvg.append("g").attr("class","background"),this.direction=r,"horizontal"===this.direction&&this.rootG.append("line").attr("class","border").attr("x1",-this.tqchart.margin.left).attr("y1",-.5).attr("x2",this.tqchart.innerWidth+this.tqchart.margin.right).attr("y2",-.5)}return Object(l["a"])(t,[{key:"clear",value:function(){this.rootG.selectAll("line").remove()}},{key:"draw",value:function(){if("vertical"===this.direction){var t=this.tqchart.xAxis.getTicks();this._drawVerticalLines(t)}else if("horizontal"===this.direction){var e=this.board.rightYAxis.getTicks();this._drawHorizontalLines(e)}}},{key:"resize",value:function(){"vertical"===this.direction?this.rootG.selectAll("line").attr("y2",this.tqchart.innerHeight):"horizontal"===this.direction&&this.rootG.selectAll("line").attr("x2",this.tqchart.innerWidth)}},{key:"_drawVerticalLines",value:function(t){var e=this.tqchart.innerHeight,i=this.rootG.selectAll("line.bgline").data(t);i.enter().append("line").attr("class","bgline").attr("y1",0).attr("y2",e).merge(i).attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),i.exit().remove()}},{key:"_drawHorizontalLines",value:function(t){var e=this.tqchart.innerWidth,i=this.rootG.selectAll("line.bgline").data(t);i.enter().append("line").attr("class","bgline").attr("x1",0).attr("x2",e).merge(i).attr("y1",(function(t){return t+.5})).attr("y2",(function(t){return t+.5})),i.exit().remove()}}]),t}(),ye=2,be=function(){function t(e,i,r,n,a){Object(c["a"])(this,t),this.tqchart=e,this.boardId=i,this.top=r,this.height=n,this.width=this.tqchart.innerWidth,this.rootG=this.tqchart.rootG.append("g").attr("class",this.boardId).attr("transform","translate(0,"+this.top+")"),this.background=new ve(this.tqchart,this.rootG,"horizontal",this),this.plotG=this.rootG.append("g").attr("class",this.boardId+" plots"),this.maskG=this.rootG.append("mask").attr("id","mask-"+this.boardId).append("rect").attr("x","0").attr("y","0").attr("width",this.width).attr("height",this.height).style("fill","#FFFFFF").attr("stroke","none"),this.markG=this.rootG.append("g").attr("mask","url(#mask-"+this.boardId+")").attr("class",this.boardId+" marks"),this.nameG=this.markG.append("text").attr("class",this.boardId+" name text").attr("dy","12").attr("dx","2").text(this.boardId.toUpperCase()),this.leftYAxis=new ge(this,"left"),this.rightYAxis=new ge(this,"right")}return Object(l["a"])(t,[{key:"resetPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.top,i=void 0===e?this.top:e,r=t.height,n=void 0===r?this.height:r;this.top=i,this.rootG.attr("transform","translate(0,"+this.top+")"),this.height=n,this.width=this.tqchart.innerWidth,this.maskG.attr("width",this.width).attr("height",this.height),this.background.resize(),this.leftYAxis&&this.leftYAxis.resetPosition(),this.rightYAxis.resetPosition()}},{key:"setDomain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";this[e+"Domain"]=t}},{key:"draw",value:function(t,e,i){this.leftYAxis.draw(this.leftDomain),this.rightYAxis.draw(this.rightDomain),this.background.draw()}},{key:"remove",value:function(){this.rootG.remove()}}],[{key:"GetMutilPlotsHeight",value:function(t,e){for(var i=e-ye*(t-1),r=1/t,n=Math.ceil(i*r*.7),a=i-n*(t-1),s=[{top:0,height:a}],o=1;o<t;o++)s[o]={height:n,top:s[o-1].top+s[o-1].height+ye};return s}}]),t}(),_e=k("match"),we=function(t){var e;return x(t)&&(void 0!==(e=t[_e])?!!e:"RegExp"==$(t))},ke=k("species"),xe=function(t,e){var i,r=S(t).constructor;return void 0===r||void 0==(i=S(r)[ke])?e:K(i)},Se=function(t){return function(e,i){var r,n,a=String(z(e)),s=nt(i),o=a.length;return s<0||s>=o?t?"":void 0:(r=a.charCodeAt(s),r<55296||r>56319||s+1===o||(n=a.charCodeAt(s+1))<56320||n>57343?t?a.charAt(s):r:t?a.slice(s,s+2):n-56320+(r-55296<<10)+65536)}},Oe=Se(!0),Me=function(t,e,i){return e+(i?Oe(t,e).length:1)},je=k("toStringTag"),De="Arguments"==$(function(){return arguments}()),Ce=function(t,e){try{return t[e]}catch(i){}},Pe=function(t){var e,i,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=Ce(e=Object(t),je))?i:De?$(e):"Object"==(r=$(e))&&"function"==typeof e.callee?"Arguments":r},Te=RegExp.prototype.exec,Ye=function(t,e){var i=t.exec;if("function"===typeof i){var r=i.call(t,e);if("object"!==Object(u["a"])(r))throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Pe(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Te.call(t,e)},qe=function(){var t=S(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Ae=RegExp.prototype.exec,Ie=String.prototype.replace,Ne=Ae,We="lastIndex",Fe=function(){var t=/a/,e=/b*/g;return Ae.call(t,"a"),Ae.call(e,"a"),0!==t[We]||0!==e[We]}(),Ge=void 0!==/()??/.exec("")[1],He=Fe||Ge;He&&(Ne=function(t){var e,i,r,n,a=this;return Ge&&(i=new RegExp("^"+a.source+"$(?!\\s)",qe.call(a))),Fe&&(e=a[We]),r=Ae.call(a,t),Fe&&r&&(a[We]=a.global?r.index+r[0].length:e),Ge&&r&&r.length>1&&Ie.call(r[0],i,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)})),r});var Ee=Ne;et({target:"RegExp",proto:!0,forced:Ee!==/./.exec},{exec:Ee});var Le=k("species"),$e=!O((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Re=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}(),ze=function(t,e,i){var r=k(t),n=!O((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),a=n?!O((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[Le]=function(){return i}),i[r](""),!e})):void 0;if(!n||!a||"replace"===t&&!$e||"split"===t&&!Re){var s=/./[r],o=i(z,r,""[t],(function(t,e,i,r,a){return e.exec===Ee?n&&!a?{done:!0,value:s.call(e,i,r)}:{done:!0,value:t.call(i,e,r)}:{done:!1}})),h=o[0],c=o[1];Q(String.prototype,t,h),N(RegExp.prototype,r,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}},Ue=Math.min,Ve=[].push,Be="split",Ze="length",Qe="lastIndex",Ke=4294967295,Je=!O((function(){RegExp(Ke,"y")}));ze("split",2,(function(t,e,i,r){var n;return n="c"=="abbc"[Be](/(b)*/)[1]||4!="test"[Be](/(?:)/,-1)[Ze]||2!="ab"[Be](/(?:ab)*/)[Ze]||4!="."[Be](/(.?)(.?)/)[Ze]||"."[Be](/()()/)[Ze]>1||""[Be](/.?/)[Ze]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!we(t))return i.call(r,t,e);var n,a,s,o=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,l=void 0===e?Ke:e>>>0,u=new RegExp(t.source,h+"g");while(n=Ee.call(u,r)){if(a=u[Qe],a>c&&(o.push(r.slice(c,n.index)),n[Ze]>1&&n.index<r[Ze]&&Ve.apply(o,n.slice(1)),s=n[0][Ze],c=a,o[Ze]>=l))break;u[Qe]===n.index&&u[Qe]++}return c===r[Ze]?!s&&u.test("")||o.push(""):o.push(r.slice(c)),o[Ze]>l?o.slice(0,l):o}:"0"[Be](void 0,0)[Ze]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,r){var a=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,a,r):n.call(String(a),i,r)},function(t,e){var a=r(n,t,this,e,n!==i);if(a.done)return a.value;var s=S(t),o=String(this),h=xe(s,RegExp),c=s.unicode,l=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Je?"y":"g"),u=new h(Je?s:"^(?:"+s.source+")",l),d=void 0===e?Ke:e>>>0;if(0===d)return[];if(0===o.length)return null===Ye(u,o)?[o]:[];var f=0,m=0,p=[];while(m<o.length){u.lastIndex=Je?m:0;var g,v=Ye(u,Je?o:o.slice(m));if(null===v||(g=Ue(st(u.lastIndex+(Je?0:m)),o.length))===f)m=Me(o,m,c);else{if(p.push(o.slice(f,m)),p.length===d)return p;for(var y=1;y<=v.length-1;y++)if(p.push(v[y]),p.length===d)return p;m=f=g}}return p.push(o.slice(f)),p}]}));var Xe=Math.max,ti=Math.min,ei=Math.floor,ii=/\$([$&`']|\d\d?|<[^>]*>)/g,ri=/\$([$&`']|\d\d?)/g,ni=function(t){return void 0===t?t:String(t)};ze("replace",2,(function(t,e,i,r){return[function(r,n){var a=t(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,a,n):i.call(String(a),r,n)},function(t,e){var a=r(i,t,this,e);if(a.done)return a.value;var s=S(t),o=String(this),h="function"===typeof e;h||(e=String(e));var c=s.global;if(c){var l=s.unicode;s.lastIndex=0}var u=[];while(1){var d=Ye(s,o);if(null===d)break;if(u.push(d),!c)break;var f=String(d[0]);""===f&&(s.lastIndex=Me(o,st(s.lastIndex),l))}for(var m="",p=0,g=0;g<u.length;g++){d=u[g];for(var v=String(d[0]),y=Xe(ti(nt(d.index),o.length),0),b=[],_=1;_<d.length;_++)b.push(ni(d[_]));var w=d.groups;if(h){var k=[v].concat(b,y,o);void 0!==w&&k.push(w);var x=String(e.apply(void 0,k))}else x=n(v,o,y,b,w,e);y>=p&&(m+=o.slice(p,y)+x,p=y+v.length)}return m+o.slice(p)}];function n(t,e,r,n,a,s){var o=r+t.length,h=n.length,c=ri;return void 0!==a&&(a=Tt(a),c=ii),i.call(s,c,(function(i,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(o);case"<":c=a[s.slice(1,-1)];break;default:var l=+s;if(0===l)return i;if(l>h){var u=ei(l/10);return 0===u?i:u<=h?void 0===n[u-1]?s.charAt(1):n[u-1]+s.charAt(1):i}c=n[l-1]}return void 0===c?"":c}))}})),M&&"g"!=/./g.flags&&A.f(RegExp.prototype,"flags",{configurable:!0,get:qe});var ai="toString",si=/./[ai],oi=function(t){Q(RegExp.prototype,ai,t,!0)};O((function(){return"/a/b"!=si.call({source:"a",flags:"b"})}))?oi((function(){var t=S(this);return"/".concat(t.source,"/","flags"in t?t.flags:!M&&t instanceof RegExp?qe.call(t):void 0)})):si.name!=ai&&oi((function(){return si.call(this)}));var hi=p((function(t,e){(function(e,i){t.exports=i()})(0,(function(){var e,i;function r(){return e.apply(null,arguments)}function n(t){e=t}function a(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function s(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function h(t){return void 0===t}function c(t){return"number"===typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function d(t,e){var i,r=[];for(i=0;i<t.length;++i)r.push(e(t[i],i));return r}function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function p(t,e){for(var i in e)f(e,i)&&(t[i]=e[i]);return f(e,"toString")&&(t.toString=e.toString),f(e,"valueOf")&&(t.valueOf=e.valueOf),t}function g(t,e,i,r){return Bi(t,e,i,r,!0).utc()}function v(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(t){return null==t._pf&&(t._pf=v()),t._pf}function b(t){if(null==t._isValid){var e=y(t),r=i.call(e.parsedDateParts,(function(t){return null!=t})),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function _(t){var e=g(NaN);return null!=t?p(y(e),t):y(e).userInvalidated=!0,e}i=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,r=0;r<i;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var w=r.momentProperties=[];function k(t,e){var i,r,n;if(h(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),h(e._i)||(t._i=e._i),h(e._f)||(t._f=e._f),h(e._l)||(t._l=e._l),h(e._strict)||(t._strict=e._strict),h(e._tzm)||(t._tzm=e._tzm),h(e._isUTC)||(t._isUTC=e._isUTC),h(e._offset)||(t._offset=e._offset),h(e._pf)||(t._pf=y(e)),h(e._locale)||(t._locale=e._locale),w.length>0)for(i=0;i<w.length;i++)r=w[i],n=e[r],h(n)||(t[r]=n);return t}var x=!1;function S(t){k(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===x&&(x=!0,r.updateOffset(this),x=!1)}function O(t){return t instanceof S||null!=t&&null!=t._isAMomentObject}function M(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function j(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=M(e)),i}function D(t,e,i){var r,n=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),s=0;for(r=0;r<n;r++)(i&&t[r]!==e[r]||!i&&j(t[r])!==j(e[r]))&&s++;return s+a}function C(t){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function P(t,e){var i=!0;return p((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),i){for(var n,a=[],s=0;s<arguments.length;s++){if(n="","object"===Object(u["a"])(arguments[s])){for(var o in n+="\n["+s+"] ",arguments[0])n+=o+": "+arguments[0][o]+", ";n=n.slice(0,-2)}else n=arguments[s];a.push(n)}C(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)}),e)}var T,Y={};function q(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),Y[t]||(C(e),Y[t]=!0)}function A(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function I(t){var e,i;for(i in t)e=t[i],A(e)?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function N(t,e){var i,r=p({},t);for(i in e)f(e,i)&&(s(t[i])&&s(e[i])?(r[i]={},p(r[i],t[i]),p(r[i],e[i])):null!=e[i]?r[i]=e[i]:delete r[i]);for(i in t)f(t,i)&&!f(e,i)&&s(t[i])&&(r[i]=p({},r[i]));return r}function W(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,T=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)f(t,e)&&i.push(e);return i};var F={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function G(t,e,i){var r=this._calendar[t]||this._calendar["sameElse"];return A(r)?r.call(e,i):r}var H={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function E(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])}var L="Invalid date";function $(){return this._invalidDate}var R="%d",z=/\d{1,2}/;function U(t){return this._ordinal.replace("%d",t)}var V={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function B(t,e,i,r){var n=this._relativeTime[i];return A(n)?n(t,e,i,r):n.replace(/%d/i,t)}function Z(t,e){var i=this._relativeTime[t>0?"future":"past"];return A(i)?i(e):i.replace(/%s/i,e)}var Q={};function K(t,e){var i=t.toLowerCase();Q[i]=Q[i+"s"]=Q[e]=t}function J(t){return"string"===typeof t?Q[t]||Q[t.toLowerCase()]:void 0}function X(t){var e,i,r={};for(i in t)f(t,i)&&(e=J(i),e&&(r[e]=t[i]));return r}var tt={};function et(t,e){tt[t]=e}function it(t){var e=[];for(var i in t)e.push({unit:i,priority:tt[i]});return e.sort((function(t,e){return t.priority-e.priority})),e}function rt(t,e,i){var r=""+Math.abs(t),n=e-r.length,a=t>=0;return(a?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+r}var nt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,at=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,st={},ot={};function ht(t,e,i,r){var n=r;"string"===typeof r&&(n=function(){return this[r]()}),t&&(ot[t]=n),e&&(ot[e[0]]=function(){return rt(n.apply(this,arguments),e[1],e[2])}),i&&(ot[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function ct(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function lt(t){var e,i,r=t.match(nt);for(e=0,i=r.length;e<i;e++)ot[r[e]]?r[e]=ot[r[e]]:r[e]=ct(r[e]);return function(e){var n,a="";for(n=0;n<i;n++)a+=A(r[n])?r[n].call(e,t):r[n];return a}}function ut(t,e){return t.isValid()?(e=dt(e,t.localeData()),st[e]=st[e]||lt(e),st[e](t)):t.localeData().invalidDate()}function dt(t,e){var i=5;function r(t){return e.longDateFormat(t)||t}at.lastIndex=0;while(i>=0&&at.test(t))t=t.replace(at,r),at.lastIndex=0,i-=1;return t}var ft=/\d/,mt=/\d\d/,pt=/\d{3}/,gt=/\d{4}/,vt=/[+-]?\d{6}/,yt=/\d\d?/,bt=/\d\d\d\d?/,_t=/\d\d\d\d\d\d?/,wt=/\d{1,3}/,kt=/\d{1,4}/,xt=/[+-]?\d{1,6}/,St=/\d+/,Ot=/[+-]?\d+/,Mt=/Z|[+-]\d\d:?\d\d/gi,jt=/Z|[+-]\d\d(?::?\d\d)?/gi,Dt=/[+-]?\d+(\.\d{1,3})?/,Ct=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Pt={};function Tt(t,e,i){Pt[t]=A(e)?e:function(t,r){return t&&i?i:e}}function Yt(t,e){return f(Pt,t)?Pt[t](e._strict,e._locale):new RegExp(qt(t))}function qt(t){return At(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,i,r,n){return e||i||r||n})))}function At(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var It={};function Nt(t,e){var i,r=e;for("string"===typeof t&&(t=[t]),c(e)&&(r=function(t,i){i[e]=j(t)}),i=0;i<t.length;i++)It[t[i]]=r}function Wt(t,e){Nt(t,(function(t,i,r,n){r._w=r._w||{},e(t,r._w,r,n)}))}function Ft(t,e,i){null!=e&&f(It,t)&&It[t](e,i._a,i,t)}var Gt=0,Ht=1,Et=2,Lt=3,$t=4,Rt=5,zt=6,Ut=7,Vt=8;function Bt(t){return Zt(t)?366:365}function Zt(t){return t%4===0&&t%100!==0||t%400===0}ht("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),ht(0,["YY",2],0,(function(){return this.year()%100})),ht(0,["YYYY",4],0,"year"),ht(0,["YYYYY",5],0,"year"),ht(0,["YYYYYY",6,!0],0,"year"),K("year","y"),et("year",1),Tt("Y",Ot),Tt("YY",yt,mt),Tt("YYYY",kt,gt),Tt("YYYYY",xt,vt),Tt("YYYYYY",xt,vt),Nt(["YYYYY","YYYYYY"],Gt),Nt("YYYY",(function(t,e){e[Gt]=2===t.length?r.parseTwoDigitYear(t):j(t)})),Nt("YY",(function(t,e){e[Gt]=r.parseTwoDigitYear(t)})),Nt("Y",(function(t,e){e[Gt]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return j(t)+(j(t)>68?1900:2e3)};var Qt,Kt=Xt("FullYear",!0);function Jt(){return Zt(this.year())}function Xt(t,e){return function(i){return null!=i?(ee(this,t,i),r.updateOffset(this,e),this):te(this,t)}}function te(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function ee(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&Zt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),ae(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function ie(t){return t=J(t),A(this[t])?this[t]():this}function re(t,e){if("object"===Object(u["a"])(t)){t=X(t);for(var i=it(t),r=0;r<i.length;r++)this[i[r].unit](t[i[r].unit])}else if(t=J(t),A(this[t]))return this[t](e);return this}function ne(t,e){return(t%e+e)%e}function ae(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=ne(e,12);return t+=(e-i)/12,1===i?Zt(t)?29:28:31-i%7%2}Qt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},ht("M",["MM",2],"Mo",(function(){return this.month()+1})),ht("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),ht("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),K("month","M"),et("month",8),Tt("M",yt),Tt("MM",yt,mt),Tt("MMM",(function(t,e){return e.monthsShortRegex(t)})),Tt("MMMM",(function(t,e){return e.monthsRegex(t)})),Nt(["M","MM"],(function(t,e){e[Ht]=j(t)-1})),Nt(["MMM","MMMM"],(function(t,e,i,r){var n=i._locale.monthsParse(t,r,i._strict);null!=n?e[Ht]=n:y(i).invalidMonth=t}));var se=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,oe="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function he(t,e){return t?a(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||se).test(e)?"format":"standalone"][t.month()]:a(this._months)?this._months:this._months["standalone"]}var ce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function le(t,e){return t?a(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[se.test(e)?"format":"standalone"][t.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}function ue(t,e,i){var r,n,a,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=g([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return i?"MMM"===e?(n=Qt.call(this._shortMonthsParse,s),-1!==n?n:null):(n=Qt.call(this._longMonthsParse,s),-1!==n?n:null):"MMM"===e?(n=Qt.call(this._shortMonthsParse,s),-1!==n?n:(n=Qt.call(this._longMonthsParse,s),-1!==n?n:null)):(n=Qt.call(this._longMonthsParse,s),-1!==n?n:(n=Qt.call(this._shortMonthsParse,s),-1!==n?n:null))}function de(t,e,i){var r,n,a;if(this._monthsParseExact)return ue.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(n=g([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(i&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!i&&this._monthsParse[r].test(t))return r}}function fe(t,e){var i;if(!t.isValid())return t;if("string"===typeof e)if(/^\d+$/.test(e))e=j(e);else if(e=t.localeData().monthsParse(e),!c(e))return t;return i=Math.min(t.date(),ae(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function me(t){return null!=t?(fe(this,t),r.updateOffset(this,!0),this):te(this,"Month")}function pe(){return ae(this.year(),this.month())}var ge=Ct;function ve(t){return this._monthsParseExact?(f(this,"_monthsRegex")||_e.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(f(this,"_monthsShortRegex")||(this._monthsShortRegex=ge),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}var ye=Ct;function be(t){return this._monthsParseExact?(f(this,"_monthsRegex")||_e.call(this),t?this._monthsStrictRegex:this._monthsRegex):(f(this,"_monthsRegex")||(this._monthsRegex=ye),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function _e(){function t(t,e){return e.length-t.length}var e,i,r=[],n=[],a=[];for(e=0;e<12;e++)i=g([2e3,e]),r.push(this.monthsShort(i,"")),n.push(this.months(i,"")),a.push(this.months(i,"")),a.push(this.monthsShort(i,""));for(r.sort(t),n.sort(t),a.sort(t),e=0;e<12;e++)r[e]=At(r[e]),n[e]=At(n[e]);for(e=0;e<24;e++)a[e]=At(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function we(t,e,i,r,n,a,s){var o;return t<100&&t>=0?(o=new Date(t+400,e,i,r,n,a,s),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,i,r,n,a,s),o}function ke(t){var e;if(t<100&&t>=0){var i=Array.prototype.slice.call(arguments);i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function xe(t,e,i){var r=7+e-i,n=(7+ke(t,0,r).getUTCDay()-e)%7;return-n+r-1}function Se(t,e,i,r,n){var a,s,o=(7+i-r)%7,h=xe(t,r,n),c=1+7*(e-1)+o+h;return c<=0?(a=t-1,s=Bt(a)+c):c>Bt(t)?(a=t+1,s=c-Bt(t)):(a=t,s=c),{year:a,dayOfYear:s}}function Oe(t,e,i){var r,n,a=xe(t.year(),e,i),s=Math.floor((t.dayOfYear()-a-1)/7)+1;return s<1?(n=t.year()-1,r=s+Me(n,e,i)):s>Me(t.year(),e,i)?(r=s-Me(t.year(),e,i),n=t.year()+1):(n=t.year(),r=s),{week:r,year:n}}function Me(t,e,i){var r=xe(t,e,i),n=xe(t+1,e,i);return(Bt(t)-r+n)/7}function je(t){return Oe(t,this._week.dow,this._week.doy).week}ht("w",["ww",2],"wo","week"),ht("W",["WW",2],"Wo","isoWeek"),K("week","w"),K("isoWeek","W"),et("week",5),et("isoWeek",5),Tt("w",yt),Tt("ww",yt,mt),Tt("W",yt),Tt("WW",yt,mt),Wt(["w","ww","W","WW"],(function(t,e,i,r){e[r.substr(0,1)]=j(t)}));var De={dow:0,doy:6};function Ce(){return this._week.dow}function Pe(){return this._week.doy}function Te(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ye(t){var e=Oe(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function qe(t,e){return"string"!==typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"===typeof t?t:null):parseInt(t,10)}function Ae(t,e){return"string"===typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Ie(t,e){return t.slice(e,7).concat(t.slice(0,e))}ht("d",0,"do","day"),ht("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),ht("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),ht("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),ht("e",0,0,"weekday"),ht("E",0,0,"isoWeekday"),K("day","d"),K("weekday","e"),K("isoWeekday","E"),et("day",11),et("weekday",11),et("isoWeekday",11),Tt("d",yt),Tt("e",yt),Tt("E",yt),Tt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),Tt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),Tt("dddd",(function(t,e){return e.weekdaysRegex(t)})),Wt(["dd","ddd","dddd"],(function(t,e,i,r){var n=i._locale.weekdaysParse(t,r,i._strict);null!=n?e.d=n:y(i).invalidWeekday=t})),Wt(["d","e","E"],(function(t,e,i,r){e[r]=j(t)}));var Ne="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function We(t,e){var i=a(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Ie(i,this._week.dow):t?i[t.day()]:i}var Fe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Ge(t){return!0===t?Ie(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}var He="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ee(t){return!0===t?Ie(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Le(t,e,i){var r,n,a,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=g([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return i?"dddd"===e?(n=Qt.call(this._weekdaysParse,s),-1!==n?n:null):"ddd"===e?(n=Qt.call(this._shortWeekdaysParse,s),-1!==n?n:null):(n=Qt.call(this._minWeekdaysParse,s),-1!==n?n:null):"dddd"===e?(n=Qt.call(this._weekdaysParse,s),-1!==n?n:(n=Qt.call(this._shortWeekdaysParse,s),-1!==n?n:(n=Qt.call(this._minWeekdaysParse,s),-1!==n?n:null))):"ddd"===e?(n=Qt.call(this._shortWeekdaysParse,s),-1!==n?n:(n=Qt.call(this._weekdaysParse,s),-1!==n?n:(n=Qt.call(this._minWeekdaysParse,s),-1!==n?n:null))):(n=Qt.call(this._minWeekdaysParse,s),-1!==n?n:(n=Qt.call(this._weekdaysParse,s),-1!==n?n:(n=Qt.call(this._shortWeekdaysParse,s),-1!==n?n:null)))}function $e(t,e,i){var r,n,a;if(this._weekdaysParseExact)return Le.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(n=g([2e3,1]).day(r),i&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(i&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(i&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!i&&this._weekdaysParse[r].test(t))return r}}function Re(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=qe(t,this.localeData()),this.add(t-e,"d")):e}function ze(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ue(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Ae(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}var Ve=Ct;function Be(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(f(this,"_weekdaysRegex")||(this._weekdaysRegex=Ve),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}var Ze=Ct;function Qe(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(f(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ze),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}var Ke=Ct;function Je(t){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(f(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ke),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xe(){function t(t,e){return e.length-t.length}var e,i,r,n,a,s=[],o=[],h=[],c=[];for(e=0;e<7;e++)i=g([2e3,1]).day(e),r=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),a=this.weekdays(i,""),s.push(r),o.push(n),h.push(a),c.push(r),c.push(n),c.push(a);for(s.sort(t),o.sort(t),h.sort(t),c.sort(t),e=0;e<7;e++)o[e]=At(o[e]),h[e]=At(h[e]),c[e]=At(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function ti(){return this.hours()%12||12}function ei(){return this.hours()||24}function ii(t,e){ht(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function ri(t,e){return e._meridiemParse}function ni(t){return"p"===(t+"").toLowerCase().charAt(0)}ht("H",["HH",2],0,"hour"),ht("h",["hh",2],0,ti),ht("k",["kk",2],0,ei),ht("hmm",0,0,(function(){return""+ti.apply(this)+rt(this.minutes(),2)})),ht("hmmss",0,0,(function(){return""+ti.apply(this)+rt(this.minutes(),2)+rt(this.seconds(),2)})),ht("Hmm",0,0,(function(){return""+this.hours()+rt(this.minutes(),2)})),ht("Hmmss",0,0,(function(){return""+this.hours()+rt(this.minutes(),2)+rt(this.seconds(),2)})),ii("a",!0),ii("A",!1),K("hour","h"),et("hour",13),Tt("a",ri),Tt("A",ri),Tt("H",yt),Tt("h",yt),Tt("k",yt),Tt("HH",yt,mt),Tt("hh",yt,mt),Tt("kk",yt,mt),Tt("hmm",bt),Tt("hmmss",_t),Tt("Hmm",bt),Tt("Hmmss",_t),Nt(["H","HH"],Lt),Nt(["k","kk"],(function(t,e,i){var r=j(t);e[Lt]=24===r?0:r})),Nt(["a","A"],(function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t})),Nt(["h","hh"],(function(t,e,i){e[Lt]=j(t),y(i).bigHour=!0})),Nt("hmm",(function(t,e,i){var r=t.length-2;e[Lt]=j(t.substr(0,r)),e[$t]=j(t.substr(r)),y(i).bigHour=!0})),Nt("hmmss",(function(t,e,i){var r=t.length-4,n=t.length-2;e[Lt]=j(t.substr(0,r)),e[$t]=j(t.substr(r,2)),e[Rt]=j(t.substr(n)),y(i).bigHour=!0})),Nt("Hmm",(function(t,e,i){var r=t.length-2;e[Lt]=j(t.substr(0,r)),e[$t]=j(t.substr(r))})),Nt("Hmmss",(function(t,e,i){var r=t.length-4,n=t.length-2;e[Lt]=j(t.substr(0,r)),e[$t]=j(t.substr(r,2)),e[Rt]=j(t.substr(n))}));var ai=/[ap]\.?m?\.?/i;function si(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}var oi,hi=Xt("Hours",!0),ci={calendar:F,longDateFormat:H,invalidDate:L,ordinal:R,dayOfMonthOrdinalParse:z,relativeTime:V,months:oe,monthsShort:ce,week:De,weekdays:Ne,weekdaysMin:He,weekdaysShort:Fe,meridiemParse:ai},li={},ui={};function di(t){return t?t.toLowerCase().replace("_","-"):t}function fi(t){var e,i,r,n,a=0;while(a<t.length){n=di(t[a]).split("-"),e=n.length,i=di(t[a+1]),i=i?i.split("-"):null;while(e>0){if(r=mi(n.slice(0,e).join("-")),r)return r;if(i&&i.length>=e&&D(n,i,!0)>=e-1)break;e--}a++}return oi}function mi(e){var i=null;if(!li[e]&&t&&t.exports)try{i=oi._abbr;var r=m;r("./locale/"+e),pi(i)}catch(n){}return li[e]}function pi(t,e){var i;return t&&(i=h(e)?yi(t):gi(t,e),i?oi=i:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),oi._abbr}function gi(t,e){if(null!==e){var i,r=ci;if(e.abbr=t,null!=li[t])q("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=li[t]._config;else if(null!=e.parentLocale)if(null!=li[e.parentLocale])r=li[e.parentLocale]._config;else{if(i=mi(e.parentLocale),null==i)return ui[e.parentLocale]||(ui[e.parentLocale]=[]),ui[e.parentLocale].push({name:t,config:e}),null;r=i._config}return li[t]=new W(N(r,e)),ui[t]&&ui[t].forEach((function(t){gi(t.name,t.config)})),pi(t),li[t]}return delete li[t],null}function vi(t,e){if(null!=e){var i,r,n=ci;r=mi(t),null!=r&&(n=r._config),e=N(n,e),i=new W(e),i.parentLocale=li[t],li[t]=i,pi(t)}else null!=li[t]&&(null!=li[t].parentLocale?li[t]=li[t].parentLocale:null!=li[t]&&delete li[t]);return li[t]}function yi(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return oi;if(!a(t)){if(e=mi(t),e)return e;t=[t]}return fi(t)}function bi(){return T(li)}function _i(t){var e,i=t._a;return i&&-2===y(t).overflow&&(e=i[Ht]<0||i[Ht]>11?Ht:i[Et]<1||i[Et]>ae(i[Gt],i[Ht])?Et:i[Lt]<0||i[Lt]>24||24===i[Lt]&&(0!==i[$t]||0!==i[Rt]||0!==i[zt])?Lt:i[$t]<0||i[$t]>59?$t:i[Rt]<0||i[Rt]>59?Rt:i[zt]<0||i[zt]>999?zt:-1,y(t)._overflowDayOfYear&&(e<Gt||e>Et)&&(e=Et),y(t)._overflowWeeks&&-1===e&&(e=Ut),y(t)._overflowWeekday&&-1===e&&(e=Vt),y(t).overflow=e),t}function wi(t,e,i){return null!=t?t:null!=e?e:i}function ki(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function xi(t){var e,i,r,n,a,s=[];if(!t._d){for(r=ki(t),t._w&&null==t._a[Et]&&null==t._a[Ht]&&Si(t),null!=t._dayOfYear&&(a=wi(t._a[Gt],r[Gt]),(t._dayOfYear>Bt(a)||0===t._dayOfYear)&&(y(t)._overflowDayOfYear=!0),i=ke(a,0,t._dayOfYear),t._a[Ht]=i.getUTCMonth(),t._a[Et]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Lt]&&0===t._a[$t]&&0===t._a[Rt]&&0===t._a[zt]&&(t._nextDay=!0,t._a[Lt]=0),t._d=(t._useUTC?ke:we).apply(null,s),n=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Lt]=24),t._w&&"undefined"!==typeof t._w.d&&t._w.d!==n&&(y(t).weekdayMismatch=!0)}}function Si(t){var e,i,r,n,a,s,o,h;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)a=1,s=4,i=wi(e.GG,t._a[Gt],Oe(Zi(),1,4).year),r=wi(e.W,1),n=wi(e.E,1),(n<1||n>7)&&(h=!0);else{a=t._locale._week.dow,s=t._locale._week.doy;var c=Oe(Zi(),a,s);i=wi(e.gg,t._a[Gt],c.year),r=wi(e.w,c.week),null!=e.d?(n=e.d,(n<0||n>6)&&(h=!0)):null!=e.e?(n=e.e+a,(e.e<0||e.e>6)&&(h=!0)):n=a}r<1||r>Me(i,a,s)?y(t)._overflowWeeks=!0:null!=h?y(t)._overflowWeekday=!0:(o=Se(i,r,n,a,s),t._a[Gt]=o.year,t._dayOfYear=o.dayOfYear)}var Oi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ji=/Z|[+-]\d\d(?::?\d\d)?/,Di=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ci=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Pi=/^\/?Date\((\-?\d+)/i;function Ti(t){var e,i,r,n,a,s,o=t._i,h=Oi.exec(o)||Mi.exec(o);if(h){for(y(t).iso=!0,e=0,i=Di.length;e<i;e++)if(Di[e][1].exec(h[1])){n=Di[e][0],r=!1!==Di[e][2];break}if(null==n)return void(t._isValid=!1);if(h[3]){for(e=0,i=Ci.length;e<i;e++)if(Ci[e][1].exec(h[3])){a=(h[2]||" ")+Ci[e][0];break}if(null==a)return void(t._isValid=!1)}if(!r&&null!=a)return void(t._isValid=!1);if(h[4]){if(!ji.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=n+(a||"")+(s||""),Ei(t)}else t._isValid=!1}var Yi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function qi(t,e,i,r,n,a){var s=[Ai(t),ce.indexOf(e),parseInt(i,10),parseInt(r,10),parseInt(n,10)];return a&&s.push(parseInt(a,10)),s}function Ai(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Ii(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ni(t,e,i){if(t){var r=Fe.indexOf(t),n=new Date(e[0],e[1],e[2]).getDay();if(r!==n)return y(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}var Wi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Fi(t,e,i){if(t)return Wi[t];if(e)return 0;var r=parseInt(i,10),n=r%100,a=(r-n)/100;return 60*a+n}function Gi(t){var e=Yi.exec(Ii(t._i));if(e){var i=qi(e[4],e[3],e[2],e[5],e[6],e[7]);if(!Ni(e[1],i,t))return;t._a=i,t._tzm=Fi(e[8],e[9],e[10]),t._d=ke.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),y(t).rfc2822=!0}else t._isValid=!1}function Hi(t){var e=Pi.exec(t._i);null===e?(Ti(t),!1===t._isValid&&(delete t._isValid,Gi(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Ei(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],y(t).empty=!0;var e,i,n,a,s,o=""+t._i,h=o.length,c=0;for(n=dt(t._f,t._locale).match(nt)||[],e=0;e<n.length;e++)a=n[e],i=(o.match(Yt(a,t))||[])[0],i&&(s=o.substr(0,o.indexOf(i)),s.length>0&&y(t).unusedInput.push(s),o=o.slice(o.indexOf(i)+i.length),c+=i.length),ot[a]?(i?y(t).empty=!1:y(t).unusedTokens.push(a),Ft(a,i,t)):t._strict&&!i&&y(t).unusedTokens.push(a);y(t).charsLeftOver=h-c,o.length>0&&y(t).unusedInput.push(o),t._a[Lt]<=12&&!0===y(t).bigHour&&t._a[Lt]>0&&(y(t).bigHour=void 0),y(t).parsedDateParts=t._a.slice(0),y(t).meridiem=t._meridiem,t._a[Lt]=Li(t._locale,t._a[Lt],t._meridiem),xi(t),_i(t)}else Gi(t);else Ti(t)}function Li(t,e,i){var r;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(r=t.isPM(i),r&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function $i(t){var e,i,r,n,a;if(0===t._f.length)return y(t).invalidFormat=!0,void(t._d=new Date(NaN));for(n=0;n<t._f.length;n++)a=0,e=k({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[n],Ei(e),b(e)&&(a+=y(e).charsLeftOver,a+=10*y(e).unusedTokens.length,y(e).score=a,(null==r||a<r)&&(r=a,i=e));p(t,i||e)}function Ri(t){if(!t._d){var e=X(t._i);t._a=d([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),xi(t)}}function zi(t){var e=new S(_i(Ui(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ui(t){var e=t._i,i=t._f;return t._locale=t._locale||yi(t._l),null===e||void 0===i&&""===e?_({nullInput:!0}):("string"===typeof e&&(t._i=e=t._locale.preparse(e)),O(e)?new S(_i(e)):(l(e)?t._d=e:a(i)?$i(t):i?Ei(t):Vi(t),b(t)||(t._d=null),t))}function Vi(t){var e=t._i;h(e)?t._d=new Date(r.now()):l(e)?t._d=new Date(e.valueOf()):"string"===typeof e?Hi(t):a(e)?(t._a=d(e.slice(0),(function(t){return parseInt(t,10)})),xi(t)):s(e)?Ri(t):c(e)?t._d=new Date(e):r.createFromInputFallback(t)}function Bi(t,e,i,r,n){var h={};return!0!==i&&!1!==i||(r=i,i=void 0),(s(t)&&o(t)||a(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=n,h._l=i,h._i=t,h._f=e,h._strict=r,zi(h)}function Zi(t,e,i,r){return Bi(t,e,i,r,!1)}r.createFromInputFallback=P("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Qi=P("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Zi.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:_()})),Ki=P("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Zi.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:_()}));function Ji(t,e){var i,r;if(1===e.length&&a(e[0])&&(e=e[0]),!e.length)return Zi();for(i=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](i)||(i=e[r]);return i}function Xi(){var t=[].slice.call(arguments,0);return Ji("isBefore",t)}function tr(){var t=[].slice.call(arguments,0);return Ji("isAfter",t)}var er=function(){return Date.now?Date.now():+new Date},ir=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(t){for(var e in t)if(-1===Qt.call(ir,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,r=0;r<ir.length;++r)if(t[ir[r]]){if(i)return!1;parseFloat(t[ir[r]])!==j(t[ir[r]])&&(i=!0)}return!0}function nr(){return this._isValid}function ar(){return jr(NaN)}function sr(t){var e=X(t),i=e.year||0,r=e.quarter||0,n=e.month||0,a=e.week||e.isoWeek||0,s=e.day||0,o=e.hour||0,h=e.minute||0,c=e.second||0,l=e.millisecond||0;this._isValid=rr(e),this._milliseconds=+l+1e3*c+6e4*h+1e3*o*60*60,this._days=+s+7*a,this._months=+n+3*r+12*i,this._data={},this._locale=yi(),this._bubble()}function or(t){return t instanceof sr}function hr(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function cr(t,e){ht(t,0,0,(function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+rt(~~(t/60),2)+e+rt(~~t%60,2)}))}cr("Z",":"),cr("ZZ",""),Tt("Z",jt),Tt("ZZ",jt),Nt(["Z","ZZ"],(function(t,e,i){i._useUTC=!0,i._tzm=ur(jt,t)}));var lr=/([\+\-]|\d\d)/gi;function ur(t,e){var i=(e||"").match(t);if(null===i)return null;var r=i[i.length-1]||[],n=(r+"").match(lr)||["-",0,0],a=60*n[1]+j(n[2]);return 0===a?0:"+"===n[0]?a:-a}function dr(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(O(t)||l(t)?t.valueOf():Zi(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),r.updateOffset(i,!1),i):Zi(t).local()}function fr(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function mr(t,e,i){var n,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"===typeof t){if(t=ur(jt,t),null===t)return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(n=fr(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),a!==t&&(!e||this._changeInProgress?Yr(this,jr(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:fr(this)}function pr(t,e){return null!=t?("string"!==typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function gr(t){return this.utcOffset(0,t)}function vr(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(fr(this),"m")),this}function yr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var t=ur(Mt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function br(t){return!!this.isValid()&&(t=t?Zi(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function _r(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wr(){if(!h(this._isDSTShifted))return this._isDSTShifted;var t={};if(k(t,this),t=Ui(t),t._a){var e=t._isUTC?g(t._a):Zi(t._a);this._isDSTShifted=this.isValid()&&D(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function kr(){return!!this.isValid()&&!this._isUTC}function xr(){return!!this.isValid()&&this._isUTC}function Sr(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}r.updateOffset=function(){};var Or=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Mr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function jr(t,e){var i,r,n,a=t,s=null;return or(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:c(t)?(a={},e?a[e]=t:a.milliseconds=t):(s=Or.exec(t))?(i="-"===s[1]?-1:1,a={y:0,d:j(s[Et])*i,h:j(s[Lt])*i,m:j(s[$t])*i,s:j(s[Rt])*i,ms:j(hr(1e3*s[zt]))*i}):(s=Mr.exec(t))?(i="-"===s[1]?-1:1,a={y:Dr(s[2],i),M:Dr(s[3],i),w:Dr(s[4],i),d:Dr(s[5],i),h:Dr(s[6],i),m:Dr(s[7],i),s:Dr(s[8],i)}):null==a?a={}:"object"===Object(u["a"])(a)&&("from"in a||"to"in a)&&(n=Pr(Zi(a.from),Zi(a.to)),a={},a.ms=n.milliseconds,a.M=n.months),r=new sr(a),or(t)&&f(t,"_locale")&&(r._locale=t._locale),r}function Dr(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Cr(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Pr(t,e){var i;return t.isValid()&&e.isValid()?(e=dr(e,t),t.isBefore(e)?i=Cr(t,e):(i=Cr(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Tr(t,e){return function(i,r){var n,a;return null===r||isNaN(+r)||(q(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=i,i=r,r=a),i="string"===typeof i?+i:i,n=jr(i,r),Yr(this,n,t),this}}function Yr(t,e,i,n){var a=e._milliseconds,s=hr(e._days),o=hr(e._months);t.isValid()&&(n=null==n||n,o&&fe(t,te(t,"Month")+o*i),s&&ee(t,"Date",te(t,"Date")+s*i),a&&t._d.setTime(t._d.valueOf()+a*i),n&&r.updateOffset(t,s||o))}jr.fn=sr.prototype,jr.invalid=ar;var qr=Tr(1,"add"),Ar=Tr(-1,"subtract");function Ir(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Nr(t,e){var i=t||Zi(),n=dr(i,this).startOf("day"),a=r.calendarFormat(this,n)||"sameElse",s=e&&(A(e[a])?e[a].call(this,i):e[a]);return this.format(s||this.localeData().calendar(a,this,Zi(i)))}function Wr(){return new S(this)}function Fr(t,e){var i=O(t)?t:Zi(t);return!(!this.isValid()||!i.isValid())&&(e=J(e)||"millisecond","millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function Gr(t,e){var i=O(t)?t:Zi(t);return!(!this.isValid()||!i.isValid())&&(e=J(e)||"millisecond","millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function Hr(t,e,i,r){var n=O(t)?t:Zi(t),a=O(e)?e:Zi(e);return!!(this.isValid()&&n.isValid()&&a.isValid())&&(r=r||"()",("("===r[0]?this.isAfter(n,i):!this.isBefore(n,i))&&(")"===r[1]?this.isBefore(a,i):!this.isAfter(a,i)))}function Er(t,e){var i,r=O(t)?t:Zi(t);return!(!this.isValid()||!r.isValid())&&(e=J(e)||"millisecond","millisecond"===e?this.valueOf()===r.valueOf():(i=r.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function Lr(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function $r(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Rr(t,e,i){var r,n,a;if(!this.isValid())return NaN;if(r=dr(t,this),!r.isValid())return NaN;switch(n=6e4*(r.utcOffset()-this.utcOffset()),e=J(e),e){case"year":a=zr(this,r)/12;break;case"month":a=zr(this,r);break;case"quarter":a=zr(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-n)/864e5;break;case"week":a=(this-r-n)/6048e5;break;default:a=this-r}return i?a:M(a)}function zr(t,e){var i,r,n=12*(e.year()-t.year())+(e.month()-t.month()),a=t.clone().add(n,"months");return e-a<0?(i=t.clone().add(n-1,"months"),r=(e-a)/(a-i)):(i=t.clone().add(n+1,"months"),r=(e-a)/(i-a)),-(n+r)||0}function Ur(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Vr(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?ut(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",ut(i,"Z")):ut(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Br(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",a=e+'[")]';return this.format(i+r+n+a)}function Zr(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=ut(this,t);return this.localeData().postformat(e)}function Qr(t,e){return this.isValid()&&(O(t)&&t.isValid()||Zi(t).isValid())?jr({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Kr(t){return this.from(Zi(),t)}function Jr(t,e){return this.isValid()&&(O(t)&&t.isValid()||Zi(t).isValid())?jr({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Xr(t){return this.to(Zi(),t)}function tn(t){var e;return void 0===t?this._locale._abbr:(e=yi(t),null!=e&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var en=P("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function rn(){return this._locale}var nn=1e3,an=60*nn,sn=60*an,on=3506328*sn;function hn(t,e){return(t%e+e)%e}function cn(t,e,i){return t<100&&t>=0?new Date(t+400,e,i)-on:new Date(t,e,i).valueOf()}function ln(t,e,i){return t<100&&t>=0?Date.UTC(t+400,e,i)-on:Date.UTC(t,e,i)}function un(t){var e;if(t=J(t),void 0===t||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?ln:cn;switch(t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=hn(e+(this._isUTC?0:this.utcOffset()*an),sn);break;case"minute":e=this._d.valueOf(),e-=hn(e,an);break;case"second":e=this._d.valueOf(),e-=hn(e,nn);break}return this._d.setTime(e),r.updateOffset(this,!0),this}function dn(t){var e;if(t=J(t),void 0===t||"millisecond"===t||!this.isValid())return this;var i=this._isUTC?ln:cn;switch(t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=sn-hn(e+(this._isUTC?0:this.utcOffset()*an),sn)-1;break;case"minute":e=this._d.valueOf(),e+=an-hn(e,an)-1;break;case"second":e=this._d.valueOf(),e+=nn-hn(e,nn)-1;break}return this._d.setTime(e),r.updateOffset(this,!0),this}function fn(){return this._d.valueOf()-6e4*(this._offset||0)}function mn(){return Math.floor(this.valueOf()/1e3)}function pn(){return new Date(this.valueOf())}function gn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function vn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function yn(){return this.isValid()?this.toISOString():null}function bn(){return b(this)}function _n(){return p({},y(this))}function wn(){return y(this).overflow}function kn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xn(t,e){ht(0,[t,t.length],0,e)}function Sn(t){return Dn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function On(t){return Dn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Mn(){return Me(this.year(),1,4)}function jn(){var t=this.localeData()._week;return Me(this.year(),t.dow,t.doy)}function Dn(t,e,i,r,n){var a;return null==t?Oe(this,r,n).year:(a=Me(t,r,n),e>a&&(e=a),Cn.call(this,t,e,i,r,n))}function Cn(t,e,i,r,n){var a=Se(t,e,i,r,n),s=ke(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Pn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}ht(0,["gg",2],0,(function(){return this.weekYear()%100})),ht(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),xn("gggg","weekYear"),xn("ggggg","weekYear"),xn("GGGG","isoWeekYear"),xn("GGGGG","isoWeekYear"),K("weekYear","gg"),K("isoWeekYear","GG"),et("weekYear",1),et("isoWeekYear",1),Tt("G",Ot),Tt("g",Ot),Tt("GG",yt,mt),Tt("gg",yt,mt),Tt("GGGG",kt,gt),Tt("gggg",kt,gt),Tt("GGGGG",xt,vt),Tt("ggggg",xt,vt),Wt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,i,r){e[r.substr(0,2)]=j(t)})),Wt(["gg","GG"],(function(t,e,i,n){e[n]=r.parseTwoDigitYear(t)})),ht("Q",0,"Qo","quarter"),K("quarter","Q"),et("quarter",7),Tt("Q",ft),Nt("Q",(function(t,e){e[Ht]=3*(j(t)-1)})),ht("D",["DD",2],"Do","date"),K("date","D"),et("date",9),Tt("D",yt),Tt("DD",yt,mt),Tt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Nt(["D","DD"],Et),Nt("Do",(function(t,e){e[Et]=j(t.match(yt)[0])}));var Tn=Xt("Date",!0);function Yn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}ht("DDD",["DDDD",3],"DDDo","dayOfYear"),K("dayOfYear","DDD"),et("dayOfYear",4),Tt("DDD",wt),Tt("DDDD",pt),Nt(["DDD","DDDD"],(function(t,e,i){i._dayOfYear=j(t)})),ht("m",["mm",2],0,"minute"),K("minute","m"),et("minute",14),Tt("m",yt),Tt("mm",yt,mt),Nt(["m","mm"],$t);var qn=Xt("Minutes",!1);ht("s",["ss",2],0,"second"),K("second","s"),et("second",15),Tt("s",yt),Tt("ss",yt,mt),Nt(["s","ss"],Rt);var An,In=Xt("Seconds",!1);for(ht("S",0,0,(function(){return~~(this.millisecond()/100)})),ht(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),ht(0,["SSS",3],0,"millisecond"),ht(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),ht(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),ht(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),ht(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),ht(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),ht(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),K("millisecond","ms"),et("millisecond",16),Tt("S",wt,ft),Tt("SS",wt,mt),Tt("SSS",wt,pt),An="SSSS";An.length<=9;An+="S")Tt(An,St);function Nn(t,e){e[zt]=j(1e3*("0."+t))}for(An="S";An.length<=9;An+="S")Nt(An,Nn);var Wn=Xt("Milliseconds",!1);function Fn(){return this._isUTC?"UTC":""}function Gn(){return this._isUTC?"Coordinated Universal Time":""}ht("z",0,0,"zoneAbbr"),ht("zz",0,0,"zoneName");var Hn=S.prototype;function En(t){return Zi(1e3*t)}function Ln(){return Zi.apply(null,arguments).parseZone()}function $n(t){return t}Hn.add=qr,Hn.calendar=Nr,Hn.clone=Wr,Hn.diff=Rr,Hn.endOf=dn,Hn.format=Zr,Hn.from=Qr,Hn.fromNow=Kr,Hn.to=Jr,Hn.toNow=Xr,Hn.get=ie,Hn.invalidAt=wn,Hn.isAfter=Fr,Hn.isBefore=Gr,Hn.isBetween=Hr,Hn.isSame=Er,Hn.isSameOrAfter=Lr,Hn.isSameOrBefore=$r,Hn.isValid=bn,Hn.lang=en,Hn.locale=tn,Hn.localeData=rn,Hn.max=Ki,Hn.min=Qi,Hn.parsingFlags=_n,Hn.set=re,Hn.startOf=un,Hn.subtract=Ar,Hn.toArray=gn,Hn.toObject=vn,Hn.toDate=pn,Hn.toISOString=Vr,Hn.inspect=Br,Hn.toJSON=yn,Hn.toString=Ur,Hn.unix=mn,Hn.valueOf=fn,Hn.creationData=kn,Hn.year=Kt,Hn.isLeapYear=Jt,Hn.weekYear=Sn,Hn.isoWeekYear=On,Hn.quarter=Hn.quarters=Pn,Hn.month=me,Hn.daysInMonth=pe,Hn.week=Hn.weeks=Te,Hn.isoWeek=Hn.isoWeeks=Ye,Hn.weeksInYear=jn,Hn.isoWeeksInYear=Mn,Hn.date=Tn,Hn.day=Hn.days=Re,Hn.weekday=ze,Hn.isoWeekday=Ue,Hn.dayOfYear=Yn,Hn.hour=Hn.hours=hi,Hn.minute=Hn.minutes=qn,Hn.second=Hn.seconds=In,Hn.millisecond=Hn.milliseconds=Wn,Hn.utcOffset=mr,Hn.utc=gr,Hn.local=vr,Hn.parseZone=yr,Hn.hasAlignedHourOffset=br,Hn.isDST=_r,Hn.isLocal=kr,Hn.isUtcOffset=xr,Hn.isUtc=Sr,Hn.isUTC=Sr,Hn.zoneAbbr=Fn,Hn.zoneName=Gn,Hn.dates=P("dates accessor is deprecated. Use date instead.",Tn),Hn.months=P("months accessor is deprecated. Use month instead",me),Hn.years=P("years accessor is deprecated. Use year instead",Kt),Hn.zone=P("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",pr),Hn.isDSTShifted=P("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wr);var Rn=W.prototype;function zn(t,e,i,r){var n=yi(),a=g().set(r,e);return n[i](a,t)}function Un(t,e,i){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return zn(t,e,i,"month");var r,n=[];for(r=0;r<12;r++)n[r]=zn(t,r,i,"month");return n}function Vn(t,e,i,r){"boolean"===typeof t?(c(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,c(e)&&(i=e,e=void 0),e=e||"");var n,a=yi(),s=t?a._week.dow:0;if(null!=i)return zn(e,(i+s)%7,r,"day");var o=[];for(n=0;n<7;n++)o[n]=zn(e,(n+s)%7,r,"day");return o}function Bn(t,e){return Un(t,e,"months")}function Zn(t,e){return Un(t,e,"monthsShort")}function Qn(t,e,i){return Vn(t,e,i,"weekdays")}function Kn(t,e,i){return Vn(t,e,i,"weekdaysShort")}function Jn(t,e,i){return Vn(t,e,i,"weekdaysMin")}Rn.calendar=G,Rn.longDateFormat=E,Rn.invalidDate=$,Rn.ordinal=U,Rn.preparse=$n,Rn.postformat=$n,Rn.relativeTime=B,Rn.pastFuture=Z,Rn.set=I,Rn.months=he,Rn.monthsShort=le,Rn.monthsParse=de,Rn.monthsRegex=be,Rn.monthsShortRegex=ve,Rn.week=je,Rn.firstDayOfYear=Pe,Rn.firstDayOfWeek=Ce,Rn.weekdays=We,Rn.weekdaysMin=Ee,Rn.weekdaysShort=Ge,Rn.weekdaysParse=$e,Rn.weekdaysRegex=Be,Rn.weekdaysShortRegex=Qe,Rn.weekdaysMinRegex=Je,Rn.isPM=ni,Rn.meridiem=si,pi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===j(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),r.lang=P("moment.lang is deprecated. Use moment.locale instead.",pi),r.langData=P("moment.langData is deprecated. Use moment.localeData instead.",yi);var Xn=Math.abs;function ta(){var t=this._data;return this._milliseconds=Xn(this._milliseconds),this._days=Xn(this._days),this._months=Xn(this._months),t.milliseconds=Xn(t.milliseconds),t.seconds=Xn(t.seconds),t.minutes=Xn(t.minutes),t.hours=Xn(t.hours),t.months=Xn(t.months),t.years=Xn(t.years),this}function ea(t,e,i,r){var n=jr(e,i);return t._milliseconds+=r*n._milliseconds,t._days+=r*n._days,t._months+=r*n._months,t._bubble()}function ia(t,e){return ea(this,t,e,1)}function ra(t,e){return ea(this,t,e,-1)}function na(t){return t<0?Math.floor(t):Math.ceil(t)}function aa(){var t,e,i,r,n,a=this._milliseconds,s=this._days,o=this._months,h=this._data;return a>=0&&s>=0&&o>=0||a<=0&&s<=0&&o<=0||(a+=864e5*na(oa(o)+s),s=0,o=0),h.milliseconds=a%1e3,t=M(a/1e3),h.seconds=t%60,e=M(t/60),h.minutes=e%60,i=M(e/60),h.hours=i%24,s+=M(i/24),n=M(sa(s)),o+=n,s-=na(oa(n)),r=M(o/12),o%=12,h.days=s,h.months=o,h.years=r,this}function sa(t){return 4800*t/146097}function oa(t){return 146097*t/4800}function ha(t){if(!this.isValid())return NaN;var e,i,r=this._milliseconds;if(t=J(t),"month"===t||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,i=this._months+sa(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(oa(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function ca(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*j(this._months/12):NaN}function la(t){return function(){return this.as(t)}}var ua=la("ms"),da=la("s"),fa=la("m"),ma=la("h"),pa=la("d"),ga=la("w"),va=la("M"),ya=la("Q"),ba=la("y");function _a(){return jr(this)}function wa(t){return t=J(t),this.isValid()?this[t+"s"]():NaN}function ka(t){return function(){return this.isValid()?this._data[t]:NaN}}var xa=ka("milliseconds"),Sa=ka("seconds"),Oa=ka("minutes"),Ma=ka("hours"),ja=ka("days"),Da=ka("months"),Ca=ka("years");function Pa(){return M(this.days()/7)}var Ta=Math.round,Ya={ss:44,s:45,m:45,h:22,d:26,M:11};function qa(t,e,i,r,n){return n.relativeTime(e||1,!!i,t,r)}function Aa(t,e,i){var r=jr(t).abs(),n=Ta(r.as("s")),a=Ta(r.as("m")),s=Ta(r.as("h")),o=Ta(r.as("d")),h=Ta(r.as("M")),c=Ta(r.as("y")),l=n<=Ya.ss&&["s",n]||n<Ya.s&&["ss",n]||a<=1&&["m"]||a<Ya.m&&["mm",a]||s<=1&&["h"]||s<Ya.h&&["hh",s]||o<=1&&["d"]||o<Ya.d&&["dd",o]||h<=1&&["M"]||h<Ya.M&&["MM",h]||c<=1&&["y"]||["yy",c];return l[2]=e,l[3]=+t>0,l[4]=i,qa.apply(null,l)}function Ia(t){return void 0===t?Ta:"function"===typeof t&&(Ta=t,!0)}function Na(t,e){return void 0!==Ya[t]&&(void 0===e?Ya[t]:(Ya[t]=e,"s"===t&&(Ya.ss=e-1),!0))}function Wa(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=Aa(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}var Fa=Math.abs;function Ga(t){return(t>0)-(t<0)||+t}function Ha(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,r=Fa(this._milliseconds)/1e3,n=Fa(this._days),a=Fa(this._months);t=M(r/60),e=M(t/60),r%=60,t%=60,i=M(a/12),a%=12;var s=i,o=a,h=n,c=e,l=t,u=r?r.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var f=d<0?"-":"",m=Ga(this._months)!==Ga(d)?"-":"",p=Ga(this._days)!==Ga(d)?"-":"",g=Ga(this._milliseconds)!==Ga(d)?"-":"";return f+"P"+(s?m+s+"Y":"")+(o?m+o+"M":"")+(h?p+h+"D":"")+(c||l||u?"T":"")+(c?g+c+"H":"")+(l?g+l+"M":"")+(u?g+u+"S":"")}var Ea=sr.prototype;return Ea.isValid=nr,Ea.abs=ta,Ea.add=ia,Ea.subtract=ra,Ea.as=ha,Ea.asMilliseconds=ua,Ea.asSeconds=da,Ea.asMinutes=fa,Ea.asHours=ma,Ea.asDays=pa,Ea.asWeeks=ga,Ea.asMonths=va,Ea.asQuarters=ya,Ea.asYears=ba,Ea.valueOf=ca,Ea._bubble=aa,Ea.clone=_a,Ea.get=wa,Ea.milliseconds=xa,Ea.seconds=Sa,Ea.minutes=Oa,Ea.hours=Ma,Ea.days=ja,Ea.weeks=Pa,Ea.months=Da,Ea.years=Ca,Ea.humanize=Wa,Ea.toISOString=Ha,Ea.toString=Ha,Ea.toJSON=Ha,Ea.locale=tn,Ea.localeData=rn,Ea.toIsoString=P("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ha),Ea.lang=en,ht("X",0,0,"unix"),ht("x",0,0,"valueOf"),Tt("x",Ot),Tt("X",Dt),Nt("X",(function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))})),Nt("x",(function(t,e,i){i._d=new Date(j(t))})),r.version="2.24.0",n(Zi),r.fn=Hn,r.min=Xi,r.max=tr,r.now=er,r.utc=g,r.unix=En,r.months=Bn,r.isDate=l,r.locale=pi,r.invalid=_,r.duration=jr,r.isMoment=O,r.weekdays=Qn,r.parseZone=Ln,r.localeData=yi,r.isDuration=or,r.monthsShort=Zn,r.weekdaysMin=Jn,r.defineLocale=gi,r.updateLocale=vi,r.locales=bi,r.weekdaysShort=Kn,r.normalizeUnits=J,r.relativeTimeRounding=Ia,r.relativeTimeThreshold=Na,r.calendarFormat=Ir,r.prototype=Hn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}))})),ci=(Object(d["l"])(".%L"),Object(d["l"])(":%S"),Object(d["l"])("%H:%M"),Object(d["l"])("%H:%M"),Object(d["l"])("%m%d"),Object(d["l"])("%m%d"),Object(d["l"])("%y"),function(t){var e="";if(t&&t>=1e9){var i=hi.duration(t/1e9,"seconds");i.years()>0&&(e+=i.years()+"Y"),i.months()>0&&(e+=i.months()+"M"),i.days()>0&&(e+=i.days()+"D"),i.hours()>0&&(e+=i.hours()+"h"),i.minutes()>0&&(e+=i.minutes()+"m"),i.seconds()>0&&(e+=i.seconds()+"s")}return e}),li={up:function(t){return t.open<=t.close},down:function(t){return t.open>t.close}},ui=Object.keys(li),di={up:function(t){return t.open<t.close},down:function(t){return t.open>t.close},equal:function(t){return t.open===t.close}},fi=Object.keys(di),mi=function(t,e,i){return function(){var r=Array.from(arguments).join(" "),n="color: white; background-color: ".concat(i,";");console.log.apply(this,["%c "+e+" %c "+r,n,t])}},pi=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TqChart",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plum";return{log:mi("color: green;",t,e),info:mi("color: blue;",t,e),debug:mi("color: pink;",t,e),warn:mi("color: orange;",t,e),error:mi("color: red;",t,e)}},gi=function(t){return Number.isInteger(Number(t))},vi=function(t){var e="string"===typeof t?t:"";if(gi(t)){var i=t.toString(16).padStart(8,"F"),r=parseInt(i.slice(0,2),16)/255,n=parseInt(i.slice(2,4),16),a=parseInt(i.slice(4,6),16),s=parseInt(i.slice(6),16);e="rgba(".concat(n,", ").concat(a,", ").concat(s,", ").concat(r,")")}return e},yi=function t(){Object(c["a"])(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id,r=e.xScale,n=e.yScale,a=e.bar;this.id=i||(new Date).getTime(),this.bar=a,this.xScale=r,this.yScale=n,this.paths=[]},bi=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),fi.forEach((function(e){return t.paths.push([t.id,"candle","line",e].join("."))})),fi.forEach((function(e){return t.paths.push([t.id,"candle","body",e].join("."))})),t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=i.slice(t,e+1),n=[Object(d["g"])(r,(function(t){return t&&t.low})),Object(d["f"])(r,(function(t){return t&&t.high}))],a=n[0],s=n[1];return a-=.2*(s-a),s+=.2*(s-a),[a,s]}},{key:"calcPaths",value:function(t,e,i){var r=this;if(this.yScale&&this.xScale&&this.bar){var n={};this.paths.forEach((function(t){n[t]=""}));for(var a=function(t){if(!i[t])return"continue";fi.forEach((function(e){if(di[e](i[t])){var a="up"===e?.5:0;n[[r.id,"candle","body",e].join(".")]+=r._bodyPath(i[t],t,a),n[[r.id,"candle","line",e].join(".")]+=r._linePath(i[t],t)}}))},s=t;s<=e;s++)a(s);return n}}},{key:"_bodyPath",value:function(t,e,i){var r=Math.round(this.yScale(t.open))+i,n=Math.round(this.yScale(t.close))+i,a=this.xScale(e)+this.bar.barPadding;if(Number.isNaN(r)||Number.isNaN(n)||Number.isNaN(a))return"";var s=this.bar.barWidth-2*this.bar.barPadding;return r!==n?"M".concat(a+i," ").concat(r," L").concat(a+s-i," ").concat(r," L").concat(a+s-i," ").concat(n," L").concat(a+i," ").concat(n," L").concat(a+i," ").concat(r):"M".concat(a," ").concat(r+.5," L").concat(a+s," ").concat(r+.5)}},{key:"_linePath",value:function(t,e){var i=Math.round(this.yScale(t.high)),r=Math.round(this.yScale(t.low)),n=this.xScale(e)+this.bar.barWidth/2;return Number.isNaN(i)||Number.isNaN(r)||Number.isNaN(n)?"":"M ".concat(n," ").concat(i," L ").concat(n," ").concat(r)}}]),e}(yi),_i=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),ui.forEach((function(e){return t.paths.push([t.id,"body",e].join("."))})),t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=i.slice(t,e+1);return[0,1.2*Object(d["f"])(r,(function(t){return t&&t.volume}))]}},{key:"calcPaths",value:function(t,e,i){var r=this;if(this.yScale&&this.xScale&&this.bar){var n={};this.paths.forEach((function(t){n[t]=""}));for(var a=function(t){if(!i[t])return"continue";ui.forEach((function(e){li[e](i[t])&&(n[[r.id,"body",e].join(".")]+=r.bodyPath(i[t],t,"up"===e?.5:0))}))},s=t;s<=e;s++)a(s);return n}}},{key:"bodyPath",value:function(t,e,i){var r=Math.ceil(this.yScale(0))+(0===i?1:i),n=Math.min(Math.round(r-this.yScale(t.volume)),r-i),a=this.xScale(e)+this.bar.barPadding,s=this.bar.barWidth-2*this.bar.barPadding,o="M".concat(a+i," ").concat(r,"L").concat(a+s-i," ").concat(r,"L ").concat(a+s-i," ").concat(r-n,"L").concat(a+i," ").concat(r-n,"L").concat(a+i," ").concat(r);return o}}]),e}(yi),wi=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),t.paths=["oi"],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=i.slice(t,e+1),n=[Object(d["g"])(r,(function(t){return t&&t.close_oi})),Object(d["f"])(r,(function(t){return t&&t.close_oi}))],a=n[0],s=n[1];return a-=.2*(s-a),s+=.2*(s-a),[a,s]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var r="",n=t;n<=e;n++)if(i[n]){var a=this.yScale(i[n].close_oi),s=this.xScale(n)+this.bar.barWidth/2;r+=""===r?"M":"L",r+="".concat(s," ").concat(a," ")}return{oi:r}}}}]),e}(yi),ki=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar,l=i.propName,u=i.min,d=i.max;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),t.min=u,t.max=d,t.propName=l||"value",t.paths=["value"],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var n=i.slice(t,e+1);return[Object(d["g"])(n,(function(t){return t&&t[r.propName]})),Object(d["f"])(n,(function(t){return t&&t[r.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var r="M",n=t;n<=e;n++)if(i[n]){var a=this.yScale(i[n][this.propName]),s=this.xScale(n)+this.bar.barWidth/2;void 0===a||Number.isNaN(a)||Number.isNaN(s)?r.endsWith("M")||(r+="M"):(r+=r.endsWith("M")?"":"L",r+="".concat(s," ").concat(a))}else r.endsWith("M")||(r+="M");return{value:r.replace(/[LM]$/,"")}}}}]),e}(yi),xi=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar,l=i.propName,u=i.isHollow,d=i.min,f=i.max;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),t.isHollow=u||!1,t.min=d,t.max=f,t.propName=l||"value",t.paths=["value"],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var n=i.slice(t,e+1);return[0,Object(d["f"])(n,(function(t){return t&&t[r.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var r="",n=t;n<=e;n++)i[n]&&(r+=this.bodyPath(i[n],n,this.isHollow?.5:0));return{value:r}}}},{key:"bodyPath",value:function(t,e,i){var r=Math.floor(this.yScale(0)),n=Math.round(r-this.yScale(t[this.propName])),a=this.xScale(e)+this.bar.barPadding;if(Number.isNaN(n)||Number.isNaN(a))return"";var s=this.bar.barWidth-2*this.bar.barPadding;return"M ".concat(a+i," ").concat(r-i," L ").concat(a+s-i," ").concat(r-i," L ").concat(a+s-i," ").concat(r-n+i," L ").concat(a+i," ").concat(r-n+i," L ").concat(a+i," ").concat(r-i)}}]),e}(yi),Si=function(t){function e(){var t;Object(c["a"])(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.id,n=i.xScale,a=i.yScale,h=i.bar,l=i.propName,u=i.min,d=i.max;return t=Object(s["a"])(this,Object(o["a"])(e).call(this,{id:r,xScale:n,yScale:a,bar:h})),t.min=u,t.max=d,t.propName=l||"value",t.paths=["value"],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"getYDomain",value:function(t,e,i){var r=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var n=i.slice(t,e+1);return[Object(d["g"])(n,(function(t){return t&&t[r.propName]})),Object(d["f"])(n,(function(t){return t&&t[r.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var r="",n=t;n<=e;n++)if(i[n]){var a=this.yScale(i[n][this.propName]),s=this.xScale(n)+this.bar.barWidth/2;if(!Number.isNaN(a)&&!Number.isNaN(s)){var o=3;r+="M ".concat(s-o," ").concat(a," a ").concat(o,", ").concat(o," 0 1,0 ").concat(2*o,",0 a ").concat(o,", ").concat(o," 0 1,0 ").concat(2*-o,",0 ")}}return{value:r}}}}]),e}(yi),Oi=function(){function t(){Object(c["a"])(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.chart,r=e.boardId,n=e.plotId,a=void 0===n?"":n,s=e.yAlign,o=void 0===s?"right":s,h=e.type,l=void 0===h?"candle":h,u=e.color,d=void 0===u?"red":u,f=e.width,m=void 0===f?2:f,p=e.dash,g=void 0!==p&&p,v=e.data;this.chart=i,this.boardId=r,this.plotId=a,this.yAlign=o,this.board=this.chart.boards[r],this.data=v,this.type=l,this.color=d,this.width=Number.isFinite(m)?Math.round(m):2,this.dash=g,this.g=this.board.plotG.append("g").attr("class","plot ".concat(this.boardId," ").concat(this.plotId)),this.path=null,this._initPath()}return Object(l["a"])(t,[{key:"_initPath",value:function(){switch(this.type){case"candle":this.path=new bi({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"volume":this.path=new _i({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"oi":this.path=new wi({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"dash":this.path=new ki({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"line":this.path=new ki({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"bar":this.path=new xi({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"dot":this.path=new Si({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break}for(var t=0;t<this.path.paths.length;t++)this._appendPlotTypePath(this.path.paths[t])}},{key:"_appendPlotTypePath",value:function(t){if(Array.isArray(t)||(t=t.split(".")),this.g.selectAll("path.".concat(t.join("."))).data((function(t){return[t]})).enter().append("path").attr("class",t.join(" ")),"line"===this.type||"dash"===this.type){var e="string"===typeof this.color?this.color:"";this.g.selectAll("path.".concat(t.join("."))).style("fill","none").attr("stroke",e).attr("stroke-width",this.width+"px").attr("stroke-dasharray",this.dash?"4 4":"0")}else"bar"===this.type?this.g.selectAll("path.".concat(t.join("."))).style("fill",this.color).attr("stroke","none"):"dot"===this.type&&this.g.selectAll("path.".concat(t.join("."))).style("fill",this.color).attr("stroke","none")}},{key:"getYDomain",value:function(t,e,i){return this.path.getYDomain(t,e,i)}},{key:"draw",value:function(t,e,i){var r=this.path.calcPaths(t,e,i);for(var n in r)try{this.g.select("path.".concat(n)).attr("d",r[n])}catch(a){this.chart.tqChartConsole.error(a)}}},{key:"remove",value:function(){this.g.remove()}}]),t}(),Mi=function(){function t(e,i,r){Object(c["a"])(this,t),this.tqchart=e,this.id=i,this.klineId=r}return Object(l["a"])(t,[{key:"update",value:function(t){this.klineId=t}},{key:"resize",value:function(){this.g.attr("width",this.tqchart.bar.barWidth).attr("height",this.tqchart.innerHeight)}},{key:"draw",value:function(){this.g||(this.g=this.tqchart.bgShapesG.append("rect").attr("class","highlight").attr("width",this.tqchart.bar.barWidth).attr("height",this.tqchart.innerHeight));var t=this.tqchart.chartController.revertIdToPx(this.klineId);this.g.attr("transform","translate(".concat(t,",0)"))}},{key:"clear",value:function(){this.g.remove()}}]),t}(),ji={HighlightBar:Mi},Di=function(){function t(e,i,r){Object(c["a"])(this,t),this.tqchart=e,this.managerId=i,this.typeClass=r,this.contents={}}return Object(l["a"])(t,[{key:"add",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var n;this.contents[t]?(n=this.contents[t]).update.apply(n,i):this.contents[t]=Object(a["a"])(ji[this.typeClass],[this.tqchart,t].concat(i));return this.contents[t]}},{key:"each",value:function(t,e){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];for(var a in this.contents)if(this.contents[a]){var s=this.contents[a];s[t].apply(s,[e].concat(r))}}},{key:"get",value:function(t){return this.contents[t]||null}},{key:"remove",value:function(t){this.contents[t].clear(),delete this.contents[t]}},{key:"removeAll",value:function(){for(var t in this.contents)this.contents[t].clear(),delete this.contents[t]}}]),t}(),Ci=function(){function t(){Object(c["a"])(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id,r=e.chart,n=e.board,a=e.boardId,s=e.parentG,o=e.type,h=e.yAlign,l=e.fill,u=e.fillOpacity,d=e.stroke,f=e.strokeWidth,m=e.strokeOpacity,p=e.strokeDasharray;this.id=i||(new Date).getTime(),this.chart=r,this.boardId=a||"main",this.board=n||this.chart.boards[this.boardId],this.parentG=s,this.g=s?s.append("g").attr("class",this.boardId+" mark "+o+" "+this.id):this.board.markG.append("g").attr("class",this.boardId+" mark "+o+" "+this.id),this.yAlign=h||"right",this.type=o,this.fill=l||"none",this.fillOpacity=u||.5,this.stroke=d||"#bbbbbb",this.strokeWidth=f||1,this.strokeOpacity=m||.5,this.strokeDasharray=p||"0",this._show=!0}return Object(l["a"])(t,[{key:"update",value:function(t){this.xPos1=void 0===t.xPos1?this.xPos1:t.xPos1,this.x1=void 0===t.x1?this.x1:t.x1,this.dt1=void 0===t.dt1?this.dt1:t.dt1,this.yPos1=void 0===t.yPos1?this.yPos1:t.yPos1,this.y1=void 0===t.y1?this.y1:t.y1,this.xPos2=void 0===t.xPos2?this.xPos2:t.xPos2,this.x2=void 0===t.x2?this.x2:t.x2,this.dt2=void 0===t.dt2?this.dt2:t.dt2,this.yPos2=void 0===t.yPos2?this.yPos2:t.yPos2,this.y2=void 0===t.y2?this.y2:t.y2}},{key:"show",value:function(){this.g&&!this._show&&(this._show=!0,this.g.attr("visibility","visible"))}},{key:"hide",value:function(){this.g&&this._show&&(this._show=!1,this.g.attr("visibility","hidden"))}},{key:"remove",value:function(){this.g.remove()}},{key:"revertSomeToPos",value:function(t){var e={x:null,y:null};return Number.isFinite(this["xPos"+t])?e.x=this["xPos"+t]:Number.isFinite(this["x"+t])?e.x=this.revertIdToPos(this["x"+t]):Number.isFinite(this["dt"+t])&&(e.x=this.revertIdToPos(this.revertDtToId(this["dt"+t]))),Number.isFinite(this["yPos"+t])?e.y=this["yPos"+t]:Number.isFinite(this["y"+t])&&(e.y=this.revertValueToYPos(this["y"+t])),e}},{key:"revertDtToId",value:function(t){var e=this.chart.mainSeries,i=[this.chart.range.leftId,this.chart.range.rightId],r=i[0],n=i[1];if(!e||!e.data||!e.data[r]||t<e.data[r].datetime)return null;var a=e.data[n]?n:e.last_id;if(t<=e.data[a].datetime)for(var s=r;s<a+1;s++)if(t-e.data[s].datetime<=0)return s;return null}},{key:"revertIdToPos",value:function(t){return Math.round(this.chart.xAxis.xScale(t))+Math.floor(this.chart.bar.barWidth/2)}},{key:"revertValueToYPos",value:function(t){return t&&this.board[this.yAlign+"YAxis"]?Math.round(this.board[this.yAlign+"YAxis"].yScale(t)):null}},{key:"isPointInChart",value:function(t){var e=t.x,i=t.y;return e>=0&&e<=this.chart.innerWidth&&i>=0&&i<=this.chart.innerHeight}}]),t}(),Pi=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this,t)),i.type="text",i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.text=t.text,i.size=t.size,i.textG=i.g.append("text").style("font-size",i.size).style("fill",i.fill),i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"update",value:function(t){Object(n["a"])(Object(o["a"])(e.prototype),"update",this).call(this,t),this.text=void 0===t.text?this.text:t.text}},{key:"draw",value:function(){var t=this.revertSomeToPos("1");if(Number.isFinite(t.x)&&Number.isFinite(t.y)&&this.text)return this.show(),void this.textG.attr("x",t.x).attr("y",t.y).text(this.text);this.hide()}}]),e}(Ci),Ti=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this,t)),i.type="line",i.lineG=i.g.append("line"),i.lineG.style("fill","none").attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.text=t.text,i.clamp=t.clamp,i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"update",value:function(t){Object(n["a"])(Object(o["a"])(e.prototype),"update",this).call(this,t),this.x1=t.x1||this.x1,this.y1=t.y1||this.y1,this.text=void 0===t.text?this.text:t.text,this.clamp=void 0===t.clamp?this.clamp:t.clamp}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=this.revertSomeToPos("2");Number.isFinite(t.x)&&Number.isFinite(t.y)&&Number.isFinite(e.x)&&Number.isFinite(e.y)&&(this.clamp&&t.y-e.y<1e-6&&(t.y<0||e.y<0?t.y=e.y=0:(t.y>this.chart.innerHeight||e.y>this.chart.innerHeight)&&(t.y=e.y=this.chart.innerHeight)),this.lineG.attr("x1",t.x).attr("y1",t.y).attr("x2",e.x).attr("y2",e.y),this.show(),this.text&&(this.textG=this.textG||this.g.append("text"),this.textG.attr("x",t.x).attr("y",t.y).attr("dy",t.y<15?"12px":"-2px").text(this.text)))}}]),e}(Ci),Yi=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this,t)),i.type="rect",i.rectG=i.g.append("rect"),i.rectG.style("fill",i.fill).attr("fill-opacity",i.fillOpacity).attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.width=t.width,i.height=t.height,i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"update",value:function(t){Object(n["a"])(Object(o["a"])(e.prototype),"update",this).call(this,t),this.width=void 0===t.width?this.width:t.width,this.height=void 0===t.height?this.height:t.height}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=.5;if("none"===this.rectG.attr("stroke")&&(e=0),Number.isFinite(t.x)&&Number.isFinite(t.y)){if(Number.isFinite(this.width)&&Number.isFinite(this.height))return this.rectG.attr("x",t.x+e).attr("y",t.y+e).attr("width",this.width).attr("height",this.height),void this.show();var i=this.revertSomeToPos("2");if(Number.isFinite(i.x)&&Number.isFinite(i.y))return this.rectG.attr("x",t.x+e).attr("y",t.y+e).attr("width",Math.abs(i.x-t.x)).attr("height",Math.abs(i.y-t.y)),void this.show()}this.hide()}}]),e}(Ci),qi=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this,t)),i.type="arrow",i.arrowG=i.g.append("path"),i.arrowG.style("fill",i.fill).attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.width=t.width,i.height=t.height,i.direction=t.direction,i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"update",value:function(t){Object(n["a"])(Object(o["a"])(e.prototype),"update",this).call(this,t),this.width=void 0===t.width?this.width:t.width,this.height=void 0===t.height?this.height:t.height,this.direction=void 0===t.direction?this.direction:t.direction}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=this.width||this.chart.bar.barWidth,i=this.height||this.chart.bar.barWidth,r="up"===this.direction?1:-1,n="none"===this.stroke?0:.5;if(Number.isFinite(t.x)&&Number.isFinite(t.y)&&this.isPointInChart(t)){var a=Math.round(e/3),s="M ".concat(t.x+e/2," ").concat(t.y," l ").concat(-e/2," ").concat(r*i/2," l ").concat(a-n," 0 l 0 ").concat(r*i/2," l ").concat(a," 0 l 0 ").concat(-1*r*i/2," l ").concat(a," 0 z");this.arrowG.attr("d",s),this.show()}else this.hide()}}]),e}(Ci),Ai=function(){function t(e){Object(c["a"])(this,t),this.chart=e,this.marks={}}return Object(l["a"])(t,[{key:"addMark",value:function(t){return t.id=t.id||(new Date).getTime(),this.marks[t.id]?this.marks[t.id].update(t):(t.chart=t.chart||this.chart,t.boardId=t.boardId||"main",t.board=t.board||this.chart.boards[t.boardId],t.yAlign=t.yAlign||"right","line"===t.type?this.marks[t.id]=new Ti(t):"rect"===t.type?this.marks[t.id]=new Yi(t):"arrow"===t.type?this.marks[t.id]=new qi(t):"text"===t.type?this.marks[t.id]=new Pi(t):this.chart.tqChartConsole.error("未支持 ".concat(t.type," 类型标记，[line|rect|arrow|text]"))),this.marks[t.id]}},{key:"removeMarkAll",value:function(){for(var t in this.marks)this.marks[t].remove(),delete this.marks[t]}},{key:"removeMark",value:function(t){this.marks[t]&&this.marks[t].remove(),delete this.marks[t]}},{key:"showMark",value:function(t){this.marks[t].show()}},{key:"hideMark",value:function(t){this.marks[t].hide()}},{key:"draw",value:function(){var t=this.chart.mainSeries,e=[this.chart.range.leftId,this.chart.range.rightId],i=e[0],r=e[1];if(r=t.data[r]?r:t.last_id,t.data[i]&&t.data[r]){var n=t.data[i].datetime,a=t.data[r].datetime;for(var s in this.marks){var o=this.marks[s];if("arrow"===o.type)if(o.dt1>=n&&o.dt1<=a){var h=this.marks[s].revertDtToId(o.dt1);this.marks[s].x1=h,this.marks[s].y1="up"===this.marks[s].direction?t.data[h].low:t.data[h].high,this.marks[s].draw()}else this.marks[s].hide();else this.marks[s].draw()}}}}]),t}(),Ii=function(){function t(e){Object(c["a"])(this,t),this.tqchart=e,this._board=null,this._g=null,this.trades={}}return Object(l["a"])(t,[{key:"add",value:function(t,e){this.trades[t]||(this.trades[t]=e)}},{key:"removeAll",value:function(){for(var t in this.g.select("path").remove(),this.trades)delete this.trades[t]}},{key:"revertValueToYPos",value:function(t){return t&&this.board.rightYAxis?Math.round(this.board.rightYAxis.yScale(t)):null}},{key:"draw",value:function(){var t=[],e={},i={},r=this.tqchart.mainSeries,n=[this.tqchart.range.leftId,this.tqchart.range.rightId],a=n[0],s=n[1];if(s=r.data[s]?s:r.last_id,r.data[a]&&r.data[s]){var o=[r.data[a].datetime,r.data[s].datetime],h=o[0],c=o[1];for(var l in this.trades){var u=this.trades[l];if(u.trade_date_time>=h&&u.trade_date_time<=c+this.tqchart.duration){var d=this.tqchart.chartController.revertDtToId(u.trade_date_time,a,s);if(!d)continue;if("BUY"===u.direction)if(e[d])e[d].volume+=u.volume;else{var f={x:this.tqchart.chartController.revertIdToPx(d),y:this.revertValueToYPos(r.data[d].low),dir:"up",diff:"OPEN"===u.offset?0:.5,width:this.tqchart.bar.barWidth,volume:u.volume};e[d]=f,t.push(f)}else if("SELL"===u.direction)if(i[d])i[d].volume+=u.volume;else{var m={x:this.tqchart.chartController.revertIdToPx(d),y:this.revertValueToYPos(r.data[d].high),dir:"down",diff:"OPEN"===u.offset?0:.5,width:this.tqchart.bar.barWidth,volume:u.volume};i[d]=m,t.push(m)}}}this.drawArrows(t)}}},{key:"drawArrows",value:function(t){var e=this.g.selectAll("path").data(t);e.enter().append("path").attr("class",(function(t){return t.dir})).attr("d",this.getArrowPath),e.merge(e).attr("class",(function(t){return t.dir})).attr("d",this.getArrowPath),e.exit().remove()}},{key:"getArrowPath",value:function(t){var e="up"===t.dir?1:-1,i=t.width,r=t.width,n=Math.round(r/3);return"M ".concat(t.x+r/2," ").concat(t.y," l ").concat(-r/2," ").concat(e*i/2," l ").concat(n-t.diff," 0 l 0 ").concat(e*i/2," l ").concat(n," 0 l 0 ").concat(-1*e*i/2," l ").concat(n," 0 z")}},{key:"board",get:function(){return null===this._board&&(this._board=this.tqchart.boards.main?this.tqchart.boards.main:null),this._board}},{key:"g",get:function(){return null===this._g&&(this._g=this.board.markG.append("g").attr("class","tradearrow")),this._g}}]),t}(),Ni=function(){function t(e){Object(c["a"])(this,t),this.tqchart=e,this._board=null,this._g=null,this.datetimeKeys=[],this.positions={}}return Object(l["a"])(t,[{key:"add",value:function(t,e){this.positions[t]||(this.positions[t]=e,e.datetime=t,e.volume_net=e.volume_long-e.volume_short,e.klineId=this.tqchart.chartController.revertDtToId(t),this.datetimeKeys=Object.keys(this.positions).sort())}},{key:"removeAll",value:function(){for(var t in this.g.select("rect").remove(),this.positions)delete this.positions[t]}},{key:"getPostionKlineId",value:function(t){return t.klineId?t.klineId:(t.klineId=this.tqchart.chartController.revertDtToId(t.datetime),t.klineId)}},{key:"revertValueToYPos",value:function(t){return t&&this.board.rightYAxis?Math.round(this.board.rightYAxis.yScale(t)):null}},{key:"draw",value:function(){var t=this.tqchart.mainSeries,e=[this.tqchart.range.leftId,this.tqchart.range.rightId],i=e[0],r=e[1];if(r=t.data[r]?r:t.last_id,t.data[i]&&t.data[r]){for(var n=[t.data[i].datetime,t.data[r].datetime],a=n[0],s=n[1],o=[],h=1;h<this.datetimeKeys.length;h++){var c=this.datetimeKeys[h-1],l=this.datetimeKeys[h];if(!(l<a)){if(a>s)break;var u=this.positions[c],d=this.positions[l],f=this.getPostionKlineId(u),m=this.getPostionKlineId(d);if(null!==f&&null!==m&&m-f>1&&0!==u.volume_net){var p=t.data[m].close-t.data[f].open;if(0!==u.volume_net&&0!==p){var g=Math.min(t.data[f].low,t.data[m].low),v=Math.max(t.data[f].high,t.data[m].high),y=u.volume_net*p>0?"profit":"loss";o.push({id:"rect"+f,x1:f,y1:v,x2:m+1,y2:g,className:y,stroke:"none"})}}}}this.drawPosRect(o)}}},{key:"drawPosRect",value:function(t){var e=this,i=this.g.selectAll("rect").data(t);i.enter().append("rect").attr("class",(function(t){return t.className})).attr("x",(function(t){return e.tqchart.chartController.revertIdToPx(t.x1)})).attr("y",(function(t){return e.revertValueToYPos(t.y1)})).attr("width",(function(t){return(t.x2-t.x1)*e.tqchart.bar.barWidth})).attr("height",(function(t){return e.revertValueToYPos(t.y2)-e.revertValueToYPos(t.y1)})),i.merge(i).attr("class",(function(t){return t.className})).attr("x",(function(t){return e.tqchart.chartController.revertIdToPx(t.x1)})).attr("y",(function(t){return e.revertValueToYPos(t.y1)})).attr("width",(function(t){return(t.x2-t.x1)*e.tqchart.bar.barWidth})).attr("height",(function(t){return e.revertValueToYPos(t.y2)-e.revertValueToYPos(t.y1)})),i.exit().remove()}},{key:"board",get:function(){return null===this._board&&(this._board=this.tqchart.boards.main?this.tqchart.boards.main:null),this._board}},{key:"g",get:function(){return null===this._g&&(this._g=this.board.markG.append("g").attr("class","posrect")),this._g}}]),t}(),Wi=function(){function t(e){Object(c["a"])(this,t),this.fullWidth=e,this.barWidth=t.BAR_WIDTH,this.barPadding=this._getBarPadding(),this.barNumbers=this._getBarNumbers()}return Object(l["a"])(t,[{key:"_getBarPadding",value:function(){return this.barWidth<=3?0:this.barWidth<=17?1:2}},{key:"_getBarNumbers",value:function(){return Math.floor(this.fullWidth/this.barWidth)}},{key:"zoom",value:function(e){if(0!==e){var i=e/Math.abs(e),r=this.barWidth+2*i;r<t.BAR_WIDTH_MIN||r>t.BAR_WIDTH_MAX||r===this.barWidth||(this.barWidth=r,this.barPadding=this._getBarPadding(),this.barNumbers=this._getBarNumbers())}}},{key:"setFullWidth",value:function(t){this.fullWidth=t,this.barNumbers=this._getBarNumbers()}}]),t}();Wi.BAR_WIDTH=9,Wi.BAR_WIDTH_MAX=35,Wi.BAR_WIDTH_MIN=1;var Fi=function(){function t(e,i){Object(c["a"])(this,t),this.leftId=Number.isInteger(e)?e:-1,this.rightId=Number.isInteger(i)?i:-1}return Object(l["a"])(t,[{key:"reset",value:function(t,e){return!(!this.isInvalid()&&t===this.leftId&&e===this.rightId)&&(this.leftId=Number.isInteger(t)?t:-1,this.rightId=Number.isInteger(e)?e:-1,!0)}},{key:"isInvalid",value:function(){return-1===this.leftId||-1===this.rightId}},{key:"isEqual",value:function(t){return t.leftId===this.leftId&&t.rightId===this.rightId}},{key:"copy",value:function(e){e instanceof t&&(this.leftId=e.leftId,this.rightId=e.rightId)}}]),t}(),Gi=function(){function t(e){Object(c["a"])(this,t),this.tqchart=e,this.range=new Fi}return Object(l["a"])(t,[{key:"_initRange",value:function(){var t=-1,e=-1;this.tqchart.mainSeries&&-1!==this.tqchart.mainSeries.last_id&&(e=this.tqchart.mainSeries.last_id,t=e-this.tqchart.bar.barNumbers+1),this.range.reset(t,e)}},{key:"getRange",value:function(){return this.range.isInvalid()&&this._initRange(),this.range}},{key:"init",value:function(){this._initRange()}},{key:"setRange",value:function(t,e){t>=0&&e>=t?this.range.reset(t,e):(this.tqchart.tqChartConsole.warn("setRange 不传入数据，表示指定移动到最后端"),this.range.reset(-1,-1))}},{key:"move",value:function(t){if(this.getRange().isInvalid())return this.tqchart.tqChartConsole.warn("move 拖动图表的时候，图表范围还未确定"),!1;var e=this.range.leftId-t,i=e+this.tqchart.bar.barNumbers-1;return e>=0&&e<=this.tqchart.mainSeries.last_id-this.tqchart.bar.barNumbers+10?this.range.reset(e,i):e<0?0!==this.range.leftId&&(e=0,i=e+this.tqchart.bar.barNumbers-1,this.range.reset(e,i)):e>=0&&t>0&&this.range.reset(e,i)}},{key:"zoom",value:function(){var t=-1,e=-1;return t=this.range.rightId>this.tqchart.mainSeries.last_id?this.tqchart.mainSeries.last_id-this.tqchart.bar.barNumbers+1:this.range.rightId-this.tqchart.bar.barNumbers+1,t=t<0?0:t,e=t+this.tqchart.bar.barNumbers-1,this.range.reset(t,e),!0}},{key:"revertIdToPx",value:function(t){return Math.round(this.tqchart.xAxis.xScale(t))}},{key:"revertDtToId",value:function(t,e,i){var r=this.tqchart.mainSeries;if(!r||!r.data||this.range.isInvalid())return null;var n=!1;e>=0&&i>e?n=!0:(e=this.range.leftId,i=this.range.rightId);var a=e,s=i;if(s=s<=r.last_id?s:r.last_id,!r.data[a]||!r.data[s])return null;if(t>=r.data[s].datetime&&t<r.data[s].datetime+this.tqchart.duration)return s;if(t>=r.data[a].datetime&&t<=r.data[s].datetime){for(var o=a;o<s+1&&r.data[o];o++)if(t-r.data[o].datetime<=0)return o>=1?o-1:o;return null}if(n)return null;if(t>r.data[s].datetime){if(s===r.last_id)return null;for(var h=s;h<r.last_id&&r.data[h]&&r.data[h];h++)if(t-r.data[h].datetime<=0)return h>=1?h-1:h;return null}if(t<r.data[a].datetime){if(0===a)return null;for(var c=a;c>=0&&r.data[c];c--)if(t-r.data[c].datetime>=0)return c;return null}}}]),t}(),Hi=function(t){function e(t){var i;return Object(c["a"])(this,e),i=Object(s["a"])(this,Object(o["a"])(e).call(this)),i.divDomId=t.id,i.outerWidth=t.width,i.outerHeight=t.height,i.margin=t.margin?t.margin:{top:15,right:50,bottom:20,left:80},i.innerWidth=i.outerWidth-i.margin.left-i.margin.right,i.innerHeight=i.outerHeight-i.margin.top-i.margin.bottom,i.mode="free",i.customRange=new Fi,i.mainType="candle",i.bar=new Wi(i.innerWidth),i.range=new Fi,i.symbol=t.symbol||t.instrumentId,i.duration=t.duration||6e10,i.price_decs=t.price_decs||2,i.price_ticks=t.price_ticks,i.mainSeries=t.mainSeries,i.chartController=new Gi(Object(r["a"])(i)),i.highlightManager=new Di(Object(r["a"])(i),"highlight","HighlightBar"),i.tradeArrowManager=new Ii(Object(r["a"])(i)),i.positionManager=new Ni(Object(r["a"])(i)),i.tqChartConsole=pi("TqChart","plum"),i}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"setMode",value:function(t,e,i){"free"===t?(this.mode="free",e>=0&&i>=e?this.customRange.reset(e,i):this.customRange.reset()):"fixed"===t?e>=0&&i>=e?(this.mode="fixed",this.customRange.reset(e,i)):this.tqChartConsole.error("mode:fixed 必须指定 leftId rightId"):this.tqChartConsole.error("不支持 mode:".concat(t,"， 只支持 mode:[free|fixed]"))}},{key:"setRange",value:function(t,e){this.chartController.setRange(t,e),this.draw()}},{key:"setMainType",value:function(t){"candle"===t||"close"===t?this.mainType=t:this.tqChartConsole.error("mainType 只支持 [candle|close] => [K线图|收盘价线]")}},{key:"setMainSeries",value:function(t,e,i){t&&e&&i?(this.symbol=t,this.duration=e,this.mainSeries=i,this.backgroundText.text("".concat(this.symbol," ").concat(ci(this.duration))).attr("dy","-2"),this.chartController.init(),this.marksManager.removeMarkAll(),this.tradeArrowManager.removeAll(),this.positionManager.removeAll(),this._resetBoards(),this.draw()):this.tqChartConsole.error("setMainSeries 必须同时指定 symbol, duration, klines")}},{key:"addHighlightBar",value:function(t,e){this.highlightManager.add(t,e)}},{key:"addTradeArrow",value:function(t,e){this.tradeArrowManager.add(t,e)}},{key:"addPositionRecord",value:function(t,e){this.positionManager.add(t,e)}},{key:"init",value:function(){this._initSvgNode(),this._initEventListenners(),this.xAxis=new fe(this);var t=be.GetMutilPlotsHeight(2,this.innerHeight);this.boards={main:new be(this,"main",t[0].top,t[0].height,!1),sub:new be(this,"sub",t[1].top,t[1].height,!0)},this.plots={mainkline:new Oi({chart:this,boardId:"main",plotId:"candle",yAlign:"right",type:"candle"}),volume:new Oi({chart:this,boardId:"sub",plotId:"volume",yAlign:"right",type:"volume"}),oi:new Oi({chart:this,boardId:"sub",plotId:"oi",yAlign:"left",type:"oi"})},this.marksManager=new Ai(this),this.crosshair=new pe(this),this.chartController.init()}},{key:"_initSvgNode",value:function(){this.svg=Object(d["j"])("#"+this.divDomId).append("svg").attr("class","tqchart").attr("width",this.outerWidth).attr("height",this.outerHeight),this.defs=this.svg.append("defs");var t="mask-global";this.maskGlobal=e.AppendMask(this.defs,t,this.innerWidth,this.innerHeight,0,0);var i=[this.margin.left,this.margin.top],r=i[0],n=i[1];this.backgroundG=e.AppendG(this.svg,"background global",r,n),this.boardBackgroundG=e.AppendG(this.svg,"boardBackground global",r,n),this.rootG=e.AppendG(this.svg,"root global",r,n),this.crosshairG=e.AppendG(this.svg,"crosshair global",r,n),this.loadingG=e.AppendG(this.svg,"loading global",r,n),this.bgShapesG=e.AppendG(this.svg,"bgShapes global",r,n,t),this.backgroundText=this.backgroundG.append("g").append("text"),this.backgroundText.text("".concat(this.symbol," ").concat(ci(this.duration))).attr("dy","-2"),this.markG=this.rootG.append("g")}},{key:"_debounce",value:function(t,e){var i=null;return function(){var r=this,n=arguments;clearTimeout(i),i=setTimeout((function(){t.apply(r,n)}),e)}}},{key:"_initEventListenners",value:function(){var t=this;this.svg.on("mousemove",(function(){var e=Object(d["h"])(this),i=te(e,2),r=i[0],n=i[1];r>t.margin.left&&r<t.margin.left+t.innerWidth&&n>t.margin.top&&n<t.margin.top+t.innerHeight&&t.crosshair.update(r-t.margin.left,n-t.margin.top)})),this.svg.on("mouseover",(function(){null===e&&t.crosshair.show()})),this.svg.on("mouseleave",(function(){t.crosshair.hide()}));var e=null,i=Object(d["d"])().on("start",(function(){e=d["e"].x,t.crosshair.hide(),t.crosshair.drag(!0)})).on("drag",(function(){var i=Math.round((d["e"].x-e)/t.bar.barWidth);this.bar=new Wi(this.innerWidth),Math.abs(i)>0&&(e=d["e"].x,t.move(i))})).on("end",(function(){e=null,t.crosshair.show(),t.crosshair.drag(!1)}));this.svg.call(i);var r=Object(d["r"])().on("zoom",(function(){var e=d["e"].sourceEvent.deltaY;Math.abs(e)>0&&t._debounce(t.zoom,200).bind(t)(e>0?-2:2)}));this.svg.call(r).on("dblclick.zoom",null)}},{key:"getBoardByYPosition",value:function(t){for(var e in this.boards)if(t>=this.boards[e].top&&t<=this.boards[e].top+this.boards[e].height)return this.boards[e]}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.height,i=t.width;this.tqChartConsole.log("onresize",i),this.outerWidth=i,this.outerHeight=e,this.innerWidth=this.outerWidth-this.margin.left-this.margin.right,this.innerHeight=this.outerHeight-this.margin.top-this.margin.bottom,this.svg.attr("width",this.outerWidth).attr("height",this.outerHeight),this.bar.setFullWidth(this.innerWidth),this.xAxis.resetPosition(),this.chartController.zoom();var r=be.GetMutilPlotsHeight(Object.keys(this.boards).length,this.innerHeight),n=0;for(var a in this.boards)this.boards[a].resetPosition(r[n++]);this.crosshair.resize(),this.draw()}},{key:"_resetBoards",value:function(){for(var t in this.boards)"main"!==t&&"sub"!==t&&(this.boards[t].remove(),delete this.boards[t]);var e=be.GetMutilPlotsHeight(2,this.innerHeight);for(var i in this.boards.main.resetPosition(e[0]),this.boards.sub.resetPosition(e[1]),this.plots)"mainkline"!==i&&"volume"!==i&&"oi"!==i&&(this.plots[i].remove(),delete this.plots[i])}},{key:"_updateBoards",value:function(){var t=be.GetMutilPlotsHeight(Object.keys(this.boards).length,this.innerHeight),e=0;for(var i in this.boards)this.boards[i].resetPosition(t[e++])}},{key:"addSeries",value:function(t,e){this.tqChartConsole.log("addSeries",t,e);var i=e.board?e.board.toLowerCase():"main";this.boards[i]||(this.boards[i]=new be(this,i,this.innerHeight,0,!0),this._updateBoards()),"KSERIAL"!==e.type&&"SERIAL"!==e.type||this.plots[t]||("KSERIAL"===e.type?this.plots[t]=new Oi({chart:this,boardId:i,plotId:t,yAlign:e.yAlign,type:"candle",data:e.data}):"SERIAL"===e.type&&(this.plots[t]=new Oi({chart:this,boardId:i,plotId:t,yAlign:e.yAlign,type:e.style.toLowerCase(),data:e.data,color:vi(e.color),width:e.width,dash:"dash"===e.style.toLowerCase()}))),"TEXT"===e.type?this.addMark({id:t,boardId:e.board.toLowerCase(),type:"text",x1:e.x1,y1:e.y1,fill:vi(e.color),size:e.size,text:e.text}):"LINE"===e.type||"SEG"===e.type||"RAY"===e.type?this.addMark({id:t,boardId:e.board.toLowerCase(),type:"line",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,stroke:vi(e.color),strokeWidth:e.width,text:"",clamp:!1}):"BOX"===e.type&&this.addMark({id:t,boardId:e.board.toLowerCase(),type:"rect",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,fill:vi(e.bg_color),stroke:vi(e.color),strokeWidth:e.width||1}),this.draw()}},{key:"addMark",value:function(t){this.marksManager.addMark(t)}},{key:"removeMark",value:function(t){this.marksManager.removeMark(t)}},{key:"removeMarkAll",value:function(){this.marksManager.removeMarkAll()}},{key:"showMark",value:function(t){this.marksManager.showMark(t)}},{key:"hideMark",value:function(t){this.marksManager.hideMark(t)}},{key:"move",value:function(t){"fixed"!==this.mode&&this.chartController.move(t)&&this.draw()}},{key:"zoom",value:function(t){if("fixed"!==this.mode){var e=this.bar.barWidth;this.bar.zoom(t),e!==this.bar.barWidth&&(this.highlightManager.each("resize"),this.chartController.zoom(),this.xAxis.resetPosition(),this.draw())}}},{key:"readyToDraw",value:function(){return this.dm.readyToDraw()}},{key:"draw",value:function(){if(-1!==this.mainSeries.last_id){this.mainSeries.last_id-this.range.rightId===1&&this.chartController.setRange(this.mainSeries.last_id-this.bar.barNumbers+1,this.mainSeries.last_id);var t=this.chartController.getRange(),e=t.leftId,i=t.rightId;this.xAxis.draw(e,i,this.mainSeries.data);var r={};for(var n in this.plots){var a=this.plots[n].getYDomain(e,i,this.plots[n].data||this.mainSeries.data);if(Number.isFinite(a[0])||Number.isFinite(a[1])){var s=this.plots[n].boardId,o=this.plots[n].yAlign;r[s]=r[s]||{left:[1/0,-1/0],right:[1/0,-1/0]},r[s][o][0]=Math.min(r[s][o][0],a[0]),r[s][o][1]=Math.max(r[s][o][1],a[1])}}for(var h in this.boards){var c=r[h];c&&(this.boards[h].setDomain(c.left,"left"),this.boards[h].setDomain(c.right,"right"),this.boards[h].draw(e,i,this.mainSeries.data))}for(var l in this.plots)this.plots[l].draw(e,i,this.plots[l].data||this.mainSeries.data);this.marksManager.draw(),this.highlightManager.each("draw"),this.tradeArrowManager.draw(),this.positionManager.draw(),this.chartController.range.isEqual(this.range)||(this.range.copy(this.chartController.range),this.emit("showRangeChanged",this.range))}}},{key:"_drawBackground",value:function(t,e,i){var r=this.tqsdk.get_quote(this.symbol);if(r&&r.trading_time){var n=[],a=Object(d["l"])("%H:%M:%S"),s=Object(d["l"])("%d");if(this.duration<=6e10){var o=[];for(var h in r.trading_time.day)o.push(r.trading_time.day[h][0]);if(r.trading_time.night&&r.trading_time.night.length>0)for(var c in r.trading_time.night)o.push(r.trading_time.night[c][0]);for(var l=t;l<=e;l++)i[l]&&o.indexOf(a(i[l].datetime/1e6))>-1&&n.push((l-t)*this.bar.barWidth+this.bar.barWidth/2)}else if(this.duration<864e11){var u=[],f=r.trading_time.night?"night":"day";u.push(r.trading_time[f][0][0]);for(var m=t;m<=e;m++)i[m]&&u.indexOf(a(i[m].datetime/1e6))>-1&&n.push((m-t)*this.bar.barWidth+this.bar.barWidth/2)}else if(this.duration<=432e12)for(var p=t;p<=e;p++)i[p]&&i[p-1]&&s(i[p].datetime/1e6)<s(i[p-1].datetime/1e6)&&n.push((p-t)*this.bar.barWidth+this.bar.barWidth/2);var g=this.backgroundG.selectAll("line").data(n);g.enter().append("line").attr("y1",0).attr("y2",this.innerHeight).attr("stroke","#E6E6E6").attr("stroke-dasharray","12 6").attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),g.merge(g).attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),g.exit().remove()}}}]),e}(ne);Hi.AppendG=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=t.append("g").attr("class",e);return 0===i&&0===r||a.attr("transform","translate(".concat(i,",").concat(r,")")),n&&a.attr("mask","url(#".concat(n,")")),a},Hi.AppendMask=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return t.append("mask").attr("id",e).append("rect").attr("x",n).attr("y",a).attr("width",i).attr("height",r).style("fill","#FFFFFF").attr("stroke","none")},Hi.version=f,e["a"]=Hi}).call(this,i("c8ba"))},cf05:function(t,e,i){t.exports=i.p+"img/logo.165e0f64.png"},d85d:function(t,e,i){},dcf3:function(t,e,i){},f451:function(t,e,i){"use strict";var r=i("5c44"),n=i.n(r);n.a},f6c5:function(t,e,i){},f9f8:function(t,e,i){}});