(function(t){function e(e){for(var a,n,o=e[0],h=e[1],c=e[2],l=0,u=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&u.push(r[n][0]),r[n]=0;for(a in h)Object.prototype.hasOwnProperty.call(h,a)&&(t[a]=h[a]);d&&d(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,o=1;o<i.length;o++){var h=i[o];0!==r[h]&&(a=!1)}a&&(s.splice(e--,1),t=n(n.s=i[0]))}return t}var a={},r={app:0},s=[];function n(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=a,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=h;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"07f6":function(t,e,i){},"19da":function(t,e,i){"use strict";var a=i("dcf3"),r=i.n(a);r.a},"1a2d3":function(t,e,i){"use strict";var a=i("f6c5"),r=i.n(a);r.a},2975:function(t,e,i){"use strict";var a=i("8fde"),r=i.n(a);r.a},"2dac":function(t,e,i){"use strict";var a=i("5a46"),r=i.n(a);r.a},"326a":function(t,e,i){"use strict";var a=i("6491"),r=i.n(a);r.a},4678:function(t,e,i){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=s(t);return i(e)}function s(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=s,t.exports=r,r.id="4678"},5096:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("4de4"),i("c975"),i("a9e3"),i("f00c"),i("8ba4"),i("b680"),i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),r=i("c1df"),s=i.n(r),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("tianqin")],1)},o=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-home"},[i("div",{staticClass:"layout-area header-container"},[i("tq-header-view",{attrs:{height:t.headerHeight,width:t.$root.windowWidth}})],1),i("div",{staticClass:"layout-area top-container",style:{height:t.topHeight+"px"}},[i("tq-top-view",{attrs:{height:t.topHeight,width:t.$root.windowWidth}})],1),i("div",{staticClass:"layout-area bottom-container",style:{height:t.bottomHeight+"px",top:t.bottomYOffset+4+"px",backgroundColor:"#FEFEFE",boxShadow:t.showBottomShadow?"0px -3px 4px -1px #AFAFAF":""}},[i("div",{staticClass:"bottom-area-handle",on:{mousedown:t.handleMousedown}}),i("tq-bottom-view",{attrs:{height:t.bottomHeight,width:t.$root.windowWidth}})],1)])},c=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tq-header-view"},[a("tq-layout-area",{attrs:{height:t.height,otherStyle:{backgroundColor:"#FEFEFE"}}},[a("a",{attrs:{href:"https://www.shinnytech.com/tianqin/",target:"_blank"}},[a("img",{staticClass:"logo",style:{padding:"4px",width:t.height+"px",height:t.height+"px"},attrs:{alt:"Tianqin",src:i("cf05")}})])]),a("tq-layout-area",{attrs:{height:t.height,left:t.height,width:240,otherStyle:{paddingTop:"8px"}}},[t._v(" "+t._s(t.$store.state.file_name)+" ")]),a("tq-layout-area",{attrs:{height:t.height,left:t.height+240,width:380,otherStyle:{paddingTop:"8px",backgroundColor:"backtest"===t.$store.state.mode?"#FAF5EA":"replay"===t.$store.state.mode?"#F0E2FA":"#FFF"}}},["run"===t.$store.state.mode?a("div",[t._v("账户："+t._s(t.$store.state.broker_id)+","+t._s(t.$store.state.account_id)+" ")]):t._e(),"backtest"===t.$store.state.mode?a("div",[t._v("回测区间： "+t._s(t.formatDt(t.$store.state.start_dt))+" -- "+t._s(t.formatDt(t.$store.state.end_dt))+" ")]):t._e(),"replay"===t.$store.state.mode?a("div",[a("tq-replay-ctrl")],1):t._e()]),a("tq-layout-area",{attrs:{height:t.height,width:160,horizontalAlign:"right",otherStyle:{paddingTop:"8px"}}},[a("Badge",{attrs:{color:t.$store.state.py_file_status?"green":"red",text:"py文件"}}),a("Badge",{attrs:{color:t.$store.state.md_url_status?"green":"red",text:"行情"}}),a("Badge",{attrs:{color:t.$store.state.td_url_status?"green":"red",text:"交易"}})],1)],1)},l=[],u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-layout-absolute",style:t.computedStyle},[t._t("default")],2)},f=[],b={name:"tq-layout-absolute",data:function(){return{}},props:{horizontalAlign:{type:String,default:"left"},verticalAlign:{type:String,default:"top"},top:{type:Number,default:0},left:{type:Number,default:0},bottom:{type:Number,default:0},right:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},otherStyle:{type:Object,default:function(){}}},computed:{computedStyle:function(){var t={width:this.width+"px",height:this.height+"px"};return t[this.horizontalAlign]=this[this.horizontalAlign]+"px",t[this.verticalAlign]=this[this.verticalAlign]+"px",Object.assign(t,this.otherStyle)}}},p=b,m=(i("b9e2"),i("2877")),g=Object(m["a"])(p,u,f,!1,null,null,null),v=g.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"replay-control"},[t._v(" 复盘日期： "+t._s(t.currentDateTime?t.currentDateTime:t.formatDt(t.$store.state.replay_dt))+" ("+t._s(this.currentSpeed)+") "),i("ButtonGroup",{attrs:{size:"small"}},[i("Button",{on:{click:function(e){return t.ctrl("play")}}},[i("Icon",{attrs:{type:"ios-play"}})],1),i("Button",{on:{click:function(e){return t.ctrl("pause")}}},[i("Icon",{attrs:{type:"ios-pause"}})],1),i("Button",{on:{click:function(e){return t.ctrl("rewind")}}},[i("Icon",{attrs:{type:"ios-rewind"}})],1),i("Button",{on:{click:function(e){return t.ctrl("fastforward")}}},[i("Icon",{attrs:{type:"ios-fastforward"}})],1)],1)],1)},_=[],k=(i("a4d3"),i("e01a"),i("d28b"),i("a15b"),i("fb6a"),i("d3b7"),i("3ca3"),i("ddb0"),{name:"tq-replay-control",data:function(){return{currentSpeed:"-",currentDateTime:""}},props:{width:Number},computed:{replayUrl:function(){return this.$store.state.ctrl_url}},methods:{setSpeed:function(t){fetch(this.replayUrl,{method:"POST",body:JSON.stringify({aid:"ratio",speed:t})}).then((function(t){}))},ctrl:function(t){"play"===t?("-"===this.currentSpeed&&(this.currentSpeed=1),this.setSpeed(this.currentSpeed)):"pause"===t?this.setSpeed(0):"rewind"===t?("-"===this.currentSpeed?this.currentSpeed=1:this.currentSpeed<=5?this.currentSpeed=Math.max(1,this.currentSpeed-1):this.currentSpeed<=40?this.currentSpeed-=5:this.currentSpeed<=100&&(this.currentSpeed-=10),this.setSpeed(this.currentSpeed)):"fastforward"===t&&("-"===this.currentSpeed?this.currentSpeed=2:this.currentSpeed<5?this.currentSpeed+=1:this.currentSpeed<40?this.currentSpeed+=5:this.currentSpeed<100?this.currentSpeed+=10:this.currentSpeed=100,this.setSpeed(this.currentSpeed))},formatDt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return s()(t/1e6).format(e)}},mounted:function(){var t=this,e=["KQ.m@SHFE.au","KQ.m@SHFE.ag","KQ.m@CFFEX.T","KQ.m@CFFEX.TF"];this.$tqsdk.on("rtn_data",(function(){var i=t.$tqsdk.getByPath(["ins_list"]);i=void 0===i?"":i,""!==i&&-1!==i.indexOf("KQ.m@SHFE.au")&&-1!==i.indexOf("KQ.m@SHFE.ag")&&-1!==i.indexOf("KQ.m@CFFEX.T")&&-1!==i.indexOf("KQ.m@CFFEX.TF")||(i+=(i?",":"")+e.join(","),t.$tqsdk.subscribe_quote(i));var a=!0,r=!1,s=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var h=n.value,c=t.$tqsdk.get_by_path(["quotes",h,"datetime"]);t.currentDateTime=c&&c>t.currentDateTime?c.slice(0,19):t.currentDateTime}}catch(d){r=!0,s=d}finally{try{a||null==o.return||o.return()}finally{if(r)throw s}}}))}}),x=k,w=(i("2dac"),Object(m["a"])(x,y,_,!1,null,null,null)),j=w.exports,S={name:"tq-header-view",components:{TqLayoutArea:v,TqReplayCtrl:j},props:{height:Number},methods:{formatDt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return s()(t/1e6).format(e)}}},q=S,O=(i("8e24"),Object(m["a"])(q,d,l,!1,null,null,null)),C=O.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-top-view"},[i("tq-layout-area",{staticClass:"left-view",attrs:{height:t.height,width:t.chartWidth}},[i("tq-layout-area",{attrs:{height:26,width:300}},[i("button-group-durations",{attrs:{duration:t.duration},on:{onChangeDuration:t.onChangeDuration}})],1),i("tq-layout-area",{attrs:{top:26}},[i("tq-chart-components",{attrs:{instrumentId:t.instrumentId,duration:t.duration,height:t.height-26,width:t.chartWidth,theme:t.theme,mainType:t.mainType}})],1)],1),i("tq-layout-area",{staticClass:"right-view",attrs:{height:t.height,width:t.rightWidth,horizontalAlign:"right"}},["backtest"!==t.$store.state.mode?i("tq-layout-area",{attrs:{height:t.rightClosed?t.height-35:160,width:t.rightWidth}},["backtest"!==t.$store.state.mode?i("quote-info",{attrs:{symbol:t.instrumentId,height:t.rightClosed?t.height-35:160,width:t.rightWidth}}):t._e()],1):t._e(),i("tq-layout-area",{attrs:{top:"backtest"!==t.$store.state.mode?160:0,height:t.rightClosed?0:18,width:t.rightWidth,otherStyle:{backgroundColor:"lightgrey",color:"#333333",fontSize:"12px",fontWeight:"700",overflow:"hidden"}}},[t._v(" 订阅合约列表 ")]),i("tq-layout-area",{attrs:{verticalAlign:"bottom",bottom:35,height:t.rightClosed?0:t.height-("backtest"!==t.$store.state.mode?160:0)-18-35,width:t.rightWidth,otherStyle:{overflowY:"scroll"}}},[i("subscribed-list",{on:{onChange:t.onChangeSelectedSubscribed}})],1),i("tq-layout-area",{attrs:{verticalAlign:"bottom",height:35,width:t.rightWidth}},[i("about-us",{attrs:{width:t.rightWidth}})],1),"backtest"!==t.$store.state.mode?i("div",{staticClass:"right-resize-tool",on:{click:t.toggleRightClosed}},[t.rightClosed?i("Icon",{attrs:{type:"ios-arrow-back"}}):i("Icon",{attrs:{type:"ios-arrow-forward"}})],1):t._e()],1)],1)},I=[],P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-button-group-durations"},[i("RadioGroup",{attrs:{type:"button",size:"small"},model:{value:t.selectedPeriod,callback:function(e){t.selectedPeriod=e},expression:"selectedPeriod"}},t._l(t.periods,(function(t){return i("Radio",{key:t,attrs:{label:t}})})),1)],1)},N=[],M=(i("4160"),i("b64b"),i("07ac"),i("159b"),{"分时":6e10,"1m":6e10,"5m":3e11,"15m":9e11,"30m":18e11,"1h":36e11,"1d":864e11}),T={data:function(){return{periods:Object.keys(M),selectedPeriod:"",selectedDuration:null}},props:{duration:Number},watch:{duration:function(){if(this.duration!==this.selectedDuration){var t=Object.values(M).indexOf(this.duration);t>-1?(this.selectedPeriod=M[t],this.selectedDuration=this.duration):(this.selectedPeriod="",this.selectedDuration=null)}},selectedPeriod:function(){document.querySelectorAll(".tq-button-group-durations input[type=radio]").forEach((function(t){return t.blur()})),this.selectedDuration=M[this.selectedPeriod],this.selectedPeriod&&this.selectedDuration&&this.$emit("onChangeDuration",this.selectedDuration,this.selectedPeriod)}}},z=T,$=(i("326a"),Object(m["a"])(z,P,N,!1,null,null,null)),W=$.exports,G=(i("99af"),i("cb29"),i("a630"),i("4e82"),i("0d03"),i("9129"),i("e25e"),i("ac1f"),i("25f0"),i("8a79"),i("4d90"),i("5319"),i("1276"),i("4c53"),i("e587")),D=i("9aa6"),H=i("902f"),F=i("c3c5"),E=i("8b83"),Y=i("c65a"),L=i("c03e"),R=i("9f12"),B=i("53fe"),K=i("9155"),V=i("69a7"),U=i.n(V);function Q(t,e){return e={exports:{}},t(e,e.exports),e.exports}var X=Q((function(t){var e=Object.prototype.hasOwnProperty,i="~";function a(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,a,s,n){if("function"!==typeof a)throw new TypeError("The listener must be a function");var o=new r(a,s||t,n),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function n(t,e){0===--t._eventsCount?t._events=new a:delete t._events[e]}function o(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,a,r=[];if(0===this._eventsCount)return r;for(a in t=this._events)e.call(t,a)&&r.push(i?a.slice(1):a);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t){var e=i?i+t:t,a=this._events[e];if(!a)return[];if(a.fn)return[a.fn];for(var r=0,s=a.length,n=new Array(s);r<s;r++)n[r]=a[r].fn;return n},o.prototype.listenerCount=function(t){var e=i?i+t:t,a=this._events[e];return a?a.fn?1:a.length:0},o.prototype.emit=function(t,e,a,r,s,n){var o=i?i+t:t;if(!this._events[o])return!1;var h,c,d=this._events[o],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,a),!0;case 4:return d.fn.call(d.context,e,a,r),!0;case 5:return d.fn.call(d.context,e,a,r,s),!0;case 6:return d.fn.call(d.context,e,a,r,s,n),!0}for(c=1,h=new Array(l-1);c<l;c++)h[c-1]=arguments[c];d.fn.apply(d.context,h)}else{var u,f=d.length;for(c=0;c<f;c++)switch(d[c].once&&this.removeListener(t,d[c].fn,void 0,!0),l){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,e);break;case 3:d[c].fn.call(d[c].context,e,a);break;case 4:d[c].fn.call(d[c].context,e,a,r);break;default:if(!h)for(u=1,h=new Array(l-1);u<l;u++)h[u-1]=arguments[u];d[c].fn.apply(d[c].context,h)}}return!0},o.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,a,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return n(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||a&&o.context!==a||n(this,s);else{for(var h=0,c=[],d=o.length;h<d;h++)(o[h].fn!==e||r&&!o[h].once||a&&o[h].context!==a)&&c.push(o[h]);c.length?this._events[s]=1===c.length?c[0]:c:n(this,s)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&n(this,e)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})),J=Object(K["l"])(".%L"),Z=Object(K["l"])(":%S"),tt=Object(K["l"])("%H:%M"),et=Object(K["l"])("%H:%M"),it=Object(K["l"])("%m%d"),at=Object(K["l"])("%m%d"),rt=Object(K["l"])("%y");function st(t){return(Object(K["p"])(t)<t?J:Object(K["n"])(t)<t?Z:Object(K["m"])(t)<t?tt:Object(K["k"])(t)<t?et:Object(K["o"])(t)<t?it:Object(K["q"])(t)<t?at:rt)(t)}var nt=function(){function t(e){Object(R["a"])(this,t),this.chart=e,this.xScale=Object(K["i"])(),this.xAxis=Object(K["a"])().scale(this.xScale),this._init()}return Object(B["a"])(t,[{key:"_init",value:function(){this.rootG=this.chart.rootG.append("g").attr("class","x axis"),this.resetPosition()}},{key:"resetPosition",value:function(){this.rootG.attr("transform","translate("+Math.floor(this.chart.bar.barWidth/2)+","+(this.chart.innerHeight+1)+")"),this.xScale.rangeRound([0,this.chart.bar.barNumbers*this.chart.bar.barWidth-this.chart.bar.barWidth])}},{key:"draw",value:function(t,e,i){this.xScale.domain([t,e]),this.xAxis.tickFormat((function(t,e){return i[t]&&i[t].datetime?st(new Date(i[t].datetime/1e6)):""})),this.rootG.call(this.xAxis)}}]),t}();function ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=Number(t),a=Number.isInteger(e)?e:2;return Number.isFinite(i)?i.toFixed(a):t}var ht=function(){function t(e){Object(R["a"])(this,t),this.tqchart=e,this.svgG=this.tqchart.svg.append("g").attr("class","crosshair-container").attr("visibility","hidden"),this.rootG=this.svgG.append("g").attr("class","crosshair-content").attr("transform","translate("+this.tqchart.margin.left+","+this.tqchart.margin.top+")"),this.rectG=this.rootG.append("rect").attr("class","crosshair-cursor").attr("width",this.tqchart.innerWidth).attr("height",this.tqchart.innerHeight),this.klinePanel=this.svgG.append("g").attr("class","kline panel"),this.klinePanelWidth=100,this.klinePanelHeight=144,this.klinePanelDefaultColor="#333333",this.klinePanel.append("rect").attr("x",.5).attr("y",.5).attr("width",this.klinePanelWidth).attr("height",this.klinePanelHeight).attr("stroke","#DDDDDD"),this.klinePanel.append("text").attr("x",0).attr("y",0),this._initCrosshairline(),this._initAxisannotation()}return Object(B["a"])(t,[{key:"_initCrosshairline",value:function(){this.rootG.append("g").attr("class","crosshair horizontal").append("line").attr("x1",0).attr("y1",0).attr("x2",this.tqchart.innerWidth).attr("y2",0).attr("stroke","#aaaaaa").attr("stroke-dasharray","2"),this.rootG.append("g").attr("class","crosshair vertical").append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",this.tqchart.innerHeight).attr("stroke","#aaaaaa").attr("stroke-dasharray","2")}},{key:"_initAxisannotation",value:function(){this.rootG.append("g").attr("class","axisannotation x").attr("transform","translate(0,"+(this.tqchart.innerHeight+2)+")"),this.rootG.append("g").attr("class","axisannotation y left").attr("transform","translate(-"+(this.tqchart.margin.left-1)+",0)"),this.rootG.append("g").attr("class","axisannotation y right").attr("transform","translate("+(this.tqchart.innerWidth+1)+",0)"),this.rootG.select("g.axisannotation.x").append("rect").style("fill","#eeeeee").attr("opacity","0.8").attr("width","120px").attr("height","14px"),this.rootG.select("g.axisannotation.x").append("text").attr("x",1).attr("y",12),this.rootG.select("g.axisannotation.y.left").append("rect").style("fill","#FAFAFA").attr("opacity","0.9").attr("width",this.tqchart.margin.left-2).attr("height","16px"),this.rootG.select("g.axisannotation.y.left").append("text").attr("x",this.tqchart.margin.left-2).attr("y",13).attr("text-anchor","end"),this.rootG.select("g.axisannotation.y.right").append("rect").style("fill","#FAFAFA").attr("opacity","0.9").attr("width",this.tqchart.margin.right-2).attr("height","16px"),this.rootG.select("g.axisannotation.y.right").append("text").attr("x",2).attr("y",13)}},{key:"resize",value:function(){this.rectG.attr("width",this.tqchart.innerWidth).attr("height",this.tqchart.innerHeight),this.rootG.select("g.crosshair.horizontal line").attr("x2",this.tqchart.innerWidth),this.rootG.select("g.crosshair.vertical line").attr("y2",this.tqchart.innerHeight),this.rootG.select("g.axisannotation.x").attr("transform","translate(0,"+this.tqchart.innerHeight+")"),this.rootG.select("g.axisannotation.y.right").attr("transform","translate("+(this.tqchart.innerWidth+1)+",0)")}},{key:"update",value:function(t,e){var i=Math.floor(t/this.tqchart.bar.barWidth),a=i*this.tqchart.bar.barWidth+this.tqchart.bar.barWidth/2;this.rootG.select("g.crosshair.horizontal line").attr("y1",e+.5).attr("y2",e+.5),this.rootG.select("g.crosshair.vertical line").attr("x1",a).attr("x2",a);var r=this.tqchart.mainSeries;if(r&&r.last_id>-1&&r.data&&this.tqchart.range.leftId>-1){var s=this.tqchart.range.leftId+i,n=r.data[s],o=r.data[s-1];if(!n)return;this._updateKlinePanel(a,n,o),this._updateXAxisannotation(a,n.datetime);var h=this.tqchart.getBoardByYPosition(e);h&&this._updateYAxisannotation(e,h)}}},{key:"_updateKlinePanel",value:function(t,e,i){var a=this,r=[Object(K["l"])("%Y-%m-%d (%w)")(new Date(e.datetime/1e6)),Object(K["l"])("%H:%M:%S")(new Date(e.datetime/1e6)),"开盘",ot(e.open,this.tqchart.price_decs),"最高",ot(e.high,this.tqchart.price_decs),"最低",ot(e.low,this.tqchart.price_decs),"收盘",ot(e.close,this.tqchart.price_decs),"成交量",e.volume,"持仓量",e.close_oi],s=null;i&&i.close&&(s=ot(e.close-i.close,this.tqchart.price_decs),r.push("涨跌"),r.push(s),r.push("涨跌幅"),r.push(ot(s/i.close*100,2)+"%"));var n=this.klinePanel.select("text").selectAll("tspan").data(r);n.enter().append("tspan").merge(n).attr("x",(function(t,e){return e>1&&e%2===1?a.klinePanelWidth-1:1})).attr("dy",(function(t,e){return e>1&&e%2===1?"0px":"14px"})).attr("text-anchor",(function(t,e){return e>1&&e%2===1?"end":"start"})).attr("class",(function(t,e){if(15===e||17===e){if(s>0)return"up";if(s<0)return"down"}return""})).text((function(t){return t})).exit().remove();var o=2;t<this.klinePanelWidth-this.tqchart.margin.left&&(o=this.tqchart.outerWidth-2-this.klinePanelWidth),this.klinePanel.attr("transform","translate("+o+",0)")}},{key:"_updateXAxisannotation",value:function(t,e){this.rootG.select("g.axisannotation.x rect").attr("x",t-40),this.rootG.select("g.axisannotation.x text").text(Object(K["l"])("%Y-%m-%d %H:%M:%S")(new Date(e/1e6))).attr("x",t-38)}},{key:"_updateYAxisannotation",value:function(t,e){for(var i=0,a=["left","right"];i<a.length;i++){var r=a[i],s=e[r+"YAxis"],n=["g","axisannotation","y",r].join(".");if(s){var o=ot(s.yScale.invert(t-e.top),"main"===e.boardId&&"right"===r&&this.tqchart.price_decs?this.tqchart.price_decs:0);if(!Number.isNaN(o)){this.rootG.select(n).attr("visibility","visible"),this.rootG.select(n+" rect").attr("y",t-10),this.rootG.select(n+" text").text(o).attr("y",t+2);continue}}this.rootG.select("g.axisannotation.y.left").attr("visibility","hidden")}}},{key:"show",value:function(){this.svgG.attr("visibility","visible")}},{key:"hide",value:function(){this.svgG.attr("visibility","hidden"),this.rootG.selectAll("g.axisannotation.y").attr("visibility","hidden")}},{key:"drag",value:function(t){t?this.rectG.attr("class","crosshair-cursor drag"):this.rectG.attr("class","crosshair-cursor")}}]),t}(),ct=function(){function t(e,i){Object(R["a"])(this,t),this.board=e,this.align=i,this.yScale=Object(K["i"])().range([this.board.height,0]),this.yAxis="left"===i?Object(K["b"])(this.yScale):Object(K["c"])(this.yScale),this.yAxis.scale(this.yScale),this._init()}return Object(B["a"])(t,[{key:"_init",value:function(){this.rootG=this.board.rootG.append("g").attr("class","y axis "+this.align),this.resetPosition()}},{key:"resetPosition",value:function(){this.yScale.range([this.board.height,0]),"right"===this.align&&this.rootG.attr("transform","translate("+this.board.width+",0)")}},{key:"getTicks",value:function(){var t=[],e=this;return this.rootG.selectAll(".tick").each((function(i){t.push(Math.round(e.yScale(i)))})),t}},{key:"draw",value:function(t){this.yScale.domain(t),this.yAxis.ticks("main"===this.board.boardId?6:3),this.rootG.call(this.yAxis)}}]),t}(),dt=function(){function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",r=arguments.length>3?arguments[3]:void 0;Object(R["a"])(this,t),this.tqchart=e,this.parentSvg=i,this.board=r,this.rootG=this.parentSvg.append("g").attr("class","background"),this.direction=a,"horizontal"===this.direction&&this.rootG.append("line").attr("class","border").attr("x1",-this.tqchart.margin.left).attr("y1",-.5).attr("x2",this.tqchart.innerWidth+this.tqchart.margin.right).attr("y2",-.5)}return Object(B["a"])(t,[{key:"clear",value:function(){this.rootG.selectAll("line").remove()}},{key:"draw",value:function(){if("vertical"===this.direction){var t=this.tqchart.xAxis.getTicks();this._drawVerticalLines(t)}else if("horizontal"===this.direction){var e=this.board.rightYAxis.getTicks();this._drawHorizontalLines(e)}}},{key:"resize",value:function(){"vertical"===this.direction?this.rootG.selectAll("line").attr("y2",this.tqchart.innerHeight):"horizontal"===this.direction&&this.rootG.selectAll("line").attr("x2",this.tqchart.innerWidth)}},{key:"_drawVerticalLines",value:function(t){var e=this.tqchart.innerHeight,i=this.rootG.selectAll("line.bgline").data(t);i.enter().append("line").attr("class","bgline").attr("y1",0).attr("y2",e).merge(i).attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),i.exit().remove()}},{key:"_drawHorizontalLines",value:function(t){var e=this.tqchart.innerWidth,i=this.rootG.selectAll("line.bgline").data(t);i.enter().append("line").attr("class","bgline").attr("x1",0).attr("x2",e).merge(i).attr("y1",(function(t){return t+.5})).attr("y2",(function(t){return t+.5})),i.exit().remove()}}]),t}(),lt=2,ut=function(){function t(e,i,a,r,s){Object(R["a"])(this,t),this.tqchart=e,this.boardId=i,this.top=a,this.height=r,this.width=this.tqchart.innerWidth,this.rootG=this.tqchart.rootG.append("g").attr("class",this.boardId).attr("transform","translate(0,"+this.top+")"),this.background=new dt(this.tqchart,this.rootG,"horizontal",this),this.plotG=this.rootG.append("g").attr("class",this.boardId+" plots"),this.maskG=this.rootG.append("mask").attr("id","mask-"+this.boardId).append("rect").attr("x","0").attr("y","0").attr("width",this.width).attr("height",this.height).style("fill","#FFFFFF").attr("stroke","none"),this.markG=this.rootG.append("g").attr("mask","url(#mask-"+this.boardId+")").attr("class",this.boardId+" marks"),this.nameG=this.markG.append("text").attr("class",this.boardId+" name text").attr("dy","12").attr("dx","2").text(this.boardId.toUpperCase()),this.leftYAxis=new ct(this,"left"),this.rightYAxis=new ct(this,"right")}return Object(B["a"])(t,[{key:"resetPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.top,i=void 0===e?this.top:e,a=t.height,r=void 0===a?this.height:a;this.top=i,this.rootG.attr("transform","translate(0,"+this.top+")"),this.height=r,this.width=this.tqchart.innerWidth,this.maskG.attr("width",this.width).attr("height",this.height),this.background.resize(),this.leftYAxis&&this.leftYAxis.resetPosition(),this.rightYAxis.resetPosition()}},{key:"setDomain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";this[e+"Domain"]=t}},{key:"draw",value:function(t,e,i){this.leftYAxis.draw(this.leftDomain),this.rightYAxis.draw(this.rightDomain),this.background.draw()}},{key:"leftDomain",value:function(t){throw new Error("Method not implemented.")}},{key:"rightDomain",value:function(t){throw new Error("Method not implemented.")}},{key:"remove",value:function(){this.rootG.remove()}}],[{key:"GetMutilPlotsHeight",value:function(t,e){for(var i=e-lt*(t-1),a=1/t,r=Math.ceil(i*a*.7),s=i-r*(t-1),n=[{top:0,height:s}],o=1;o<t;o++)n[o]={height:r,top:n[o-1].top+n[o-1].height+lt};return n}}]),t}(),ft=(Object(K["l"])(".%L"),Object(K["l"])(":%S"),Object(K["l"])("%H:%M"),Object(K["l"])("%H:%M"),Object(K["l"])("%m%d"),Object(K["l"])("%m%d"),Object(K["l"])("%y"),function(t){var e="";if(t&&t>=1e9){var i=U.a.duration(t/1e9,"seconds");i.years()>0&&(e+=i.years()+"Y"),i.months()>0&&(e+=i.months()+"M"),i.days()>0&&(e+=i.days()+"D"),i.hours()>0&&(e+=i.hours()+"h"),i.minutes()>0&&(e+=i.minutes()+"m"),i.seconds()>0&&(e+=i.seconds()+"s")}return e}),bt={up:function(t){return t.open<=t.close},down:function(t){return t.open>t.close}},pt=Object.keys(bt),mt={up:function(t){return t.open<t.close},down:function(t){return t.open>t.close},equal:function(t){return t.open===t.close}},gt=Object.keys(mt),vt=function(t,e,i){return function(){"color: white; background-color: ".concat(i,";");for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a]}},yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TqChart",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plum";return{log:vt("color: green;",t,e),info:vt("color: blue;",t,e),debug:vt("color: pink;",t,e),warn:vt("color: orange;",t,e),error:vt("color: red;",t,e)}},_t=function(t){return Number.isInteger(Number(t))},kt=function(t){var e="string"===typeof t?t:"";if(_t(t)){var i=t.toString(16).padStart(8,"F"),a=parseInt(i.slice(0,2),16)/255,r=parseInt(i.slice(2,4),16),s=parseInt(i.slice(4,6),16),n=parseInt(i.slice(6),16);e="rgba(".concat(r,", ").concat(s,", ").concat(n,", ").concat(a,")")}return e},xt=function t(e){Object(R["a"])(this,t),this.id=e.id||(new Date).getTime()+"",this.bar=e.bar,this.xScale=e.xScale,this.yScale=e.yScale,this.paths=[]},wt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.id,r=i.xScale,s=i.yScale,n=i.bar;return Object(R["a"])(this,e),t=Object(E["a"])(this,Object(Y["a"])(e).call(this,{id:a,xScale:r,yScale:s,bar:n})),gt.forEach((function(e){return t.paths.push([t.id,"candle","line",e].join("."))})),gt.forEach((function(e){return t.paths.push([t.id,"candle","body",e].join("."))})),t}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"getYDomain",value:function(t,e,i){var a=i.slice(t,e+1),r=[Object(K["g"])(a,(function(t){return t&&t.low})),Object(K["f"])(a,(function(t){return t&&t.high}))],s=r[0],n=r[1];return s-=.2*(n-s),n+=.2*(n-s),[s,n]}},{key:"calcPaths",value:function(t,e,i){var a=this;if(this.yScale&&this.xScale&&this.bar){var r={};this.paths.forEach((function(t){r[t]=""}));for(var s=function(t){if(!i[t])return"continue";gt.forEach((function(e){if(mt[e](i[t])){var s="up"===e?.5:0;r[[a.id,"candle","body",e].join(".")]+=a._bodyPath(i[t],t,s),r[[a.id,"candle","line",e].join(".")]+=a._linePath(i[t],t)}}))},n=t;n<=e;n++)s(n);return r}}},{key:"_bodyPath",value:function(t,e,i){var a=Math.round(this.yScale(t.open))+i,r=Math.round(this.yScale(t.close))+i,s=this.xScale(e)+this.bar.barPadding;if(Number.isNaN(a)||Number.isNaN(r)||Number.isNaN(s))return"";var n=this.bar.barWidth-2*this.bar.barPadding;return a!==r?"M".concat(s+i," ").concat(a," L").concat(s+n-i," ").concat(a," L").concat(s+n-i," ").concat(r," L").concat(s+i," ").concat(r," L").concat(s+i," ").concat(a):"M".concat(s," ").concat(a+.5," L").concat(s+n," ").concat(a+.5)}},{key:"_linePath",value:function(t,e){var i=Math.round(this.yScale(t.high)),a=Math.round(this.yScale(t.low)),r=this.xScale(e)+this.bar.barWidth/2;return Number.isNaN(i)||Number.isNaN(a)||Number.isNaN(r)?"":"M ".concat(r," ").concat(i," L ").concat(r," ").concat(a)}}]),e}(xt),jt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.id,r=i.xScale,s=i.yScale,n=i.bar;return Object(R["a"])(this,e),t=Object(E["a"])(this,Object(Y["a"])(e).call(this,{id:a,xScale:r,yScale:s,bar:n})),t.paths=["close"],t}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"getYDomain",value:function(t,e,i){var a=i.slice(t,e+1),r=[Object(K["g"])(a,(function(t){return t&&t.close})),Object(K["f"])(a,(function(t){return t&&t.close}))],s=r[0],n=r[1];return s-=.2*(n-s),n+=.2*(n-s),[s,n]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var a="",r=t;r<=e;r++)if(i[r]){var s=this.yScale(i[r].close),n=this.xScale(r)+this.bar.barWidth/2;a+=""===a?"M":"L",a+="".concat(n," ").concat(s," ")}return{close:a}}}}]),e}(xt),St=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.id,r=i.xScale,s=i.yScale,n=i.bar;return Object(R["a"])(this,e),t=Object(E["a"])(this,Object(Y["a"])(e).call(this,{id:a,xScale:r,yScale:s,bar:n})),pt.forEach((function(e){return t.paths.push([t.id,"body",e].join("."))})),t}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"getYDomain",value:function(t,e,i){var a=i.slice(t,e+1);return[0,1.2*Object(K["f"])(a,(function(t){return t&&t.volume}))]}},{key:"calcPaths",value:function(t,e,i){var a=this;if(this.yScale&&this.xScale&&this.bar){var r={};this.paths.forEach((function(t){r[t]=""}));for(var s=function(t){if(!i[t])return"continue";pt.forEach((function(e){bt[e](i[t])&&(r[[a.id,"body",e].join(".")]+=a.bodyPath(i[t],t,"up"===e?.5:0))}))},n=t;n<=e;n++)s(n);return r}}},{key:"bodyPath",value:function(t,e,i){var a=Math.ceil(this.yScale(0))+(0===i?1:i),r=Math.min(Math.round(a-this.yScale(t.volume)),a-i),s=this.xScale(e)+this.bar.barPadding,n=this.bar.barWidth-2*this.bar.barPadding,o="M".concat(s+i," ").concat(a,"L").concat(s+n-i," ").concat(a,"L ").concat(s+n-i," ").concat(a-r,"L").concat(s+i," ").concat(a-r,"L").concat(s+i," ").concat(a);return o}}]),e}(xt),qt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.id,r=i.xScale,s=i.yScale,n=i.bar;return Object(R["a"])(this,e),t=Object(E["a"])(this,Object(Y["a"])(e).call(this,{id:a,xScale:r,yScale:s,bar:n})),t.paths=["oi"],t}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"getYDomain",value:function(t,e,i){var a=i.slice(t,e+1),r=[Object(K["g"])(a,(function(t){return t&&t.close_oi})),Object(K["f"])(a,(function(t){return t&&t.close_oi}))],s=r[0],n=r[1];return s-=.2*(n-s),n+=.2*(n-s),[s,n]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var a="",r=t;r<=e;r++)if(i[r]){var s=this.yScale(i[r].close_oi),n=this.xScale(r)+this.bar.barWidth/2;a+=""===a?"M":"L",a+="".concat(n," ").concat(s," ")}return{oi:a}}}}]),e}(xt),Ot=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.id,r=i.xScale,s=i.yScale,n=i.bar,o=i.propName,h=i.min,c=i.max;return Object(R["a"])(this,e),t=Object(E["a"])(this,Object(Y["a"])(e).call(this,{id:a,xScale:r,yScale:s,bar:n})),t.min=h,t.max=c,t.propName=o||"value",t.paths=["value"],t}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"getYDomain",value:function(t,e,i){var a=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var r=i.slice(t,e+1);return[Object(K["g"])(r,(function(t){return t&&t[a.propName]})),Object(K["f"])(r,(function(t){return t&&t[a.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var a="M",r=t;r<=e;r++)if(i[r]){var s=this.yScale(i[r][this.propName]),n=this.xScale(r)+this.bar.barWidth/2;void 0===s||Number.isNaN(s)||Number.isNaN(n)?a.endsWith("M")||(a+="M"):(a+=a.endsWith("M")?"":"L",a+="".concat(n," ").concat(s))}else a.endsWith("M")||(a+="M");return{value:a.replace(/[LM]$/,"")}}}}]),e}(xt),Ct=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.id,r=i.xScale,s=i.yScale,n=i.bar,o=i.propName,h=i.isHollow,c=i.min,d=i.max;return Object(R["a"])(this,e),t=Object(E["a"])(this,Object(Y["a"])(e).call(this,{id:a,xScale:r,yScale:s,bar:n})),t.isHollow=h||!1,t.min=c,t.max=d,t.propName=o||"value",t.paths=["value"],t}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"getYDomain",value:function(t,e,i){var a=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var r=i.slice(t,e+1);return[0,Object(K["f"])(r,(function(t){return t&&t[a.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var a="",r=t;r<=e;r++)i[r]&&(a+=this.bodyPath(i[r],r,this.isHollow?.5:0));return{value:a}}}},{key:"bodyPath",value:function(t,e,i){var a=Math.floor(this.yScale(0)),r=Math.round(a-this.yScale(t[this.propName])),s=this.xScale(e)+this.bar.barPadding;if(Number.isNaN(r)||Number.isNaN(s))return"";var n=this.bar.barWidth-2*this.bar.barPadding;return"M ".concat(s+i," ").concat(a-i," L ").concat(s+n-i," ").concat(a-i," L ").concat(s+n-i," ").concat(a-r+i," L ").concat(s+i," ").concat(a-r+i," L ").concat(s+i," ").concat(a-i)}}]),e}(xt),At=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.id,r=i.xScale,s=i.yScale,n=i.bar,o=i.propName,h=i.min,c=i.max;return Object(R["a"])(this,e),t=Object(E["a"])(this,Object(Y["a"])(e).call(this,{id:a,xScale:r,yScale:s,bar:n})),t.min=h,t.max=c,t.propName=o||"value",t.paths=["value"],t}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"getYDomain",value:function(t,e,i){var a=this;if(Number.isFinite(this.min)&&Number.isFinite(this.max))return[this.min,this.max];var r=i.slice(t,e+1);return[Object(K["g"])(r,(function(t){return t&&t[a.propName]})),Object(K["f"])(r,(function(t){return t&&t[a.propName]}))]}},{key:"calcPaths",value:function(t,e,i){if(this.yScale&&this.xScale&&this.bar){for(var a="",r=t;r<=e;r++)if(i[r]){var s=this.yScale(i[r][this.propName]),n=this.xScale(r)+this.bar.barWidth/2;if(!Number.isNaN(s)&&!Number.isNaN(n)){var o=3;a+="M ".concat(n-o," ").concat(s," a ").concat(o,", ").concat(o," 0 1,0 ").concat(2*o,",0 a ").concat(o,", ").concat(o," 0 1,0 ").concat(2*-o,",0 ")}}return{value:a}}}}]),e}(xt),It=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.chart,a=e.boardId,r=e.plotId,s=void 0===r?"":r,n=e.yAlign,o=void 0===n?"right":n,h=e.type,c=void 0===h?"candle":h,d=e.color,l=void 0===d?"red":d,u=e.width,f=void 0===u?2:u,b=e.dash,p=void 0!==b&&b,m=e.propName,g=void 0===m?"":m,v=e.data;Object(R["a"])(this,t),this.chart=i,this.boardId=a,this.plotId=s,this.yAlign=o,this.board=this.chart.boards[a],this.data=v,this.type=c,this.color=l,this.width=Number.isFinite(f)?Math.round(f):2,this.dash=p,this.propName=g,this.g=this.board.plotG.append("g").attr("class","plot ".concat(this.boardId," ").concat(this.plotId)),this.path=null,this._initPath()}return Object(B["a"])(t,[{key:"_initPath",value:function(){switch(this.type){case"candle":this.path=new wt({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"volume":this.path=new St({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"oi":this.path=new qt({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"close":this.path=new jt({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"dash":this.path=new Ot({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"line":this.path=new Ot({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar,propName:"string"===typeof this.propName?this.propName:""});break;case"bar":this.path=new Ct({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break;case"dot":this.path=new At({id:this.plotId,xScale:this.chart.xAxis.xScale,yScale:this.chart.boards[this.boardId][this.yAlign+"YAxis"].yScale,bar:this.chart.bar});break}for(var t=0;t<this.path.paths.length;t++)this._appendPlotTypePath(this.path.paths[t])}},{key:"_appendPlotTypePath",value:function(t){if(Array.isArray(t)||(t=t.split(".")),this.g.selectAll("path.".concat(t.join("."))).data((function(t){return[t]})).enter().append("path").attr("class",t.join(" ")),"line"===this.type||"dash"===this.type){var e="string"===typeof this.color?this.color:"";this.g.selectAll("path.".concat(t.join("."))).style("fill","none").attr("stroke",e).attr("stroke-width",this.width+"px").attr("stroke-dasharray",this.dash?"4 4":"0")}else"bar"===this.type?this.g.selectAll("path.".concat(t.join("."))).style("fill",this.color).attr("stroke","none"):"dot"===this.type&&this.g.selectAll("path.".concat(t.join("."))).style("fill",this.color).attr("stroke","none")}},{key:"getYDomain",value:function(t,e,i){return this.path.getYDomain(t,e,i)}},{key:"draw",value:function(t,e,i){var a=this.path.calcPaths(t,e,i);for(var r in a)try{this.g.select("path.".concat(r)).attr("d",a[r])}catch(s){this.chart.tqConsole.error(s)}}},{key:"remove",value:function(){this.g.remove()}}]),t}(),Pt=function(){function t(t,e,i){this.tqchart=t,this.id=e,this.klineId=i}return t.prototype.update=function(t){this.klineId=t},t.prototype.resize=function(){this.g.attr("width",this.tqchart.bar.barWidth).attr("height",this.tqchart.innerHeight)},t.prototype.draw=function(){this.g||(this.g=this.tqchart.bgShapesG.append("rect").attr("class","highlight").attr("width",this.tqchart.bar.barWidth).attr("height",this.tqchart.innerHeight));var t=this.tqchart.chartController.revertIdToPx(this.klineId);this.g.attr("transform","translate("+t+",0)")},t.prototype.clear=function(){this.g.remove()},t}(),Nt={HighlightBar:Pt},Mt=function(){function t(e,i,a){Object(R["a"])(this,t),this.tqchart=e,this.managerId=i,this.typeClass=a,this.contents={}}return Object(B["a"])(t,[{key:"add",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];var r;this.contents[t]?(r=this.contents[t]).update.apply(r,i):this.contents[t]=Object(F["a"])(Nt[this.typeClass],[this.tqchart,t].concat(i));return this.contents[t]}},{key:"each",value:function(t,e){for(var i=arguments.length,a=new Array(i>2?i-2:0),r=2;r<i;r++)a[r-2]=arguments[r];for(var s in this.contents)if(this.contents[s]){var n=this.contents[s];n[t].apply(n,[e].concat(a))}}},{key:"get",value:function(t){return this.contents[t]||null}},{key:"remove",value:function(t){this.contents[t].clear(),delete this.contents[t]}},{key:"removeAll",value:function(){for(var t in this.contents)this.contents[t].clear(),delete this.contents[t]}}]),t}(),Tt=function(){function t(e){var i=e.id,a=e.chart,r=e.board,s=e.boardId,n=e.parentG,o=e.type,h=e.yAlign,c=e.fill,d=e.fillOpacity,l=e.stroke,u=e.strokeWidth,f=e.strokeOpacity,b=e.strokeDasharray;Object(R["a"])(this,t),this.id=i||(new Date).getTime(),this.chart=a,this.boardId=s||"main",this.board=r||this.chart.boards[this.boardId],this.parentG=n,this.g=n?n.append("g").attr("class",this.boardId+" mark "+o+" "+this.id):this.board.markG.append("g").attr("class",this.boardId+" mark "+o+" "+this.id),this.yAlign=h||"right",this.type=o,this.fill=c||"none",this.fillOpacity=d||.5,this.stroke=l||"#bbbbbb",this.strokeWidth=u||1,this.strokeOpacity=f||.5,this.strokeDasharray=b||"0",this._show=!0}return Object(B["a"])(t,[{key:"update",value:function(t){this.xPos1=void 0===t.xPos1?this.xPos1:t.xPos1,this.x1=void 0===t.x1?this.x1:t.x1,this.dt1=void 0===t.dt1?this.dt1:t.dt1,this.yPos1=void 0===t.yPos1?this.yPos1:t.yPos1,this.y1=void 0===t.y1?this.y1:t.y1,this.xPos2=void 0===t.xPos2?this.xPos2:t.xPos2,this.x2=void 0===t.x2?this.x2:t.x2,this.dt2=void 0===t.dt2?this.dt2:t.dt2,this.yPos2=void 0===t.yPos2?this.yPos2:t.yPos2,this.y2=void 0===t.y2?this.y2:t.y2}},{key:"show",value:function(){this.g&&!this._show&&(this._show=!0,this.g.attr("visibility","visible"))}},{key:"hide",value:function(){this.g&&this._show&&(this._show=!1,this.g.attr("visibility","hidden"))}},{key:"remove",value:function(){this.g.remove()}},{key:"revertSomeToPos",value:function(t){var e={x:null,y:null};return Number.isFinite(this["xPos"+t])?e.x=this["xPos"+t]:Number.isFinite(this["x"+t])?e.x=this.revertIdToPos(this["x"+t]):Number.isFinite(this["dt"+t])&&(e.x=this.revertIdToPos(this.revertDtToId(this["dt"+t]))),Number.isFinite(this["yPos"+t])?e.y=this["yPos"+t]:Number.isFinite(this["y"+t])&&(e.y=this.revertValueToYPos(this["y"+t])),e}},{key:"revertDtToId",value:function(t){var e=this.chart.mainSeries,i=[this.chart.range.leftId,this.chart.range.rightId],a=i[0],r=i[1];if(!e||!e.data||!e.data[a]||t<e.data[a].datetime)return null;var s=e.data[r]?r:e.last_id;if(t<=e.data[s].datetime)for(var n=a;n<s+1;n++)if(t-e.data[n].datetime<=0)return n;return null}},{key:"revertIdToPos",value:function(t){return Math.round(this.chart.xAxis.xScale(t))+Math.floor(this.chart.bar.barWidth/2)}},{key:"revertValueToYPos",value:function(t){return t&&this.board[this.yAlign+"YAxis"]?Math.round(this.board[this.yAlign+"YAxis"].yScale(t)):null}},{key:"isPointInChart",value:function(t){var e=t.x,i=t.y;return e>=0&&e<=this.chart.innerWidth&&i>=0&&i<=this.chart.innerHeight}}]),t}(),zt=function(t){function e(t){var i;return Object(R["a"])(this,e),i=Object(E["a"])(this,Object(Y["a"])(e).call(this,t)),i.type="text",i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.text=t.text,i.size=t.size,i.textG=i.g.append("text").style("font-size",i.size).style("fill",i.fill),i}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"update",value:function(t){Object(H["a"])(Object(Y["a"])(e.prototype),"update",this).call(this,t),this.text=void 0===t.text?this.text:t.text}},{key:"draw",value:function(){var t=this.revertSomeToPos("1");if(Number.isFinite(t.x)&&Number.isFinite(t.y)&&this.text)return this.show(),void this.textG.attr("x",t.x).attr("y",t.y).text(this.text);this.hide()}}]),e}(Tt),$t=function(t){function e(t){var i;return Object(R["a"])(this,e),i=Object(E["a"])(this,Object(Y["a"])(e).call(this,t)),i.type="line",i.lineG=i.g.append("line"),i.lineG.style("fill","none").attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.text=t.text,i.clamp=t.clamp,i}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"update",value:function(t){Object(H["a"])(Object(Y["a"])(e.prototype),"update",this).call(this,t),this.x1=t.x1||this.x1,this.y1=t.y1||this.y1,this.text=void 0===t.text?this.text:t.text,this.clamp=void 0===t.clamp?this.clamp:t.clamp}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=this.revertSomeToPos("2");Number.isFinite(t.x)&&Number.isFinite(t.y)&&Number.isFinite(e.x)&&Number.isFinite(e.y)&&(this.clamp&&t.y-e.y<1e-6&&(t.y<0||e.y<0?t.y=e.y=0:(t.y>this.chart.innerHeight||e.y>this.chart.innerHeight)&&(t.y=e.y=this.chart.innerHeight)),this.lineG.attr("x1",t.x).attr("y1",t.y).attr("x2",e.x).attr("y2",e.y),this.show(),this.text&&(this.textG=this.textG||this.g.append("text"),this.textG.attr("x",t.x).attr("y",t.y).attr("dy",t.y<15?"12px":"-2px").text(this.text)))}}]),e}(Tt),Wt=function(t){function e(t){var i;return Object(R["a"])(this,e),i=Object(E["a"])(this,Object(Y["a"])(e).call(this,t)),i.type="rect",i.rectG=i.g.append("rect"),i.rectG.style("fill",i.fill).attr("fill-opacity",i.fillOpacity).attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.width=t.width,i.height=t.height,i}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"update",value:function(t){Object(H["a"])(Object(Y["a"])(e.prototype),"update",this).call(this,t),this.width=void 0===t.width?this.width:t.width,this.height=void 0===t.height?this.height:t.height}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=.5;if("none"===this.rectG.attr("stroke")&&(e=0),Number.isFinite(t.x)&&Number.isFinite(t.y)){if(Number.isFinite(this.width)&&Number.isFinite(this.height))return this.rectG.attr("x",t.x+e).attr("y",t.y+e).attr("width",this.width).attr("height",this.height),void this.show();var i=this.revertSomeToPos("2");if(Number.isFinite(i.x)&&Number.isFinite(i.y))return this.rectG.attr("x",t.x+e).attr("y",t.y+e).attr("width",Math.abs(i.x-t.x)).attr("height",Math.abs(i.y-t.y)),void this.show()}this.hide()}}]),e}(Tt),Gt=function(t){function e(t){var i;return Object(R["a"])(this,e),i=Object(E["a"])(this,Object(Y["a"])(e).call(this,t)),i.type="arrow",i.arrowG=i.g.append("path"),i.arrowG.style("fill",i.fill).attr("stroke",i.stroke).attr("stroke-width",i.strokeWidth).attr("stroke-opacity",i.strokeOpacity).attr("stroke-dasharray",i.strokeDasharray),i.xPos1=t.xPos1,i.x1=t.x1,i.dt1=t.dt1,i.yPos1=t.yPos1,i.y1=t.y1,i.xPos2=t.xPos2,i.x2=t.x2,i.dt2=t.dt2,i.yPos2=t.yPos2,i.y2=t.y2,i.width=t.width,i.height=t.height,i.direction=t.direction,i}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"update",value:function(t){Object(H["a"])(Object(Y["a"])(e.prototype),"update",this).call(this,t),this.width=void 0===t.width?this.width:t.width,this.height=void 0===t.height?this.height:t.height,this.direction=void 0===t.direction?this.direction:t.direction}},{key:"draw",value:function(){var t=this.revertSomeToPos("1"),e=this.width||this.chart.bar.barWidth,i=this.height||this.chart.bar.barWidth,a="up"===this.direction?1:-1,r="none"===this.stroke?0:.5;if(Number.isFinite(t.x)&&Number.isFinite(t.y)&&this.isPointInChart(t)){var s=Math.round(e/3),n="M ".concat(t.x+e/2," ").concat(t.y," l ").concat(-e/2," ").concat(a*i/2," l ").concat(s-r," 0 l 0 ").concat(a*i/2," l ").concat(s," 0 l 0 ").concat(-1*a*i/2," l ").concat(s," 0 z");this.arrowG.attr("d",n),this.show()}else this.hide()}}]),e}(Tt),Dt=function(){function t(e){Object(R["a"])(this,t),this.chart=e,this.marks={}}return Object(B["a"])(t,[{key:"addMark",value:function(t){return t.id=t.id||(new Date).getTime(),this.marks[t.id]?this.marks[t.id].update(t):(t.chart=t.chart||this.chart,t.boardId=t.boardId||"main",t.board=t.board||this.chart.boards[t.boardId],t.yAlign=t.yAlign||"right","line"===t.type?this.marks[t.id]=new $t(t):"rect"===t.type?this.marks[t.id]=new Wt(t):"arrow"===t.type?this.marks[t.id]=new Gt(t):"text"===t.type?this.marks[t.id]=new zt(t):this.chart.tqConsole.error("未支持 ".concat(t.type," 类型标记，[line|rect|arrow|text]"))),this.marks[t.id]}},{key:"removeMarkAll",value:function(){for(var t in this.marks)this.marks[t].remove(),delete this.marks[t]}},{key:"removeMark",value:function(t){this.marks[t]&&this.marks[t].remove(),delete this.marks[t]}},{key:"showMark",value:function(t){this.marks[t].show()}},{key:"hideMark",value:function(t){this.marks[t].hide()}},{key:"draw",value:function(){var t=this.chart.mainSeries,e=[this.chart.range.leftId,this.chart.range.rightId],i=e[0],a=e[1];if(a=t.data[a]?a:t.last_id,t.data[i]&&t.data[a]){var r=t.data[i].datetime,s=t.data[a].datetime;for(var n in this.marks){var o=this.marks[n];if("arrow"===o.type)if(o.dt1>=r&&o.dt1<=s){var h=this.marks[n].revertDtToId(o.dt1);this.marks[n].x1=h,this.marks[n].y1="up"===this.marks[n].direction?t.data[h].low:t.data[h].high,this.marks[n].draw()}else this.marks[n].hide();else this.marks[n].draw()}}}}]),t}(),Ht=function(){function t(e){Object(R["a"])(this,t),this.tqchart=e,this._board=null,this._g=null,this.trades={}}return Object(B["a"])(t,[{key:"add",value:function(t,e){this.trades[t]||(this.trades[t]=e)}},{key:"removeAll",value:function(){for(var t in this.g.select("path").remove(),this.trades)delete this.trades[t]}},{key:"revertValueToYPos",value:function(t){return t&&this.board.rightYAxis?Math.round(this.board.rightYAxis.yScale(t)):null}},{key:"draw",value:function(){var t=[],e={},i={},a=this.tqchart.mainSeries,r=[this.tqchart.range.leftId,this.tqchart.range.rightId],s=r[0],n=r[1];if(n=a.data[n]?n:a.last_id,a.data[s]&&a.data[n]){var o=[a.data[s].datetime,a.data[n].datetime],h=o[0],c=o[1];for(var d in this.trades){var l=this.trades[d];if(l.trade_date_time>=h&&l.trade_date_time<=c+this.tqchart.duration){var u=this.tqchart.chartController.revertDtToId(l.trade_date_time,s,n);if(!u)continue;if("BUY"===l.direction)if(e[u])e[u].volume+=l.volume;else{var f={x:this.tqchart.chartController.revertIdToPx(u),y:this.revertValueToYPos(a.data[u].low),dir:"up",diff:"OPEN"===l.offset?0:.5,width:this.tqchart.bar.barWidth,volume:l.volume};e[u]=f,t.push(f)}else if("SELL"===l.direction)if(i[u])i[u].volume+=l.volume;else{var b={x:this.tqchart.chartController.revertIdToPx(u),y:this.revertValueToYPos(a.data[u].high),dir:"down",diff:"OPEN"===l.offset?0:.5,width:this.tqchart.bar.barWidth,volume:l.volume};i[u]=b,t.push(b)}}}this.drawArrows(t)}}},{key:"drawArrows",value:function(t){var e=this.g.selectAll("path").data(t);e.enter().append("path").attr("class",(function(t){return t.dir})).attr("d",this.getArrowPath),e.merge(e).attr("class",(function(t){return t.dir})).attr("d",this.getArrowPath),e.exit().remove()}},{key:"getArrowPath",value:function(t){var e="up"===t.dir?1:-1,i=t.width,a=t.width,r=Math.round(a/3);return"M ".concat(t.x+a/2," ").concat(t.y," l ").concat(-a/2," ").concat(e*i/2," l ").concat(r-t.diff," 0 l 0 ").concat(e*i/2," l ").concat(r," 0 l 0 ").concat(-1*e*i/2," l ").concat(r," 0 z")}},{key:"board",get:function(){return null===this._board&&(this._board=this.tqchart.boards.main?this.tqchart.boards.main:null),this._board}},{key:"g",get:function(){return null===this._g&&(this._g=this.board.markG.append("g").attr("class","tradearrow")),this._g}}]),t}(),Ft=function(){function t(e){Object(R["a"])(this,t),this.tqchart=e,this._board=null,this._g=null,this.datetimeKeys=[],this.positions={}}return Object(B["a"])(t,[{key:"add",value:function(t,e){this.positions[t]||(this.positions[t]=e,e.datetime=t,e.volume_net=e.volume_long-e.volume_short,e.klineId=this.tqchart.chartController.revertDtToId(t),this.datetimeKeys=Object.keys(this.positions).sort())}},{key:"removeAll",value:function(){for(var t in this.g.select("rect").remove(),this.positions)delete this.positions[t];this.datetimeKeys=[]}},{key:"getPostionKlineId",value:function(t){return t.klineId?t.klineId:(t.klineId=this.tqchart.chartController.revertDtToId(t.datetime),t.klineId)}},{key:"revertValueToYPos",value:function(t){return t&&this.board.rightYAxis?Math.round(this.board.rightYAxis.yScale(t)):null}},{key:"draw",value:function(){var t=this.tqchart.mainSeries,e=[this.tqchart.range.leftId,this.tqchart.range.rightId],i=e[0],a=e[1];if(a=t.data[a]?a:t.last_id,t.data[i]&&t.data[a]){for(var r=[t.data[i].datetime,t.data[a].datetime],s=r[0],n=r[1],o=[],h=1;h<this.datetimeKeys.length;h++){var c=this.datetimeKeys[h-1],d=this.datetimeKeys[h];if(!(d<s)){if(s>n)break;var l=this.positions[c],u=this.positions[d],f=this.getPostionKlineId(l),b=this.getPostionKlineId(u);if(null!==f&&null!==b&&b-f>1&&0!==l.volume_net){var p=t.data[b].close-t.data[f].open;if(0!==l.volume_net&&0!==p){var m=Math.min(t.data[f].low,t.data[b].low),g=Math.max(t.data[f].high,t.data[b].high),v=l.volume_net*p>0?"profit":"loss";o.push({id:"rect"+f,x1:f,y1:g,x2:b+1,y2:m,className:v,stroke:"none"})}}}}this.drawPosRect(o)}}},{key:"drawPosRect",value:function(t){var e=this,i=this.g.selectAll("rect").data(t);i.enter().append("rect").attr("class",(function(t){return t.className})).attr("x",(function(t){return e.tqchart.chartController.revertIdToPx(t.x1)})).attr("y",(function(t){return e.revertValueToYPos(t.y1)})).attr("width",(function(t){return(t.x2-t.x1)*e.tqchart.bar.barWidth})).attr("height",(function(t){return e.revertValueToYPos(t.y2)-e.revertValueToYPos(t.y1)})),i.merge(i).attr("class",(function(t){return t.className})).attr("x",(function(t){return e.tqchart.chartController.revertIdToPx(t.x1)})).attr("y",(function(t){return e.revertValueToYPos(t.y1)})).attr("width",(function(t){return(t.x2-t.x1)*e.tqchart.bar.barWidth})).attr("height",(function(t){return e.revertValueToYPos(t.y2)-e.revertValueToYPos(t.y1)})),i.exit().remove()}},{key:"board",get:function(){return null===this._board&&(this._board=this.tqchart.boards.main?this.tqchart.boards.main:null),this._board}},{key:"g",get:function(){return null===this._g&&(this._g=this.board.markG.append("g").attr("class","posrect")),this._g}}]),t}(),Et=function(){function t(e){Object(R["a"])(this,t),this.fullWidth=e,this.barWidth=t.BAR_WIDTH,this.barPadding=this._getBarPadding(),this.barNumbers=this._getBarNumbers()}return Object(B["a"])(t,[{key:"_getBarPadding",value:function(){return this.barWidth<=3?0:this.barWidth<=17?1:2}},{key:"_getBarNumbers",value:function(){return Math.floor(this.fullWidth/this.barWidth)}},{key:"zoom",value:function(e){if(0!==e){var i=e/Math.abs(e),a=this.barWidth+2*i;a<t.BAR_WIDTH_MIN||a>t.BAR_WIDTH_MAX||a===this.barWidth||(this.barWidth=a,this.barPadding=this._getBarPadding(),this.barNumbers=this._getBarNumbers())}}},{key:"setFullWidth",value:function(t){this.fullWidth=t,this.barNumbers=this._getBarNumbers()}},{key:"setBarNumbers",value:function(e){this.barNumbers=e;var i=Math.floor(this.fullWidth/this.barNumbers);this.barWidth=Math.max(Math.min(i,t.BAR_WIDTH_MAX),t.BAR_WIDTH_MIN),this.barPadding=this._getBarPadding()}}]),t}();Et.BAR_WIDTH=9,Et.BAR_WIDTH_MAX=35,Et.BAR_WIDTH_MIN=1;var Yt=function(){function t(e,i){Object(R["a"])(this,t),this.leftId=Number.isInteger(e)?e:-1,this.rightId=Number.isInteger(i)?i:-1}return Object(B["a"])(t,[{key:"reset",value:function(t,e){return!(!this.isInvalid()&&t===this.leftId&&e===this.rightId)&&(this.leftId=Number.isInteger(t)?t:-1,this.rightId=Number.isInteger(e)?e:-1,!0)}},{key:"isInvalid",value:function(){return-1===this.leftId||-1===this.rightId}},{key:"isEqual",value:function(t){return t.leftId===this.leftId&&t.rightId===this.rightId}},{key:"copy",value:function(e){e instanceof t&&(this.leftId=e.leftId,this.rightId=e.rightId)}}]),t}(),Lt=function(){function t(e){Object(R["a"])(this,t),this.tqchart=e,this.range=new Yt}return Object(B["a"])(t,[{key:"_initRange",value:function(){var t=-1,e=-1;this.tqchart.mainSeries&&-1!==this.tqchart.mainSeries.last_id&&(e=this.tqchart.mainSeries.last_id,t=e-this.tqchart.bar.barNumbers+1),this.range.reset(t,e)}},{key:"getRange",value:function(){return this.range.isInvalid()&&this._initRange(),this.range}},{key:"init",value:function(){this._initRange()}},{key:"setRange",value:function(t,e){t>=0&&e>=t?this.range.reset(t,e):(this.tqchart.tqConsole.warn("setRange 不传入数据，表示指定移动到最后端"),this.range.reset(-1,-1))}},{key:"move",value:function(t){if(this.getRange().isInvalid())return this.tqchart.tqConsole.warn("move 拖动图表的时候，图表范围还未确定"),!1;var e=this.range.leftId-t,i=e+this.tqchart.bar.barNumbers-1;return e>=0&&e<=this.tqchart.mainSeries.last_id-this.tqchart.bar.barNumbers+10?this.range.reset(e,i):e<0?0!==this.range.leftId&&(e=0,i=e+this.tqchart.bar.barNumbers-1,this.range.reset(e,i)):e>=0&&t>0&&this.range.reset(e,i)}},{key:"zoom",value:function(){var t=-1,e=-1;return t=this.range.rightId>this.tqchart.mainSeries.last_id?this.tqchart.mainSeries.last_id-this.tqchart.bar.barNumbers+1:this.range.rightId-this.tqchart.bar.barNumbers+1,t=t<0?0:t,e=t+this.tqchart.bar.barNumbers-1,this.range.reset(t,e),!0}},{key:"revertIdToPx",value:function(t){return Math.round(this.tqchart.xAxis.xScale(t))}},{key:"revertDtToId",value:function(t,e,i){var a=this.tqchart.mainSeries;if(!a||!a.data||this.range.isInvalid())return null;var r=!1;e>=0&&i>e?r=!0:(e=this.range.leftId,i=this.range.rightId);var s=e,n=i;if(n=n<=a.last_id?n:a.last_id,!a.data[s]||!a.data[n])return null;if(t>=a.data[n].datetime&&t<a.data[n].datetime+this.tqchart.duration)return n;if(t>=a.data[s].datetime&&t<=a.data[n].datetime){for(var o=s;o<n+1&&a.data[o];o++)if(t-a.data[o].datetime<=0)return o>=1?o-1:o;return null}if(r)return null;if(t>a.data[n].datetime){if(n===a.last_id)return null;for(var h=n;h<a.last_id&&a.data[h]&&a.data[h];h++)if(t-a.data[h].datetime<=0)return h>=1?h-1:h;return null}if(t<a.data[s].datetime){if(0===s)return null;for(var c=s;c>=0&&a.data[c];c--)if(t-a.data[c].datetime>=0)return c;return null}}}]),t}(),Rt=function(t){function e(t){var i;return Object(R["a"])(this,e),i=Object(E["a"])(this,Object(Y["a"])(e).call(this)),i.divDomId=t.id,i.outerWidth=t.width,i.outerHeight=t.height,i.margin=t.margin?t.margin:{top:15,right:50,bottom:20,left:80},i.innerWidth=i.outerWidth-i.margin.left-i.margin.right,i.innerHeight=i.outerHeight-i.margin.top-i.margin.bottom,i.mode="free",i.customRange=new Yt,i.mainType="candle",i.bar=new Et(i.innerWidth),i.range=new Yt,i.symbol=t.symbol||t.instrumentId,i.duration=t.duration||6e10,i.price_decs=t.price_decs||2,i.price_ticks=t.price_ticks,i.mainSeries=t.mainSeries,i.chartController=new Lt(Object(D["a"])(i)),i.highlightManager=new Mt(Object(D["a"])(i),"highlight","HighlightBar"),i.tradeArrowManager=new Ht(Object(D["a"])(i)),i.positionManager=new Ft(Object(D["a"])(i)),i.tqConsole=yt("TqChart","plum"),i}return Object(L["a"])(e,t),Object(B["a"])(e,[{key:"setMode",value:function(t,e,i){"free"===t?(this.mode="free",e>=0&&i>=e?this.customRange.reset(e,i):this.customRange.reset()):"fixed"===t?e>=0&&i>=e?(this.mode="fixed",this.customRange.reset(e,i)):this.tqConsole.error("mode:fixed 必须指定 leftId rightId"):this.tqConsole.error("不支持 mode:".concat(t,"， 只支持 mode:[free|fixed]"))}},{key:"setRange",value:function(t,e){this.chartController.setRange(t,e),"close"===this.mainType&&this.bar.setBarNumbers(e-t+1),this.draw()}},{key:"setMainSeries",value:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"candle";t&&e&&i?(this.symbol=t,this.duration=e,this.mainSeries=i,this.mainType=a,this.backgroundText.text("".concat(this.symbol," ").concat(ft(this.duration))).attr("dy","-2"),this.chartController.init(),this.marksManager.removeMarkAll(),this.tradeArrowManager.removeAll(),this.positionManager.removeAll(),this._resetBoards(),this.draw()):this.tqConsole.error("setMainSeries 必须同时指定 symbol, duration, klines")}},{key:"addHighlightBar",value:function(t,e){this.highlightManager.add(t,e)}},{key:"addTradeArrow",value:function(t,e){this.tradeArrowManager.add(t,e)}},{key:"addPositionRecord",value:function(t,e){this.positionManager.add(t,e)}},{key:"init",value:function(){this._initSvgNode(),this._initEventListenners(),this.xAxis=new nt(this);var t=ut.GetMutilPlotsHeight(2,this.innerHeight);this.boards={main:new ut(this,"main",t[0].top,t[0].height,!1),sub:new ut(this,"sub",t[1].top,t[1].height,!0)},this.plots={mainkline:new It({chart:this,boardId:"main",plotId:"candle",yAlign:"right",type:"candle"}),volume:new It({chart:this,boardId:"sub",plotId:"volume",yAlign:"right",type:"volume"}),oi:new It({chart:this,boardId:"sub",plotId:"oi",yAlign:"left",type:"oi"})},this.marksManager=new Dt(this),this.crosshair=new ht(this),this.chartController.init()}},{key:"_initSvgNode",value:function(){this.svg=Object(K["j"])("#"+this.divDomId).append("svg").attr("class","tqchart").attr("width",this.outerWidth).attr("height",this.outerHeight),this.defs=this.svg.append("defs");var t="mask-global";this.maskGlobal=e.AppendMask(this.defs,t,this.innerWidth,this.innerHeight,0,0);var i=[this.margin.left,this.margin.top],a=i[0],r=i[1];this.backgroundG=e.AppendG(this.svg,"background global",a,r),this.boardBackgroundG=e.AppendG(this.svg,"boardBackground global",a,r),this.rootG=e.AppendG(this.svg,"root global",a,r),this.crosshairG=e.AppendG(this.svg,"crosshair global",a,r),this.loadingG=e.AppendG(this.svg,"loading global",a,r),this.bgShapesG=e.AppendG(this.svg,"bgShapes global",a,r,t),this.backgroundText=this.backgroundG.append("g").append("text"),this.backgroundText.text("".concat(this.symbol," ").concat(ft(this.duration))).attr("dy","-2"),this.markG=this.rootG.append("g")}},{key:"_debounce",value:function(t,e){var i=null;return function(){var a=this,r=arguments;clearTimeout(i),i=setTimeout((function(){t.apply(a,r)}),e)}}},{key:"_initEventListenners",value:function(){var t=this,e=null;this.svg.on("mousemove",(function(){var e=Object(K["h"])(this),i=Object(G["a"])(e,2),a=i[0],r=i[1];a>t.margin.left&&a<t.margin.left+t.innerWidth&&r>t.margin.top&&r<t.margin.top+t.innerHeight&&t.crosshair.update(a-t.margin.left,r-t.margin.top)})),this.svg.on("mouseover",(function(){null===e&&t.crosshair.show()})),this.svg.on("mouseleave",(function(){t.crosshair.hide()}));var i=Object(K["d"])().on("start",(function(){"close"!==t.mainType&&(e=K["e"].x,t.crosshair.hide(),t.crosshair.drag(!0))})).on("drag",(function(){if("close"!==t.mainType){var i=Math.round((K["e"].x-e)/t.bar.barWidth);Math.abs(i)>0&&(e=K["e"].x,t.move(i))}})).on("end",(function(){"close"!==t.mainType&&(e=null,t.crosshair.show(),t.crosshair.drag(!1))}));this.svg.call(i);var a=Object(K["r"])().on("zoom",(function(){if("close"!==t.mainType){var e=K["e"].sourceEvent.deltaY;Math.abs(e)>0&&t._debounce(t.zoom,200).bind(t)(e>0?-2:2)}}));this.svg.call(a).on("dblclick.zoom",null)}},{key:"getBoardByYPosition",value:function(t){for(var e in this.boards)if(t>=this.boards[e].top&&t<=this.boards[e].top+this.boards[e].height)return this.boards[e]}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.height,i=t.width;this.tqConsole.log("onresize",i),this.outerWidth=i,this.outerHeight=e,this.innerWidth=this.outerWidth-this.margin.left-this.margin.right,this.innerHeight=this.outerHeight-this.margin.top-this.margin.bottom,this.svg.attr("width",this.outerWidth).attr("height",this.outerHeight),this.bar.setFullWidth(this.innerWidth),this.xAxis.resetPosition(),this.chartController.zoom();var a=ut.GetMutilPlotsHeight(Object.keys(this.boards).length,this.innerHeight),r=0;for(var s in this.boards)this.boards[s].resetPosition(a[r++]);this.crosshair.resize(),this.draw()}},{key:"_resetBoards",value:function(){for(var t in this.boards)"main"!==t&&"sub"!==t&&(this.boards[t].remove(),delete this.boards[t]);var e=ut.GetMutilPlotsHeight(2,this.innerHeight);for(var i in this.boards.main.resetPosition(e[0]),this.boards.sub.resetPosition(e[1]),this.plots)"mainkline"!==i&&"volume"!==i&&"oi"!==i&&(this.plots[i].remove(),delete this.plots[i])}},{key:"_updateBoards",value:function(){var t=ut.GetMutilPlotsHeight(Object.keys(this.boards).length,this.innerHeight),e=0;for(var i in this.boards)this.boards[i].resetPosition(t[e++])}},{key:"addSeries",value:function(t,e){var i=e.board?e.board.toLowerCase():"main";this.boards[i]||(this.boards[i]=new ut(this,i,this.innerHeight,0,!0),this._updateBoards()),"KSERIAL"!==e.type&&"SERIAL"!==e.type||this.plots[t]||("KSERIAL"===e.type?this.plots[t]=new It({chart:this,boardId:i,plotId:t,yAlign:e.yAlign,type:"candle",data:e.data}):"SERIAL"===e.type&&(this.plots[t]=new It({chart:this,boardId:i,plotId:t,yAlign:e.yAlign,type:e.style.toLowerCase(),data:e.data,color:kt(e.color),width:e.width,dash:"dash"===e.style.toLowerCase()}))),"TEXT"===e.type?this.addMark({id:t,boardId:e.board.toLowerCase(),type:"text",x1:e.x1,y1:e.y1,fill:kt(e.color),size:e.size,text:e.text}):"LINE"===e.type||"SEG"===e.type||"RAY"===e.type?this.addMark({id:t,boardId:e.board.toLowerCase(),type:"line",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,stroke:kt(e.color),strokeWidth:e.width,text:"",clamp:!1}):"BOX"===e.type&&this.addMark({id:t,boardId:e.board.toLowerCase(),type:"rect",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,fill:kt(e.bg_color),stroke:kt(e.color),strokeWidth:e.width||1}),this.draw()}},{key:"addMark",value:function(t){this.marksManager.addMark(t)}},{key:"removeMark",value:function(t){this.marksManager.removeMark(t)}},{key:"removeMarkAll",value:function(){this.marksManager.removeMarkAll()}},{key:"showMark",value:function(t){this.marksManager.showMark(t)}},{key:"hideMark",value:function(t){this.marksManager.hideMark(t)}},{key:"move",value:function(t){"fixed"!==this.mode&&this.chartController.move(t)&&this.draw()}},{key:"zoom",value:function(t){if("fixed"!==this.mode){var e=this.bar.barWidth;this.bar.zoom(t),e!==this.bar.barWidth&&(this.highlightManager.each("resize"),this.chartController.zoom(),this.xAxis.resetPosition(),this.draw())}}},{key:"readyToDraw",value:function(){return this.dm.readyToDraw()}},{key:"draw",value:function(){if("candle"===this.mainType&&"close"===this.plots.mainkline.type&&(this.plots.mainkline.remove(),this.plots.mainkline=new It({chart:this,boardId:"main",plotId:"candle",yAlign:"right",type:"candle"})),"close"===this.mainType&&"candle"===this.plots.mainkline.type&&(this.plots.mainkline.remove(),this.plots.mainkline=new It({chart:this,boardId:"main",plotId:"close",yAlign:"right",type:"close"})),-1!==this.mainSeries.last_id){this.mainSeries.last_id-this.range.rightId===1&&this.chartController.setRange(this.mainSeries.last_id-this.bar.barNumbers+1,this.mainSeries.last_id);var t=this.chartController.getRange(),e=t.leftId,i=t.rightId;this.xAxis.draw(e,i,this.mainSeries.data);var a={};for(var r in this.plots){var s=this.plots[r].getYDomain(e,i,this.plots[r].data||this.mainSeries.data);if(Number.isFinite(s[0])||Number.isFinite(s[1])){var n=this.plots[r].boardId,o=this.plots[r].yAlign;a[n]=a[n]||{left:[1/0,-1/0],right:[1/0,-1/0]},a[n][o][0]=Math.min(a[n][o][0],s[0]),a[n][o][1]=Math.max(a[n][o][1],s[1])}}for(var h in this.boards){var c=a[h];c&&(this.boards[h].setDomain(c.left,"left"),this.boards[h].setDomain(c.right,"right"),this.boards[h].draw(e,i,this.mainSeries.data))}for(var d in this.plots)this.plots[d].draw(e,i,this.plots[d].data||this.mainSeries.data);this.marksManager.draw(),this.highlightManager.each("draw"),this.tradeArrowManager.draw(),this.positionManager.draw(),this.chartController.range.isEqual(this.range)||(this.range.copy(this.chartController.range),this.emit("showRangeChanged",this.range))}}},{key:"_drawBackground",value:function(t,e,i){var a=this.tqsdk.get_quote(this.symbol);if(a&&a.trading_time){var r=[],s=Object(K["l"])("%H:%M:%S"),n=Object(K["l"])("%d");if(this.duration<=6e10){var o=[];for(var h in a.trading_time.day)o.push(a.trading_time.day[h][0]);if(a.trading_time.night&&a.trading_time.night.length>0)for(var c in a.trading_time.night)o.push(a.trading_time.night[c][0]);for(var d=t;d<=e;d++)i[d]&&o.indexOf(s(i[d].datetime/1e6))>-1&&r.push((d-t)*this.bar.barWidth+this.bar.barWidth/2)}else if(this.duration<864e11){var l=[],u=a.trading_time.night?"night":"day";l.push(a.trading_time[u][0][0]);for(var f=t;f<=e;f++)i[f]&&l.indexOf(s(i[f].datetime/1e6))>-1&&r.push((f-t)*this.bar.barWidth+this.bar.barWidth/2)}else if(this.duration<=432e12)for(var b=t;b<=e;b++)i[b]&&i[b-1]&&n(i[b].datetime/1e6)<n(i[b-1].datetime/1e6)&&r.push((b-t)*this.bar.barWidth+this.bar.barWidth/2);var p=this.backgroundG.selectAll("line").data(r);p.enter().append("line").attr("y1",0).attr("y2",this.innerHeight).attr("stroke","#E6E6E6").attr("stroke-dasharray","12 6").attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),p.merge(p).attr("x1",(function(t){return t})).attr("x2",(function(t){return t})),p.exit().remove()}}}],[{key:"AppendMask",value:function(t,e,i,a,r,s){throw new Error("Method not implemented.")}},{key:"AppendG",value:function(t,e,i,a){throw new Error("Method not implemented.")}}]),e}(X);Rt.AppendG=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=t.append("g").attr("class",e);return 0===i&&0===a||s.attr("transform","translate(".concat(i,",").concat(a,")")),r&&s.attr("mask","url(#".concat(r,")")),s},Rt.AppendMask=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return t.append("mask").attr("id",e).append("rect").attr("x",r).attr("y",s).attr("width",i).attr("height",a).style("fill","#FFFFFF").attr("stroke","none")};var Bt=Rt,Kt=(i("6aec"),"web_chart"),Vt="web_chart_focus",Ut=null,Qt=null,Xt={name:"tq-chart-components",data:function(){return{id:"TQ-CHART",action:"run"}},props:{instrumentId:{type:String,default:"TQ.m@SHFE.au"},duration:{type:Number,default:6e10},width:Number,height:Number,theme:{type:String,default:"light"},mainType:{type:String,default:"candle"}},render:function(t){var e={class:{"theme-light":"light"===this.theme,"theme-dark":"dark"===this.theme},attrs:{id:this.id}};return t("div",e)},watch:{instrumentId:function(t,e){Qt.removeMarkAll(),this.$nextTick(this.updateTqChart)},duration:function(t,e){Qt.removeMarkAll(),this.$nextTick(this.updateTqChart)},width:function(t,e){Qt&&Qt.resize({width:t,height:this.height})},height:function(t,e){Qt&&Qt.resize({width:this.width,height:t})},mainType:function(t,e){Qt.removeMarkAll(),this.$nextTick(this.updateTqChart)}},created:function(){Ut=this.$tqsdk.get({name:"klines",symbol:this.instrumentId,duration:this.duration}),Qt=new Bt({id:this.id,instrumentId:this.instrumentId,duration:this.duration,height:this.height,width:this.width,mainType:this.mainType,mainSeries:Ut});var t=this;Qt.on("showRangeChanged",(function(e){if(-1!==e.rightId&&-1!==e.leftId)if("close"===t.mainType){var i=864e11,a=1;t.$tqsdk.set_chart({chart_id:Kt,symbol:t.instrumentId,duration:6e10,trading_day_start:i*(1-a),trading_day_count:i*a})}else if("candle"===t.mainType){var r=e.rightId-e.leftId;t.$tqsdk.set_chart({chart_id:Kt,symbol:t.instrumentId,duration:t.duration,left_kline_id:Math.max(e.leftId-r,0),view_width:3*r})}}))},mounted:function(){Qt.init();var t=this;this.$tqsdk.on("rtn_data",(function(){if(t.updatePositionLine(),t.updateTrades(),t.updateTqSdkChartData(),t.updatePositionRect(),"run"===t.action&&"backtest"===t.$tqsdk.get_by_path(["action","mode"])){var e=t.$store.state.account_id;if(e){var i=t.$tqsdk.get({name:"trades",user_id:e});for(var a in i){var r=i[a];Qt&&Qt.symbol&&Qt.duration&&(t.$tqsdk.set_chart({chart_id:Vt,symbol:Qt.symbol,duration:Qt.duration,view_width:Qt.bar.barNumbers,focus_datetime:r.trade_date_time,focus_position:Math.floor(Qt.bar.barNumbers/2)}),t.action="backtest");break}}}var s=t.$tqsdk.get_by_path(["charts",Vt]);if(s&&!s.more_data&&s.left_id&&s.right_id){var n=[s.left_id,s.right_id],o=n[0],h=n[1];Qt.setRange(o,h),Qt.addHighlightBar("movetoid",o+Math.round(Qt.bar.barNumbers/2-2)),t.$tqsdk.set_chart({chart_id:Vt,symbol:"",duration:Qt.duration,view_width:0})}else{var c=t.$tqsdk.get_by_path(["charts",Kt]);"close"===t.mainType&&c&&!c.more_data&&(Ut=t.$tqsdk.get({name:"klines",symbol:t.instrumentId,duration:6e10}),Ut&&Ut.trading_day_end_id>-1&&Ut.trading_day_start_id>-1&&Qt.setRange(Ut.trading_day_start_id,Ut.trading_day_end_id)),c&&!c.more_data&&t.$tqsdk.is_changed(Ut)&&Qt.draw()}})),this.$eventHub.$on("moveChartToDt",(function(t){this.$tqsdk.set_chart({chart_id:Vt,symbol:Qt.symbol,duration:Qt.duration,view_width:Qt.bar.barNumbers,focus_datetime:t,focus_position:Math.floor(Qt.bar.barNumbers/2)})}))},methods:{updateTqChart:function(){if(this.$tqsdk.set_chart({chart_id:Kt,symbol:this.instrumentId,duration:this.duration,view_width:1e3}),Ut=this.$tqsdk.get({name:"klines",symbol:this.instrumentId,duration:this.duration}),Qt){var t=this.$tqsdk.get_quote(this.instrumentId);Qt.setMainSeries(this.instrumentId,this.duration,Ut,this.mainType),Qt.price_decs=t.price_decs,this.$nextTick((function(){this.updateTqSdkChartData(),this.updateTrades(!0),this.updatePositionRect(!0)}))}},updateTqSdkChartData:function(){var t=this.$tqsdk.get_by_path(["draw_chart_datas",Qt.symbol,Qt.duration]);if(t)for(var e in t)Qt.addSeries(e,t[e])},updatePositionLine:function(t){var e=this.$store.state.account_id;if(e){var i=this.$tqsdk.get({name:"position",user_id:e,symbol:Qt.symbol});i&&i.volume_long>0?Qt.addMark({id:"pos_long",type:"line",boardId:"main",yAlign:"right",xPos1:0,xPos2:Qt.innerWidth,y1:i.open_price_long,y2:i.open_price_long,stroke:"red",text:"多仓".concat(i.volume_long,"手@").concat(i.open_price_long)}):Qt.removeMark("pos_long"),i&&i.volume_short>0?Qt.addMark({id:"pos_short",type:"line",boardId:"main",yAlign:"right",xPos1:0,xPos2:Qt.innerWidth,y1:i.open_price_short,y2:i.open_price_short,stroke:"green",text:"空仓".concat(i.volume_short,"手@").concat(i.open_price_short)}):Qt.removeMark("pos_short")}},updateTrades:function(t){var e=this.$store.state.account_id;if(e){var i=this.$tqsdk.get({name:"trades",user_id:e});for(var a in i){var r=i[a];r.volume>0&&r.exchange_id+"."+r.instrument_id===Qt.symbol&&Qt.addTradeArrow(a,r)}}},updatePositionRect:function(t){var e=this.$tqsdk.get_by_path(["snapshots"]);for(var i in e){var a=e[i];t?a.positions&&a.positions.hasOwnProperty(Qt.symbol)&&Qt.addPositionRecord(i,a.positions[Qt.symbol]):a._epoch===this.$tqsdk.dm._epoch&&a.positions&&a.positions.hasOwnProperty(Qt.symbol)&&Qt.addPositionRecord(i,a.positions[Qt.symbol])}}}},Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"subscribed-list"},[t._l(t.subscribedSymbols,(function(e){return[t._l(t.subscribed[e],(function(a){return[i("Button",{attrs:{size:"small",long:""},on:{click:function(i){return t.onClick(e,a)}}},[t._v(" "+t._s(e)+" "+t._s(t.ParseDuartionToString(a))+" ")])]}))]}))],2)},Zt=[];i("caad"),i("2532"),i("a434"),i("bf2d");function te(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"===typeof t?t.toFixed(e):t}function ee(t){switch(t){case"BUY":return"买";case"SELL":return"卖";default:return t}}function ie(t){switch(t){case"OPEN":return"开";case"CLOSE":return"平";case"CLOSETODAY":return"平今";default:return t}}function ae(t){var e="";if(t&&t>=1e9){var i=s.a.duration(t/1e9,"seconds");i.years()>0&&(e+=i.years()+"Y"),i.months()>0&&(e+=i.months()+"M"),i.days()>0&&(e+=i.days()+"D"),i.hours()>0&&(e+=i.hours()+"h"),i.minutes()>0&&(e+=i.minutes()+"m"),i.seconds()>0&&(e+=i.seconds()+"s")}return e}var re=[],se={},ne={data:function(){return{subscribedSymbols:re,subscribed:se}},props:{},watch:{subscribedSymbols:function(t,e){}},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.getByPath(["subscribed"]);if(e&&e._epoch===t.$tqsdk.dm._epoch){for(var i in e){var a=e[i];if(Array.isArray(a.symbol))for(var r in a.symbol)t.addSubscribed(a.symbol[r],a.dur_nano);else t.addSubscribed(a.symbol,a.dur_nano)}t.updateSubscribedSymbols()}}))},methods:{addSubscribed:function(t,e){se[t]||(se[t]=[]),e||(e=""),se[t].includes(e)||se[t].push(e)},updateSubscribedSymbols:function(){for(var t in se)-1===re.indexOf(t)&&re.push(t)},onClick:function(t,e){this.$emit("onChange",t,e)},ParseDuartionToString:ae}},oe=ne,he=Object(m["a"])(oe,Jt,Zt,!1,null,null,null),ce=he.exports,de=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"quote-info-container"},[i("Row",{attrs:{"class-name":"quote-items-title"}},[i("Col",{attrs:{span:t.largeSize?12:24}},[i("div",[t._v(t._s(t.quote.ins_name))])]),i("Col",{attrs:{span:t.largeSize?12:24}},[i("div",[t._v(t._s(t.quote.ins_id))])])],1),i("Row",[i("Col",{attrs:{span:t.largeSize?6:12}},[i("div",[t._v("卖一")])]),i("Col",{attrs:{span:t.largeSize?9:12}},[i("div",[t._v(t._s(t.formatter(t.quote.ask_price1)))])]),i("Col",{attrs:{span:t.largeSize?9:"0"}},[t._v(" "+t._s(t.quote.ask_volume1)+" ")])],1),i("div",{staticClass:"outer"},[i("div",{staticClass:"inner",style:{width:100*t.innerWidth+"%"}})]),i("Row",[i("Col",{attrs:{span:t.largeSize?6:12}},[t._v(" 买一 ")]),i("Col",{attrs:{span:t.largeSize?9:12}},[t._v(" "+t._s(t.formatter(t.quote.bid_price1)))]),i("Col",{attrs:{span:t.largeSize?9:"0"}},[t._v(" "+t._s(t.quote.bid_volume1)+" ")])],1),i("Row",{attrs:{"class-name":"quote-items "+(t.largeSize?"large-size":"")}},[i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最新价 ")]),i("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.last_price))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 昨结算 ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.pre_settlement))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 涨跌 ")]),i("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.change))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 今开 ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.quote.open)+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 涨跌幅 ")]),i("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t._f("toFixed")(t.quote.change_percent))+"% ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最高 ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.highest))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 总手 ")]),i("Col",{class:t.classOfColor,attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatterVolume(t.quote.volume))+" ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" 最低 ")]),i("Col",{attrs:{span:t.largeSize?6:24}},[t._v(" "+t._s(t.formatter(t.quote.lowest))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 涨停 ")]),i("Col",{staticClass:"R",attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.upper_limit))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 收盘 ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.close))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 跌停 ")]),i("Col",{staticClass:"G",attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.lower_limit))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 结算 ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.formatter(t.quote.settlement))+" ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 持仓量 ")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(t.quote.open_interest))]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" 日增")]),i("Col",{attrs:{span:t.largeSize?6:"0"}},[t._v(" "+t._s(Number.isNaN(t.quote.open_interest-t.quote.pre_open_interest)?"-":t.quote.open_interest-t.quote.pre_open_interest))])],1)],1)},le=[],ue={ins_name:"-",ins_id:"-",price_decs:2,last_price:"-",ask_price1:"-",ask_volume1:"-",bid_price1:"-",bid_volume1:"-",pre_settlement:"-",change:"-",change_percent:"-",open:"-",close:"-",highest:"-",volume:"-",lowest:"-",upper_limit:"-",lower_limit:"-",settlement:"-",open_interest:"-",pre_open_interest:"-"},fe={data:function(){return{quote:Object.assign({},ue)}},props:{symbol:String,height:Number,width:Number},watch:{symbol:function(t,e){this.$tqsdk.subscribeQuote(this.symbol);var i=this.$tqsdk.getQuote(this.symbol);be(this.quote,i)}},computed:{classOfColor:function(){return this.quote["change"]>0?"R":this.quote["change"]<0?"G":""},innerWidth:function(){return this.quote.bid_volume1/(this.quote.bid_volume1+this.quote.ask_volume1)},largeSize:function(){return this.width>100}},created:function(){var t=this;this.$tqsdk.subscribe_quote(this.symbol),this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.getQuote(t.symbol);be(t.quote,e)}))},methods:{formatter:function(t){return te(t,this.quote.price_decs)},formatterVolume:function(t){return"number"!==typeof t?t:t>1e8?(t/1e8).toFixed(1)+"亿":t>1e4?(t/1e8).toFixed(1)+"万":t}}};function be(t,e){Object.keys(ue).forEach((function(i,a,r){t[i]!==e[i]&&(t[i]=e[i])}))}var pe=fe,me=(i("19da"),Object(m["a"])(pe,de,le,!1,null,null,null)),ge=me.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about-us"},[a("a",{attrs:{href:"https://doc.shinnytech.com/tqsdk/latest/",target:"_blank"}},[a("img",{staticClass:"logo",attrs:{alt:"Tianqin",src:i("cf05")}}),t._v(" 天勤量化"),t.width>100?a("span",[t._v("开发文档")]):t._e()]),a("a",{attrs:{href:"https://www.shinnytech.com/qa/",target:"_blank"}},[a("Icon",{attrs:{type:"ios-chatbubbles"}}),t._v(" 天勤"),t.width>100?a("span",[t._v("量化")]):t._e(),t._v("论坛 ")],1)])},ye=[],_e={props:{width:Number}},ke=_e,xe=(i("2975"),Object(m["a"])(ke,ve,ye,!1,null,null,null)),we=xe.exports,je=function(){return document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)}}(),Se=function(){return document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)}}(),qe={name:"tq-top-view",components:{TqLayoutArea:v,TqChartComponents:Xt,ButtonGroupDurations:W,QuoteInfo:ge,SubscribedList:ce,AboutUs:we},props:{width:Number,height:Number},data:function(){var t=240,e=80;return{rightClosed:!1,rightOpenedWidth:t,rightClosedWidth:e,instrumentId:"",duration:6e10,theme:"light",mainType:"candle"}},computed:{chartWidth:function(){var t=this.$root.windowWidth-(this.rightClosed?this.rightClosedWidth:this.rightOpenedWidth);return Math.max(t,400)},rightWidth:function(){return(this.rightClosed?this.rightClosedWidth:this.rightOpenedWidth)-4}},methods:{toggleRightClosed:function(){this.rightClosed=!this.rightClosed},onChangeDuration:function(t,e){this.duration=t,this.mainType="分时"===e?"close":"candle"},onChangeSelectedSubscribed:function(t,e){this.instrumentId=t,this.duration=e||6e10,this.mainType="candle"}},created:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){t.subscribed=t.$tqsdk.get_by_path(["subscribed"]),t.subscribed&&t.subscribed[0]&&""===t.instrumentId&&(t.subscribedIndex=0,t.instrumentId=Array.isArray(t.subscribed[0].symbol)?t.subscribed[0].symbol[0]:t.subscribed[0].symbol,t.duration=t.subscribed[0].dur_nano||6e10)}))}},Oe=qe,Ce=(i("f451"),Object(m["a"])(Oe,A,I,!1,null,null,null)),Ae=Ce.exports,Ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tq-bottom-view"},["backtest"===t.$store.state.mode?[i("tq-layout-area",{attrs:{width:t.width/2,height:t.height}},[i("Tabs",{attrs:{animated:!1}},[i("TabPane",{attrs:{label:"回测指标"}},[i("backtest-info",{attrs:{width:t.width,height:t.height-27}})],1),i("TabPane",{attrs:{label:"成交记录"}},[i("trades-table",{attrs:{width:t.width,height:t.height-27}})],1)],1)],1),i("tq-layout-area",{attrs:{horizontalAlign:"right",width:t.width/2,height:t.height,otherStyle:{borderLeft:"2px solid #E0E0E0"}}},[i("backtest-chart")],1)]:"run"===t.$store.state.mode||"replay"===t.$store.state.mode?[i("tq-layout-area",{attrs:{height:26,width:t.width}},[i("account-info",{attrs:{height:26}})],1),i("tq-layout-area",{attrs:{height:t.height-26,top:26,width:t.width}},[i("Tabs",[i("TabPane",{attrs:{label:"持仓"}},[i("positions-table",{attrs:{width:t.width,height:t.height-53}})],1),i("TabPane",{attrs:{label:"成交记录"}},[i("trades-table",{attrs:{width:t.width,height:t.height-53}})],1),i("TabPane",{attrs:{label:"委托单记录"}},[i("orders-table",{attrs:{width:t.width,height:t.height-53}})],1)],1)],1)]:t._e()],2)},Pe=[],Ne=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reports trades-table",style:{height:t.height+"px"}},[i("table",[i("thead",[i("tr",t._l(t.columns,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])})),0)]),i("tbody")])])},Me=[],Te={data:function(){return{tbodyRoot:null,columns:[{name:"成交合约",key:"instrument_id",width:"100",cb:function(t){return t.exchange_id+"."+t.instrument_id}},{name:"方向",key:"direction",width:"60",cb:function(t){return ee(t.direction)}},{name:"开平",key:"offset",width:"60",cb:function(t){return ie(t.offset)}},{name:"成交价格",width:"60",key:"price"},{name:"手数",width:"60",key:"volume"},{name:"成交时间",key:"trade_date_time",width:"140",cb:function(t){return s()(t.trade_date_time/1e6).format("YYYY-MM-DD HH:mm:ss")}},{name:"报单编号",key:"trade_id",width:"260"}]}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".trades-table table tbody");var t=this,e=function(){var e=t.$store.state.account_id;if(e){var i=[],a=t.$tqsdk.get({name:"trades",user_id:e});if(a){for(var r in a)a[r]._epoch===t.$tqsdk.dm._epoch&&i.push(a[r]);i.sort((function(t,e){return t.trade_date_time-e.trade_date_time}));for(var s=function(e){var a=t.append_trade(i[e]);a.onclick=function(r){var s=t.tbodyNode.querySelectorAll("tr");s.forEach((function(t){return t.className=""})),a.className="selected",t.$eventHub.$emit("moveChartToDt",i[e].trade_date_time)}},n=0;n<i.length;n++)s(n)}}};e(),this.$tqsdk.on("rtn_data",e)},methods:{append_trade:function(t){var e=document.createElement("tr");for(var i in this.columns){var a=this.columns[i],r=this.get_td_text(a.cb?a.cb(t):t[a.key],a.key);e.appendChild(r)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},get_td_text:function(t){var e=document.createElement("td");return e.textContent=t,e}}},ze=Te,$e=Object(m["a"])(ze,Ne,Me,!1,null,null,null),We=$e.exports,Ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reports orders-table",style:{height:t.height+"px"}},[i("table",[i("thead",[i("tr",[t._l(t.columns,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])})),t._l(t.columnsAppend,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])}))],2)]),i("tbody")])])},De=[],He={data:function(){return{tbodyRoot:null,columns:[{name:"成交合约",width:"100",key:"instrument_id",cb:function(t){return t.exchange_id+"."+t.instrument_id}},{name:"方向",width:"60",key:"direction",cb:function(t){return ee(t.direction)}},{name:"开平",width:"60",key:"offset",cb:function(t){return ie(t.offset)}},{name:"报单价格",width:"60",key:"limit_price"},{name:"总手数",width:"60",key:"volume_orign"},{name:"报单时间",width:"140",key:"insert_date_time",cb:function(t){return s()(t.insert_date_time/1e6).format("YYYY-MM-DD HH:mm:ss")}}],columnsAppend:[{name:"未成交手数",key:"volume_left",width:"80",cb:function(t){return t.volume_left}},{name:"冻结保证金",width:"80",key:"frozen_margin"},{name:"状态",width:"60",key:"status",cb:function(t){return"FINISHED"===t.status?"已完成":"未完成"}},{name:"提示信息",key:"last_msg",width:"160"}],ordersTr:{}}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".orders-table table tbody");var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$store.state.account_id;if(e){var i=t.$tqsdk.get({name:"orders",user_id:e});if(i){var a=function(e){if(t.ordersTr[e])t.update_order(i[e],t.ordersTr[e]);else{var a=t.append_order(i[e]);a.onclick=function(r){var s=t.tbodyNode.querySelectorAll("tr");s.forEach((function(t){return t.className=""})),a.className="selected",t.$eventHub.$emit("moveChartToDt",i[e].insert_date_time)},t.ordersTr[e]=a}};for(var r in i)a(r)}}}))},methods:{append_order:function(t){var e=document.createElement("tr");for(var i in this.columns){var a=this.columns[i],r=this.get_td_text(a.cb?a.cb(t):t[a.key],a.key);e.appendChild(r)}for(var s in this.columnsAppend){var n=this.columnsAppend[s],o=this.get_td_text(n.cb?n.cb(t):t[n.key],n.key);e.appendChild(o)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},update_order:function(t,e){for(var i in this.columnsAppend){var a=this.columns[i],r=e.querySelector("."+a.key),s=a.cb?a.cb(t):t[a.key];s!==r.textContent&&this.update_td_text(s,r)}},get_td_text:function(t,e){var i=document.createElement("td");return i.className=e,i.textContent=t,i},update_td_text:function(t,e){e.textContent=t}}},Fe=He,Ee=Object(m["a"])(Fe,Ge,De,!1,null,null,null),Ye=Ee.exports,Le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reports positions-table",style:{height:t.height+"px"}},[i("table",[i("thead",[i("tr",[t._l(t.columns,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])})),t._l(t.columnsAppend,(function(e){return i("th",{attrs:{width:e.width?e.width+"px":""}},[t._v(t._s(e.name))])}))],2)]),i("tbody")])])},Re=[],Be={data:function(){return{tbodyRoot:null,columns:[{name:"持仓合约",width:"100",key:"instrument_id",cb:function(t){return t.exchange_id+"."+t.instrument_id}}],columnsAppend:[{name:"多仓",key:"volume_long",width:"60"},{name:"多头开仓均价",width:"80",key:"open_price_long",cb:function(t){return te(t.open_price_long)}},{name:"多头浮动盈亏",width:"80",key:"position_profit_long",cb:function(t){return te(t.position_profit_long)}},{name:"多头占用保证金",width:"80",key:"margin_long",cb:function(t){return te(t.margin_long)}},{name:"空仓",key:"volume_short",width:"60"},{name:"空头开仓均价",width:"80",key:"open_price_short",cb:function(t){return te(t.open_price_short)}},{name:"空头浮动盈亏",width:"80",key:"position_profit_short",cb:function(t){return te(t.position_profit_short)}},{name:"空头占用保证金",width:"80",key:"margin_short",cb:function(t){return te(t.margin_short)}}],ordersTr:{}}},props:{height:Number},mounted:function(){this.tbodyNode=document.querySelector(".positions-table table tbody");var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$store.state.account_id;if(e){var i=t.$tqsdk.get({name:"positions",user_id:e});if(i)for(var a in i)t.ordersTr[a]?t.update_position(i[a],t.ordersTr[a]):t.ordersTr[a]=t.append_position(i[a])}}))},methods:{append_position:function(t){var e=document.createElement("tr");for(var i in this.columns){var a=this.columns[i],r=this.get_td_text(a.cb?a.cb(t):t[a.key],a.key);e.appendChild(r)}for(var s in this.columnsAppend){var n=this.columnsAppend[s],o=this.get_td_text(n.cb?n.cb(t):t[n.key],n.key);e.appendChild(o)}return this.tbodyNode.insertBefore(e,this.tbodyNode.firstChild),e},update_position:function(t,e){for(var i in this.columnsAppend){var a=this.columnsAppend[i],r=e.querySelector("."+a.key),s=a.cb?a.cb(t):t[a.key];s!==r.textContent&&this.update_td_text(s,r)}},get_td_text:function(t,e){var i=document.createElement("td");return i.className=e,i.textContent=t,i},update_td_text:function(t,e){e.textContent=t}}},Ke=Be,Ve=Object(m["a"])(Ke,Le,Re,!1,null,null,null),Ue=Ve.exports,Qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"account-info",style:{height:t.height+"px"}},[i("div",[t._v(" 账户权益: "+t._s(t._f("toFixed")(t.balance))+" ")]),i("div",[t._v(" 浮动盈亏: "+t._s(t._f("toFixed")(t.float_profit))+" ")]),i("div",[t._v(" 保证金占用: "+t._s(t._f("toFixed")(t.margin))+" ")]),i("div",[t._v(" 日内手续费: "+t._s(t._f("toFixed")(t.commission))+" ")]),i("div",[t._v(" 可用资金: "+t._s(t._f("toFixed")(t.available))+" ")])])},Xe=[],Je=(i("130f"),{data:function(){return{available:"-",balance:"-",commission:"-",float_profit:"-",margin:"-"}},props:{height:Number},computed:{account_id:function(){return this.$store.state.account_id}},mounted:function(){setImmediate(this.update.bind(this)),this.$tqsdk.on("rtn_data",this.update)},methods:{update:function(){if(this.account_id){var t=this.$tqsdk.get({name:"account",user_id:this.account_id,currency:"CNY"});t._epoch===this.$tqsdk.dm._epoch&&(this.available=t.available,this.balance=t.balance,this.commission=t.commission,this.float_profit=t.float_profit,this.margin=t.margin)}}}}),Ze=Je,ti=(i("a240"),Object(m["a"])(Ze,Qe,Xe,!1,null,null,null)),ei=ti.exports,ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"backtest-info",style:{height:t.height+"px"}},[i("Row",["-"===t.init_balance?i("Col",{attrs:{span:24,"class-name":"spin-container"}},[i("Spin",{attrs:{fix:""}},[i("div",{staticClass:"loader"},[i("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[i("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"6","stroke-miterlimit":"10"}})])]),t._v(" 回测进行中 ")])],1):t._e()],1),i("Row",[i("Col",{attrs:{span:6}},[t._v("起始资金")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.init_balance,2)))]),i("Col",{attrs:{span:6}},[t._v("总收益")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.balance-t.init_balance,2)))]),i("Col",{attrs:{span:6}},[t._v("结束资金")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.balance,2)))]),i("Col",{attrs:{span:6}},[t._v("总收益率")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.ror,2))+"%")]),i("Col",{attrs:{span:6}},[t._v("最大回撤")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.max_drawdown,2))+"%")]),i("Col",{attrs:{span:6}},[t._v("年化收益率")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.annual_yield,2))+"%")]),i("Col",{attrs:{span:6}},[t._v("总手续费")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.commission,2)))]),i("Col",{attrs:{span:6}},[t._v("年化夏普率")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.sharpe_ratio,2)))]),i("Col",{attrs:{span:6}},[t._v("胜率")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(100*t.winning_rate,2))+"%")]),i("Col",{attrs:{span:6}},[t._v("盈亏额比")]),i("Col",{attrs:{span:6}},[t._v(t._s(t._f("toFixed")(t.profit_loss_ratio,2)))]),i("Col",{style:{color:"#bd0000"},attrs:{span:12}},[t._v("天勤量化："+t._s(t.getMsg(100*t.ror)))])],1)],1)},ai=[],ri={data:function(){return{init_balance:"-",balance:"-",ror:"-",annual_yield:"-",max_drawdown:"-",sharpe_ratio:"-",commission:"-",winning_rate:"-",profit_loss_ratio:"-"}},props:{height:Number,width:Number},methods:{getMsg:function(t){return t<=-100?"幸好是模拟账户，不然你就亏完啦":t<=-50?"触底反弹,与其执迷修改参数，不如改变策略思路去天勤官网策略库进修":t<=-20?"越挫越勇，不如去天勤量化官网策略库进修":t<=0?"不要灰心，少侠重新来过":t<=20?"策略看来小有所成":t<=50?"策略看来的得心应手":t<=100?"策略看来春风得意，堪比当代索罗斯":"策略看来独孤求败，小心过拟合噢"}},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$store.state.account_id;if(e){var i=t.$tqsdk.get({name:"account",user_id:e,currency:"CNY"});if(i&&i._tqsdk_stat){t.init_balance=i._tqsdk_stat.init_balance,t.balance=i._tqsdk_stat.balance,t.max_drawdown=i._tqsdk_stat.max_drawdown,t.annual_yield=i._tqsdk_stat.annual_yield,t.ror=i._tqsdk_stat.ror,t.sharpe_ratio=i._tqsdk_stat.sharpe_ratio,t.winning_rate=i._tqsdk_stat.winning_rate,t.profit_loss_ratio=i._tqsdk_stat.profit_loss_ratio;var a=t.$tqsdk.get({name:"trades",user_id:e}),r=0;for(var s in a)r+=a[s].commission;t.commission=r}}}))}},si=ri,ni=(i("5ab6"),Object(m["a"])(si,ii,ai,!1,null,null,null)),oi=ni.exports,hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"backtest-report"},[i("e-chart",{ref:"echart",attrs:{height:"200px",width:t.width+"px","path-option":t.defaultOption}})],1)},ci=[],di=(i("25eb"),i("a6fb")),li=i.n(di),ui=i("313e"),fi=i.n(ui);(function(){var t=function(t,e,i){i=i||window;var a=!1,r=function(){a||(a=!0,requestAnimationFrame((function(){i.dispatchEvent(new CustomEvent(e)),a=!1})))};i.addEventListener(t,r)};t("resize","optimizedResize")})();var bi={name:"v-echart",render:function(t){var e={staticClass:"v-chart",style:this.canvasStyle,ref:"canvas",on:this.$listeners};return t("div",e)},props:{width:{type:String,default:"auto"},height:{type:String,default:"400px"},pathOption:[Object,Array],widthChangeDelay:{type:Number,default:450}},data:function(){return{chartInstance:null,_defaultOption:{animation:!1,tooltip:{show:!0},title:{show:!0,textStyle:{fontSize:"16px",color:"rgba(0, 0, 0 , .87)",fontFamily:"sans-serif"}},grid:{containLabel:!0},xAxis:{show:!0,type:"category",axisLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{show:!0,color:"rgba(0, 0, 0 , .24)"}},axisLabel:{show:!1},splitLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}}},yAxis:{show:!0,type:"value",max:"dataMax",min:"dataMin",axisLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisLabel:{show:!1,color:"rgba(0, 0, 0 , .24)"},splitLine:{lineStyle:{color:"rgba(0, 0, 0 , .24)"}},axisTick:{show:!0,lineStyle:{show:!0,color:"rgba(0, 0, 0 , .54)"}}},series:[{type:"line"}]}}},computed:{canvasStyle:function(){return{width:this.width,height:this.height}}},methods:{init:function(){var t=this;this.pathOption&&this.pathOption.forEach((function(e){li.a.set(t.$data._defaultOption,e[0],e[1])})),this.chartInstance=fi.a.init(this.$refs.canvas),this.chartInstance.setOption(this.$data._defaultOption),window.addEventListener("optimizedResize",(function(e){setTimeout((function(e){t.chartInstance.resize()}),t.widthChangeDelay)}))},showLoadPercent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&t<100?(t=Math.max(t,0),this.chartInstance.showLoading("default",{text:"数据已加载 "+t+"%",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0})):this.chartInstance.hideLoading()},update:function(t){this.chartInstance.setOption(t)},resize:function(){this.chartInstance.resize()},clean:function(){window.removeEventListener("resize",this.chartInstance.resize),this.chartInstance.clear()}},mounted:function(){this.init()},beforeDestroy:function(){this.clean()}},pi={components:{EChart:bi},data:function(){return{daily_yield:[],defaultOption:[["grid.top","16px"],["grid.left","10px"],["grid.bottom","0px"],["grid.right","16px"],["series[0]",{type:"line",encode:{x:"datetime",y:["balance"]},smooth:!1,showAllSymbol:!0,areaStyle:{}}],["yAxis.show",!0],["yAxis.type","value"],["yAxis.axisLabel",{show:!0,formatter:function(t,e){return t.toFixed(2)},color:"#333333"}],["yAxis.splitLine",{show:!0}],["xAxis.show",!0],["xAxis.type","time"],["xAxis.axisLabel",{show:!0,color:"#333333"}],["xAxis.splitLine",{show:!0}],["xAxis.boundaryGap",!1],["tooltip",{trigger:"axis",triggerOn:"mousemove|click"}]]}},props:{height:Number,width:Number},methods:{},mounted:function(){var t=this;this.$tqsdk.on("rtn_data",(function(){var e=t.$tqsdk.get_by_path(["snapshots"]),i=[];for(var a in e)a>t.$store.state.end_dt||i.push([Number.parseInt(a/1e6),e[a].accounts.CNY.balance]);t.$refs.echart.update({dataset:{source:i}})}))}},mi=pi,gi=(i("b7de"),Object(m["a"])(mi,hi,ci,!1,null,null,null)),vi=gi.exports,yi={name:"tq-bottom-view",components:{TqLayoutArea:v,TradesTable:We,OrdersTable:Ye,PositionsTable:Ue,AccountInfo:ei,BacktestInfo:oi,BacktestChart:vi},props:{height:Number,width:Number},data:function(){return{}},methods:{},created:function(){}},_i=yi,ki=(i("1a2d3"),Object(m["a"])(_i,Ie,Pe,!1,null,null,null)),xi=ki.exports,wi=38,ji=4,Si=56,qi={name:"tq-home",components:{TqHeaderView:C,TqTopView:Ae,TqBottomView:xi},data:function(){var t=Math.max(260,Math.round(this.$root.windowHeight/5*3)),e=wi+t+ji;return{isMoving:!1,headerHeight:wi,topHeight:t,topHeightMin:260,bottomYOffset:e,bottomYOffsetMin:2*wi,bottomYOffsetMax:this.$root.windowHeight-Si,bottomHeight:this.$root.windowHeight-e-ji,showBottomShadow:!1}},methods:{onResize:function(){this.bottomYOffsetMax=this.$root.windowHeight-Si,this.computeLayouts()},handleMousedown:function(t){this.isMoving=!0,je(document,"mousemove",this.handleMove),je(document,"mouseup",this.handleUp)},handleMove:function(t){var e=t.pageY;e>=this.bottomYOffsetMax||e<=this.bottomYOffsetMin||(this.bottomYOffset=e,this.computeLayouts())},handleUp:function(){this.isMoving=!1,Se(document,"mousemove",this.handleMove),Se(document,"mouseup",this.handleUp)},computeLayouts:function(){var t=this.$root.windowHeight-this.bottomYOffset;t<=Si&&(t=Si,this.bottomYOffset=this.$root.windowHeight-t),this.showBottomShadow=this.bottomYOffset<this.topHeightMin+wi,this.bottomHeight=t-ji;var e=this.$root.windowHeight-wi-t-ji;this.topHeight=Math.max(e,this.topHeightMin)}},created:function(){this.$eventHub.$on("window_resize",this.onResize),this.computeLayouts()}},Oi=qi,Ci=(i("a124"),Object(m["a"])(Oi,h,c,!1,null,null,null)),Ai=Ci.exports,Ii={name:"tq-app",components:{Tianqin:Ai}},Pi=Ii,Ni=(i("5c0b"),Object(m["a"])(Pi,n,o,!1,null,null,null)),Mi=Ni.exports,Ti=i("0977"),zi=i("8629"),$i=i("f843"),Wi=i("8144"),Gi=i("2d48"),Di=i("6def"),Hi=i("e79d"),Fi=i("90b2"),Ei=i("c5c1"),Yi=i("dcbf"),Li=i("e3f5"),Ri=i("5250"),Bi=i("76ea"),Ki=i("b3e6"),Vi=i("8679"),Ui=i("fe66"),Qi=i("6252"),Xi=i("9259"),Ji=i("aa30"),Zi=i("e0b9");a["a"].prototype.$Loading=Zi["a"],a["a"].prototype.$Message=Ji["a"],a["a"].prototype.$Modal=Xi["a"],a["a"].prototype.$Notice=Qi["a"],a["a"].prototype.$Spin=Ui["a"],a["a"].component("Layout",Vi["a"]),a["a"].component("Row",Ki["a"]),a["a"].component("Col",Bi["a"]),a["a"].component("Icon",Ri["a"]),a["a"].component("Button",Li["a"]),a["a"].component("ButtonGroup",Yi["a"]),a["a"].component("Dropdown",Ei["a"]),a["a"].component("DropdownMenu",Fi["a"]),a["a"].component("DropdownItem",Hi["a"]),a["a"].component("Badge",Di["a"]),a["a"].component("Radio",Gi["a"]),a["a"].component("RadioGroup",Wi["a"]),a["a"].component("Tabs",$i["a"]),a["a"].component("TabPane",zi["a"]),a["a"].component("Spin",Ui["a"]);var ta=i("2f62");a["a"].use(ta["a"]);var ea=new ta["a"].Store({state:{mode:"",broker_id:"",account_id:"",py_file_status:"",md_url_status:"",td_url_status:"",file_path:"",file_name:""},mutations:{set_action:function(t,e){Object.assign(t,e)},set_py_file_status:function(t,e){t.py_file_status=e}},actions:{}}),ia=ea;a["a"].config.productionTip=!1,a["a"].$eventHub=new a["a"],a["a"].prototype.$eventHub=a["a"].$eventHub;var aa={name:"tianqin-web",windowHeight:window.innerHeight,windowWidth:window.innerWidth},ra=new a["a"]({data:aa,store:ia,render:function(t){return t(Mi)},methods:{handlerResize:function(){aa.windowHeight=window.innerHeight,aa.windowWidth=window.innerWidth,this.$eventHub.$emit("window_resize",{width:aa.windowWidth,height:aa.windowHeight})}},created:function(){var t;function e(){t||(t=setTimeout((function(){t=null,ra.handlerResize()}),200))}window.addEventListener("resize",e,!1)},errorCaptured:function(t,e,i){return!1},destroyed:function(){}});a["a"].filter("toFixed",(function(t,e){var i=Number(t);return e=Number.isInteger(e)?e:2,Number.isFinite(i)?i.toFixed(e):t||"-"})),GetTqsdkUrl().then((function(t){var e=t["ins_url"],i=t["md_url"],r=t["ws_url"];if("https://openmd.shinnytech.com/t/md/symbols/latest.json"===e){var n=s()().format("YYYY-MM-DD HH:mm:ss.SSSSSS");e="https://openmd.shinnytech.com/t/md/symbols/".concat(n,".json")}if(t["replay_dt"]){var o=e.indexOf("/symbol");ia.state.ctrl_url=e.substring(0,o);var h=s()(t["replay_dt"]/1e6).format("YYYY-MM-DD HH:mm:ss");h+=(Math.random()+"").substring(2,8),e="https://openmd.shinnytech.com/t/md/symbols/".concat(h,".json")}a["a"].$tqsdk=new Ti["a"]({symbolsServerUrl:e,wsQuoteUrl:i,autoInit:!1}),a["a"].prototype.$tqsdk=a["a"].$tqsdk,a["a"].$tqsdk.initMdWebsocket();var c=a["a"].$tqsdk.addWebSocket(r);c.on("close",(function(){ia.commit("set_py_file_status",!1)})),c.on("open",(function(){ia.commit("set_py_file_status",!0)})),a["a"].$tqsdk.on("rtn_data",(function(){var t=a["a"].$tqsdk.get_by_path(["_tqsdk_backtest"]);t&&t.current_dt&&(ia.state.start_dt=t.start_dt,ia.state.end_dt=t.end_dt);var e=a["a"].$tqsdk.get_by_path(["_tqsdk_replay"]);e&&e.replay_dt&&(ia.state.replay_dt=e.replay_dt);var i=a["a"].$tqsdk.get_by_path(["action"]);""===ia.state.mode&&i&&ia.commit("set_action",i)})),ra.$mount("#app")}))},"5a46":function(t,e,i){},"5ab6":function(t,e,i){"use strict";var a=i("d85d"),r=i.n(a);r.a},"5c0b":function(t,e,i){"use strict";var a=i("9c0c"),r=i.n(a);r.a},"5c44":function(t,e,i){},6491:function(t,e,i){},"657e":function(t,e,i){},"6aec":function(t,e,i){},"7d53":function(t,e,i){var a={"./af":"ba66","./af.js":"ba66","./ar":"dddc","./ar-dz":"a437","./ar-dz.js":"a437","./ar-kw":"6fb3","./ar-kw.js":"6fb3","./ar-ly":"fa9f","./ar-ly.js":"fa9f","./ar-ma":"1fd0","./ar-ma.js":"1fd0","./ar-sa":"95a1","./ar-sa.js":"95a1","./ar-tn":"eee9","./ar-tn.js":"eee9","./ar.js":"dddc","./az":"2c2c","./az.js":"2c2c","./be":"b8bb","./be.js":"b8bb","./bg":"87af","./bg.js":"87af","./bm":"b565","./bm.js":"b565","./bn":"3f59","./bn.js":"3f59","./bo":"5ba2","./bo.js":"5ba2","./br":"7819","./br.js":"7819","./bs":"f542","./bs.js":"f542","./ca":"3511","./ca.js":"3511","./cs":"68da","./cs.js":"68da","./cv":"dbd5","./cv.js":"dbd5","./cy":"d4c1","./cy.js":"d4c1","./da":"3b72","./da.js":"3b72","./de":"bb2a","./de-at":"79f3","./de-at.js":"79f3","./de-ch":"a795","./de-ch.js":"a795","./de.js":"bb2a","./dv":"bdaa","./dv.js":"bdaa","./el":"eb78","./el.js":"eb78","./en-SG":"861a","./en-SG.js":"861a","./en-au":"00f5","./en-au.js":"00f5","./en-ca":"edfa","./en-ca.js":"edfa","./en-gb":"2c0b","./en-gb.js":"2c0b","./en-ie":"669f","./en-ie.js":"669f","./en-il":"0a7e","./en-il.js":"0a7e","./en-nz":"7987","./en-nz.js":"7987","./eo":"d9ea","./eo.js":"d9ea","./es":"c4dc","./es-do":"be41","./es-do.js":"be41","./es-us":"6d8bd","./es-us.js":"6d8bd","./es.js":"c4dc","./et":"63b2","./et.js":"63b2","./eu":"023b","./eu.js":"023b","./fa":"87b7","./fa.js":"87b7","./fi":"0ae3","./fi.js":"0ae3","./fo":"9958","./fo.js":"9958","./fr":"d9d5","./fr-ca":"b0ce","./fr-ca.js":"b0ce","./fr-ch":"4cbe","./fr-ch.js":"4cbe","./fr.js":"d9d5","./fy":"d0ab","./fy.js":"d0ab","./ga":"e695","./ga.js":"e695","./gd":"b027","./gd.js":"b027","./gl":"1d67","./gl.js":"1d67","./gom-latn":"6a6f","./gom-latn.js":"6a6f","./gu":"0da0","./gu.js":"0da0","./he":"c8cb","./he.js":"c8cb","./hi":"13f4","./hi.js":"13f4","./hr":"e133","./hr.js":"e133","./hu":"c8e4","./hu.js":"c8e4","./hy-am":"cc20","./hy-am.js":"cc20","./id":"3141","./id.js":"3141","./is":"1194","./is.js":"1194","./it":"4c7a","./it-ch":"7e2f","./it-ch.js":"7e2f","./it.js":"4c7a","./ja":"8382","./ja.js":"8382","./jv":"612d","./jv.js":"612d","./ka":"044a","./ka.js":"044a","./kk":"bed1","./kk.js":"bed1","./km":"8e3f","./km.js":"8e3f","./kn":"fc09","./kn.js":"fc09","./ko":"7117","./ko.js":"7117","./ku":"b312","./ku.js":"b312","./ky":"286b","./ky.js":"286b","./lb":"ee56","./lb.js":"ee56","./lo":"3c93","./lo.js":"3c93","./lt":"7776","./lt.js":"7776","./lv":"1c78","./lv.js":"1c78","./me":"9bdb","./me.js":"9bdb","./mi":"9fda","./mi.js":"9fda","./mk":"2558","./mk.js":"2558","./ml":"8da7","./ml.js":"8da7","./mn":"f171","./mn.js":"f171","./mr":"d0ad","./mr.js":"d0ad","./ms":"1656","./ms-my":"59ab","./ms-my.js":"59ab","./ms.js":"1656","./mt":"5637","./mt.js":"5637","./my":"7ce9","./my.js":"7ce9","./nb":"866f","./nb.js":"866f","./ne":"8212","./ne.js":"8212","./nl":"cd20","./nl-be":"b1b6","./nl-be.js":"b1b6","./nl.js":"cd20","./nn":"e374","./nn.js":"e374","./pa-in":"4771","./pa-in.js":"4771","./pl":"2a01","./pl.js":"2a01","./pt":"b85f","./pt-br":"1f00","./pt-br.js":"1f00","./pt.js":"b85f","./ro":"c70f","./ro.js":"c70f","./ru":"fe04","./ru.js":"fe04","./sd":"993f","./sd.js":"993f","./se":"721d","./se.js":"721d","./si":"67fd","./si.js":"67fd","./sk":"7d98","./sk.js":"7d98","./sl":"40c7","./sl.js":"40c7","./sq":"ace6","./sq.js":"ace6","./sr":"ae1f","./sr-cyrl":"866a","./sr-cyrl.js":"866a","./sr.js":"ae1f","./ss":"b1e8","./ss.js":"b1e8","./sv":"c15d","./sv.js":"c15d","./sw":"27ce","./sw.js":"27ce","./ta":"3d9a","./ta.js":"3d9a","./te":"4e77","./te.js":"4e77","./tet":"828a","./tet.js":"828a","./tg":"19f8","./tg.js":"19f8","./th":"cfa9","./th.js":"cfa9","./tl-ph":"f593","./tl-ph.js":"f593","./tlh":"8442","./tlh.js":"8442","./tr":"6492","./tr.js":"6492","./tzl":"8d10","./tzl.js":"8d10","./tzm":"9f98","./tzm-latn":"3ade","./tzm-latn.js":"3ade","./tzm.js":"9f98","./ug-cn":"74e3","./ug-cn.js":"74e3","./uk":"3d52","./uk.js":"3d52","./ur":"664c","./ur.js":"664c","./uz":"3ecc","./uz-latn":"dde1","./uz-latn.js":"dde1","./uz.js":"3ecc","./vi":"dcd6","./vi.js":"dcd6","./x-pseudo":"d910","./x-pseudo.js":"d910","./yo":"e362","./yo.js":"e362","./zh-cn":"c329","./zh-cn.js":"c329","./zh-hk":"c46d","./zh-hk.js":"c46d","./zh-tw":"1ea8","./zh-tw.js":"1ea8"};function r(t){var e=s(t);return i(e)}function s(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=s,t.exports=r,r.id="7d53"},"889f":function(t,e,i){},"8e24":function(t,e,i){"use strict";var a=i("889f"),r=i.n(a);r.a},"8fde":function(t,e,i){},"9c0c":function(t,e,i){},a124:function(t,e,i){"use strict";var a=i("657e"),r=i.n(a);r.a},a240:function(t,e,i){"use strict";var a=i("07f6"),r=i.n(a);r.a},a829:function(t,e,i){},b7de:function(t,e,i){"use strict";var a=i("5096"),r=i.n(a);r.a},b9e2:function(t,e,i){"use strict";var a=i("a829"),r=i.n(a);r.a},cf05:function(t,e,i){t.exports=i.p+"img/logo.165e0f64.png"},d85d:function(t,e,i){},dcf3:function(t,e,i){},f451:function(t,e,i){"use strict";var a=i("5c44"),r=i.n(a);r.a},f6c5:function(t,e,i){}});